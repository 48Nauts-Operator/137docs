<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# AST Navigation Utilities

This module provides utilities for navigating Abstract Syntax Tree (AST) nodes in Python. It offers functions to traverse, inspect, and manipulate relationships between AST nodes, making it easier to work with parsed Python code structures.

## Purpose

The module is designed to enhance AST node navigation by providing convenient methods to:
- Get node type information
- Traverse parent-child relationships
- Navigate between sibling nodes
- Access specific nodes in the tree structure

## Key Features

- **Node type identification**: Get the kind/type of AST nodes
- **Tree traversal**: Navigate through children, siblings, and parent nodes
- **Relationship management**: Automatically sets parent references on child nodes
- **Error handling**: Provides specific exceptions for navigation edge cases

## Functions

### `ast_kind(node: AST) -> str`

Returns the type/kind of an AST node as a lowercase string.

```python
# Example usage
import ast
code = ast.parse("x = 1")
print(ast_kind(code))  # Returns "module"
```

**Parameters:**
- `node`: The AST node to inspect

**Returns:** The node's class name in lowercase

---

### `ast_children(node: AST) -> Iterator[AST]`

Yields all direct children of an AST node and automatically sets parent references.

```python
# Example: Get all children of a node
for child in ast_children(some_node):
    print(ast_kind(child))
```

**Parameters:**
- `node`: The parent AST node

**Yields:** Child AST nodes

**Important Notes:**
- Automatically sets the `parent` attribute on each child node
- Handles both single AST nodes and lists of AST nodes
- Skips fields that don't exist or aren't AST nodes

---

### Sibling Navigation Functions

#### `ast_previous_siblings(node: AST) -> Iterator[AST]`
Returns previous siblings starting from the closest one.

#### `ast_next_siblings(node: AST) -> Iterator[AST]`
Returns next siblings starting from the closest one.

#### `ast_siblings(node: AST) -> Iterator[AST]`
Returns all siblings of the node (excluding the node itself).

**Parameters:**
- `node`: The AST node whose siblings to find

**Yields:** Sibling AST nodes

---

### Single Node Access Functions

#### `ast_previous(node: AST) -> AST`
Returns the immediately previous sibling.

#### `ast_next(node: AST) -> AST`
Returns the immediately next sibling.

#### `ast_first_child(node: AST) -> AST`
Returns the first child of the node.

#### `ast_last_child(node: AST) -> AST`
Returns the last child of the node.

**Parameters:**
- `node`: The AST node to navigate from

**Returns:** The requested AST node

**Raises:** `LastNodeError` when the requested node doesn't exist

## Exception Handling

The module uses `LastNodeError` from `_griffe.exceptions` to handle cases where navigation fails:

- When trying to get previous/next siblings that don't exist
- When trying to access children of nodes that have no children
- When attempting navigation operations on nodes without the required relationships

## Usage Notes

### Important Considerations

- **Parent References**: The `ast_children()` function automatically sets parent references, which is crucial for sibling navigation functions to work properly
- **Memory Usage**: Be aware that setting parent references creates circular references in the AST
- **Error Handling**: Always handle `LastNodeError` exceptions when using single-node access functions

### Best Practices

- Use iterator functions (`ast_children`, `ast_siblings`, etc.) when you need to process multiple nodes
- Use single-node functions (`ast_first_child`, `ast_next`, etc.) when you need specific nodes and are sure they exist
- Wrap single-node access in try-catch blocks to handle edge cases gracefully

```python
# Safe navigation example
try:
    next_node = ast_next(current_node)
    # Process next_node
except LastNodeError:
    # Handle case where there's no next sibling
    pass
```

## Dependencies

- `ast`: Python's built-in Abstract Syntax Tree module
- `_griffe.exceptions`: For `LastNodeError` exception handling
- `typing`: For type hints and annotations