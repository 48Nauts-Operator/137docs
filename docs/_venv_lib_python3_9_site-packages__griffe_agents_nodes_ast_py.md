<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# AST Navigation Utilities

This module provides utilities for navigating Abstract Syntax Tree (AST) nodes in Python. It extends the functionality of Python's built-in `ast` module by offering convenient functions to traverse AST structures, including finding siblings, children, and retrieving node information.

## Purpose

The module is designed to help developers work with Python AST nodes by providing:
- Easy navigation between parent, child, and sibling nodes
- Helper functions to identify node types
- Robust error handling for edge cases in AST traversal

## Key Features

- **Node Type Identification**: Get the type/kind of any AST node
- **Child Navigation**: Iterate through child nodes with automatic parent assignment
- **Sibling Navigation**: Navigate between sibling nodes (previous, next, or all siblings)
- **Parent-Child Relationships**: Automatically maintains parent references when traversing children

## Functions

### Node Information

#### `ast_kind(node: AST) -> str`
Returns the kind/type of an AST node as a lowercase string.

```python
import ast
node = ast.parse("x = 1").body[0]
print(ast_kind(node))  # Output: "assign"
```

### Child Navigation

#### `ast_children(node: AST) -> Iterator[AST]`
Yields all direct children of an AST node. **Important**: This function automatically sets the `parent` attribute on child nodes.

```python
for child in ast_children(node):
    print(ast_kind(child))
```

#### `ast_first_child(node: AST) -> AST`
Returns the first child of a node.

- **Raises**: `LastNodeError` if the node has no children

#### `ast_last_child(node: AST) -> AST`
Returns the last child of a node.

- **Raises**: `LastNodeError` if the node has no children

### Sibling Navigation

#### `ast_previous_siblings(node: AST) -> Iterator[AST]`
Yields all previous siblings of a node, starting from the closest.

#### `ast_next_siblings(node: AST) -> Iterator[AST]`
Yields all next siblings of a node, starting from the closest.

#### `ast_siblings(node: AST) -> Iterator[AST]`
Yields all siblings of a node (both previous and next).

#### `ast_previous(node: AST) -> AST`
Returns the immediately previous sibling.

- **Raises**: `LastNodeError` if no previous sibling exists

#### `ast_next(node: AST) -> AST`
Returns the immediately next sibling.

- **Raises**: `LastNodeError` if no next sibling exists

## Dependencies

- `ast`: Python's built-in Abstract Syntax Tree module
- `_griffe.exceptions.LastNodeError`: Custom exception for navigation edge cases

## Important Notes

### ⚠️ Parent Attribute Assignment
The `ast_children()` function dynamically adds a `parent` attribute to child nodes. This modifies the AST nodes in place, which may have implications if you're working with shared AST structures.

### Error Handling
Most navigation functions that return single nodes raise `LastNodeError` when the requested node doesn't exist (e.g., asking for the next sibling of the last child). Always handle these exceptions appropriately:

```python
try:
    next_node = ast_next(current_node)
except LastNodeError:
    # Handle case where there's no next sibling
    pass
```

### Type Checking
The module uses `TYPE_CHECKING` imports for better type hints without runtime overhead.

## Usage Example

```python
import ast
from ast_navigation import ast_children, ast_kind, ast_next

# Parse some Python code
tree = ast.parse("x = 1\ny = 2\nz = 3")

# Get the first statement
first_stmt = tree.body[0]
print(f"First statement type: {ast_kind(first_stmt)}")

# Navigate to next statement
try:
    second_stmt = ast_next(first_stmt)
    print(f"Second statement type: {ast_kind(second_stmt)}")
except LastNodeError:
    print("No next statement found")
```

This module is particularly useful for static analysis tools, code transformers, and any application that needs to traverse Python AST structures programmatically.