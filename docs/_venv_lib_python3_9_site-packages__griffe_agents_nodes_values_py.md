<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Attribute Value Extraction Utilities

## Overview

This module provides utilities for extracting and converting Python AST (Abstract Syntax Tree) node values into their string representations. It is part of the `_griffe` package and serves as a helper module for processing Python code structures.

## Purpose

The primary purpose of this module is to:
- Convert AST nodes back to their original Python code representation
- Provide safe error handling when node conversion fails
- Support debugging and logging with optional file path information

## Functions

### `get_value(node)`

Converts an AST node to its string representation using Python's built-in `ast.unparse()` function.

**Parameters:**
- `node` (`ast.AST | None`): The AST node to convert to string

**Returns:**
- `str | None`: The Python code representation of the node, or `None` if the input node is `None`

**Example Usage:**
```python
import ast
from your_module import get_value

# Parse some Python code
code = "x = 42"
tree = ast.parse(code)
assignment = tree.body[0]

# Get string representation
result = get_value(assignment)
print(result)  # Output: "x = 42"
```

### `safe_get_value(node, filepath)`

A wrapper around `get_value()` that provides exception handling and logging for failed conversions.

**Parameters:**
- `node` (`ast.AST | None`): The AST node to convert to string
- `filepath` (`str | Path | None`, optional): Path to the source file for better error reporting

**Returns:**
- `str | None`: The Python code representation of the node, or `None` if conversion fails

**Features:**
- ✅ Exception-safe: Never raises exceptions
- ✅ Detailed error logging with file location information
- ✅ Graceful fallback to `None` on errors

**Example Usage:**
```python
from pathlib import Path
from your_module import safe_get_value

# Safely convert a potentially problematic node
result = safe_get_value(some_ast_node, filepath=Path("example.py"))
if result is None:
    print("Failed to convert node - check logs for details")
```

## Dependencies

- **`ast`**: Python's Abstract Syntax Tree module for parsing and unparsing code
- **`typing`**: Type hints support
- **`_griffe.logger`**: Internal logging functionality

## Notes and Suggestions

### Usage Recommendations

- **Use `safe_get_value()` for production code** where you need robust error handling
- **Use `get_value()` only when you're certain the node is valid** and want exceptions to propagate
- **Always provide `filepath` parameter** when using `safe_get_value()` for better debugging

### Error Handling

The `safe_get_value()` function logs detailed error information including:
- The problematic node object
- File path and line number (when available)
- The specific exception that occurred

### Type Safety

This module uses modern Python type hints with proper handling of:
- Union types (`ast.AST | None`)
- TYPE_CHECKING imports to avoid circular dependencies
- Optional parameters with default values

### Performance Considerations

- The `ast.unparse()` function can be expensive for large AST trees
- Consider caching results if you need to convert the same nodes repeatedly
- The exception handling in `safe_get_value()` adds minimal overhead in the success case