<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Griffe Debug Information Module

## Overview

This module provides functionality to collect and display environment information for bug reporting purposes in the Griffe project. It's designed to help users and developers gather relevant system details when reporting issues or debugging problems.

## Purpose

The module serves as a diagnostic tool that:
- Collects system and Python environment information
- Displays package versions and environment variables
- Can be invoked via `python -m griffe.debug` or the `--debug-info` CLI flag
- Assists in bug reporting by providing standardized environment details

## Data Classes

### `_Variable`
Represents an environment variable with its name and value.

**Attributes:**
- `name` (str): The environment variable name
- `value` (str): The environment variable value

### `_Package`
Represents a Python package with version information.

**Attributes:**
- `name` (str): The package name
- `version` (str): The package version

### `_Environment`
Stores comprehensive environment information for debugging.

**Attributes:**
- `interpreter_name` (str): Python interpreter name (e.g., "cpython", "pypy")
- `interpreter_version` (str): Python interpreter version
- `interpreter_path` (str): Full path to the Python executable
- `platform` (str): Operating system information
- `packages` (list[_Package]): List of installed packages
- `variables` (list[_Variable]): List of relevant environment variables

## Key Functions

### `_interpreter_name_version() -> tuple[str, str]`
Extracts Python interpreter name and version information.

**Returns:**
- Tuple containing interpreter name and version string
- Falls back to `("", "0.0.0")` if information is unavailable

### `_get_version(dist: str = "griffe") -> str`
Retrieves the version of a specified Python distribution.

**Parameters:**
- `dist`: Distribution name (defaults to "griffe")

**Returns:**
- Version string or "0.0.0" if package not found

**Example:**
```python
version = _get_version("griffe")  # Gets griffe package version
```

### `_get_debug_info() -> _Environment`
Collects comprehensive environment information for debugging.

**Returns:**
- `_Environment` object containing all relevant system information

**Collected Information:**
- Python interpreter details
- System platform
- Griffe-related environment variables (those starting with "GRIFFE")
- PYTHONPATH environment variable
- Griffe package version

### `_print_debug_info() -> None`
Prints formatted debug information to stdout.

**Output Format:**
```
- __System__: [platform information]
- __Python__: [interpreter] [version] ([path])
- __Environment variables__:
  - `VARIABLE_NAME`: `value`
- __Installed packages__:
  - `package` v[version]
```

## Usage Examples

### Direct Function Call
```python
from griffe._internal.debug import _print_debug_info
_print_debug_info()
```

### Command Line Usage
```bash
# Via debug module
python -m griffe.debug

# Via CLI flag
griffe --debug-info [other-args]
```

## Notes and Suggestions

### Security Considerations
- **Environment Variable Exposure**: The module prints environment variables that start with "GRIFFE" and PYTHONPATH. Ensure these don't contain sensitive information before sharing debug output.

### Extensibility
- The `packages` list in `_get_debug_info()` currently only includes "griffe". Consider making this configurable or expanding it to include common dependencies.
- The environment variable filtering could be made more flexible to include other relevant variables.

### Error Handling
- The module gracefully handles missing packages by returning "0.0.0" as a fallback version.
- Consider adding error handling for cases where system information might be unavailable.

### Improvements
- Add timestamp information to debug output
- Include more detailed system information (e.g., architecture, available memory)
- Consider adding options to exclude sensitive information

## Dependencies

- `os`: Environment variable access
- `platform`: System information
- `sys`: Python interpreter details
- `dataclasses`: Data structure definitions
- `importlib.metadata`: Package version information