<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Numpy Docstring Parser

This module provides functionality to parse Numpy-style docstrings into structured data. It's designed to convert docstrings following the Numpydoc format into organized sections that can be processed programmatically.

## Overview

The parser processes docstrings according to the [Numpydoc specification](https://numpydoc.readthedocs.io/en/latest/format.html), which is a superset of reStructuredText (RST). However, this implementation focuses on Python-specific features and excludes some sections deemed less useful:

### Excluded Sections
- **See Also**: Too subjective and specific to Numpy
- **Warnings, Notes, References**: Handled as general markup rather than special sections

## Key Functions

### `parse_numpy()`

The main entry point for parsing Numpy-style docstrings.

```python
def parse_numpy(
    docstring: Docstring,
    *,
    ignore_init_summary: bool = False,
    trim_doctest_flags: bool = True,
    warn_unknown_params: bool = True,
    warnings: bool = True,
    **options: Any,
) -> list[DocstringSection]:
```

**Parameters:**
- `docstring`: The docstring object to parse
- `ignore_init_summary`: Skip summary in `__init__` method docstrings
- `trim_doctest_flags`: Remove doctest flags from Python examples
- `warn_unknown_params`: Warn about documented parameters not in function signature
- `warnings`: Enable/disable warning messages

**Returns:** List of parsed docstring sections

## Supported Section Types

The parser recognizes and processes these docstring sections:

- **Parameters**: Function/method parameters with types and descriptions
- **Other Parameters**: Additional parameters (e.g., keyword arguments)
- **Returns**: Return values with optional names and types
- **Yields**: Generator yield values
- **Receives**: Values received by generators
- **Raises**: Exceptions that may be raised
- **Warns**: Warnings that may be issued
- **Examples**: Code examples and doctests
- **Attributes**: Class attributes
- **Functions/Methods**: Function/method listings
- **Classes**: Class listings
- **Modules**: Module listings
- **Deprecated**: Deprecation information

## Internal Structure

### Section Readers

Each section type has a dedicated reader function:

```python
_section_reader = {
    DocstringSectionKind.parameters: _read_parameters_section,
    DocstringSectionKind.returns: _read_returns_section,
    DocstringSectionKind.examples: _read_examples_section,
    # ... etc
}
```

### Regular Expressions

The parser uses regex patterns to identify and parse different elements:

- `_RE_PARAMETER`: Matches parameter definitions
- `_RE_RETURNS`: Matches return value definitions  
- `_RE_DOCTEST_FLAGS`: Identifies doctest flags for removal

### Block Processing

Two main block processing functions handle content:

- `_read_block_items()`: Reads structured items with names/types
- `_read_block()`: Reads free-form text blocks

## Usage Example

```python
from griffe.docstrings.numpy import parse_numpy

# Parse a docstring
sections = parse_numpy(
    docstring_obj,
    trim_doctest_flags=True,
    warn_unknown_params=True
)

# Process the sections
for section in sections:
    if isinstance(section, DocstringSectionParameters):
        for param in section.value:
            print(f"Parameter: {param.name} - {param.description}")
```

## Notes and Considerations

### Indentation Handling
- Continuation lines should use 4-space indentation
- The parser warns about inconsistent indentation but attempts to handle it gracefully

### Type Annotation Resolution
- Attempts to resolve type annotations from function signatures when not explicitly documented
- Falls back to parsing string annotations when signature info is unavailable

### Warning System
- Comprehensive warning system for malformed docstrings
- Warnings can be disabled via the `warnings` parameter
- Includes checks for unknown parameters, empty sections, and parsing errors

### Code Block Support
- Handles markdown-style code blocks (````) 
- Processes doctest examples with proper formatting
- Can trim doctest flags for cleaner output

## Dependencies

This module relies on several internal components:
- `_griffe.docstrings.models`: Docstring section data models
- `_griffe.docstrings.utils`: Utility functions for parsing
- `_griffe.expressions`: Expression handling for type annotations

The parser integrates with the broader Griffe documentation extraction system and is designed to work seamlessly with Python code analysis workflows.