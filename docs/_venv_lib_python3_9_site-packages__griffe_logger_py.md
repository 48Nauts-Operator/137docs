<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Griffe Logger Module

## Overview

This module provides a custom logging wrapper for the Griffe library. It implements a `Logger` class that wraps Python's standard logging functionality to enable easy patching by downstream libraries like `mkdocstrings-python`.

## Purpose

- **Flexible Logger Management**: Allows downstream libraries to patch and customize logging behavior
- **Centralized Logging**: Provides a single global logger for the main Griffe API
- **Extension Support**: Enables extensions to create their own isolated loggers
- **Third-party Integration**: Facilitates integration with frameworks like MkDocs

## Key Classes

### `Logger`

A wrapper class around Python's standard logger that enables easy patching and customization.

#### Class Attributes
- `_default_logger`: Class variable storing the default logger factory function
- `_instances`: Class variable maintaining a registry of all Logger instances

#### Key Methods

##### `__init__(self, name: str)`
Initializes a new Logger instance with the specified name.

##### `__getattr__(self, name: str)`
Forwards all attribute access to the underlying logger instance, maintaining transparent compatibility with standard Python logging.

##### `disable(self)`
```python
@contextmanager
def disable(self) -> Iterator[None]:
```
Context manager that temporarily disables logging by setting the log level to 100.

**Usage:**
```python
with logger.disable():
    # Logging is disabled in this block
    logger.info("This won't be logged")
```

##### `_get(cls, name: str = "griffe")` (Class Method)
Factory method that implements the singleton pattern for logger instances. Returns existing instances or creates new ones as needed.

##### `_patch_loggers(cls, get_logger_func: Callable)` (Class Method)
Patches all existing logger instances and sets up future instances to use a custom logger factory function.

## Key Functions

### `get_logger(name: str = "griffe") -> Logger`

Creates and returns a logger instance with the specified name.

**Parameters:**
- `name`: The logger name (defaults to "griffe")

**Returns:**
- A `Logger` instance

### `patch_loggers(get_logger_func: Callable[[str], Any]) -> None`

Patches all Griffe loggers to use a custom logger factory function.

**Parameters:**
- `get_logger_func`: A function that accepts a name parameter and returns a logger

## Global Logger Instance

The module provides a global logger instance:

```python
logger: Logger = Logger._get()
```

This is the primary logger used throughout the Griffe library.

## Usage Examples

### Basic Usage
```python
from griffe.logger import logger

logger.info("This is an info message")
logger.error("This is an error message")
```

### Creating Custom Loggers
```python
from griffe.logger import get_logger

my_logger = get_logger("my_extension")
my_logger.debug("Debug message from my extension")
```

### Patching Loggers (MkDocs Integration Example)
```python
import logging
from griffe import patch_loggers

class LoggerAdapter(logging.LoggerAdapter):
    def __init__(self, prefix, logger):
        super().__init__(logger, {})
        self.prefix = prefix

    def process(self, msg, kwargs):
        return f"{self.prefix}: {msg}", kwargs

def get_logger(name):
    logger = logging.getLogger(f"mkdocs.plugins.{name}")
    return LoggerAdapter(name, logger)

patch_loggers(get_logger)
```

### Temporarily Disabling Logging
```python
from griffe.logger import logger

with logger.disable():
    # All logging is suppressed in this block
    potentially_noisy_operation()
```

## Design Notes

- **Singleton Pattern**: Each logger name gets exactly one `Logger` instance
- **Transparent Proxy**: The `__getattr__` method ensures full compatibility with Python's standard logging interface
- **Patchable Design**: The architecture allows downstream libraries to completely replace the logging implementation
- **Thread Safety**: Consider thread safety implications when using in multi-threaded environments

## Recommendations

- Use the global `logger` for general Griffe library logging
- Create separate loggers for extensions using `get_logger()`
- Patch loggers early in your application lifecycle if needed
- Use the `disable()` context manager sparingly, as it affects all logging for that logger instance