<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# babel.core Module Documentation

## Overview

The `babel.core` module provides core functionality for locale representation and locale data access in the Babel internationalization library. It serves as the foundation for working with locales, handling locale identification, parsing, negotiation, and providing access to comprehensive locale-specific data.

## Purpose

This module enables applications to:
- Create and manipulate locale objects representing specific languages, territories, scripts, and variants
- Parse and format locale identifiers according to RFC standards
- Access locale-specific data such as number formats, date/time patterns, currency information, and translated names
- Negotiate the best locale match between user preferences and available locales
- Handle locale aliases and fallbacks

## Key Components

### Classes

#### `Locale`

The primary class for representing a specific locale with comprehensive locale data access.

**Constructor:**
```python
Locale(language, territory=None, script=None, variant=None, modifier=None)
```

**Key Methods:**
- `Locale.parse(identifier, sep='_', resolve_likely_subtags=True)` - Create a Locale from a string identifier
- `Locale.default(category=None, aliases=LOCALE_ALIASES)` - Get the system default locale
- `Locale.negotiate(preferred, available, sep='_', aliases=LOCALE_ALIASES)` - Find best locale match
- `get_display_name(locale=None)` - Get localized display name
- `get_language_name(locale=None)` - Get localized language name
- `get_territory_name(locale=None)` - Get localized territory name

**Usage Examples:**
```python
# Create locale from components
locale = Locale('en', 'US')

# Parse from string
locale = Locale.parse('en-US', sep='-')

# Get display information
print(locale.display_name)  # "English (United States)"
print(locale.get_display_name('de'))  # German translation
```

#### `UnknownLocaleError`

Exception raised when requesting a locale for which no data is available.

```python
try:
    locale = Locale.parse('xx_XX')
except UnknownLocaleError as e:
    print(f"Locale not found: {e.identifier}")
```

### Functions

#### `get_global(key)`

Retrieves global locale data independent of specific locales.

**Available Keys:**
- `all_currencies` - All currency information
- `currency_fractions` - Currency decimal place information  
- `language_aliases` - Language code aliases
- `likely_subtags` - Locale expansion rules
- `territory_aliases` - Territory code aliases
- `zone_aliases` - Timezone aliases
- And more...

```python
# Get timezone aliases
aliases = get_global('zone_aliases')
utc_alias = aliases['UTC']  # 'Etc/UTC'
```

#### `parse_locale(identifier, sep='_')`

Parses a locale identifier string into components.

```python
# Returns (language, territory, script, variant) or with modifier
parts = parse_locale('zh_Hans_CN')  # ('zh', 'CN', 'Hans', None)
parts_with_modifier = parse_locale('de_DE@euro')  # ('de', 'DE', None, None, 'euro')
```

#### `get_locale_identifier(tup, sep='_')`

Creates a locale identifier from a tuple of components.

```python
identifier = get_locale_identifier(('de', 'DE', None, '1999', 'custom'))
# Returns: 'de_DE_1999@custom'
```

#### `negotiate_locale(preferred, available, sep='_', aliases=LOCALE_ALIASES)`

Finds the best match between preferred and available locales.

```python
best_match = negotiate_locale(
    preferred=['de_DE', 'en_US'], 
    available=['de_DE', 'de_AT', 'en']
)
# Returns: 'de_DE'
```

#### `default_locale(category=None, aliases=LOCALE_ALIASES)`

Gets the system default locale from environment variables.

```python
system_locale = default_locale('LC_MESSAGES')
```

## Important Properties of Locale Objects

### Display and Formatting Data

- `display_name` - Localized full locale name
- `language_name` - Localized language name  
- `territory_name` - Localized territory name
- `currencies` - Currency name translations
- `currency_symbols` - Currency symbols
- `languages` - Language name translations
- `territories` - Territory name translations

### Number Formatting

- `number_symbols` - Number formatting symbols by numbering system
- `decimal_formats` - Decimal number patterns
- `currency_formats` - Currency formatting patterns  
- `percent_formats` - Percentage formatting patterns
- `compact_decimal_formats` - Compact number formats (e.g., "1K", "1M")

### Date and Time

- `date_formats` - Date formatting patterns
- `time_formats` - Time formatting patterns
- `datetime_formats` - Combined datetime patterns
- `days` - Weekday names
- `months` - Month names
- `time_zones` - Timezone display names
- `first_week_day` - First day of week (0=Monday)

### Text and Cultural Data

- `character_order` - Text direction ('left-to-right' or 'right-to-left')
- `text_direction` - CSS text direction ('ltr' or 'rtl')  
- `plural_form` - Plural rule function
- `ordinal_form` - Ordinal number rule function

## Usage Notes and Suggestions

### Performance Considerations

- Locale data is loaded lazily when first accessed
- Global data is cached after first load
- Consider reusing Locale objects rather than repeatedly parsing strings

### Error Handling

Always handle `UnknownLocaleError` when working with user-provided locale identifiers:

```python
try:
    user_locale = Locale.parse(user_input)
except UnknownLocaleError:
    user_locale = Locale.parse('en_US')  # fallback
```

### Locale Negotiation

Use locale negotiation for web applications to match user preferences:

```python
# Browser Accept-Language: de-DE,de;q=