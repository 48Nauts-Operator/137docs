<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# babel.lists Module

This module provides locale-dependent formatting of lists in Python, allowing you to format sequences of items according to language-specific conventions.

## Purpose

The `babel.lists` module formats lists of items (like words or phrases) according to locale-specific rules. For example:
- English: "apples, oranges, and pears"
- Chinese: "apples、oranges和pears"
- Finnish (or-style): "omena, peruna tai aplari"

## Environment Variables

The default locale is determined by these environment variables (in order of precedence):
- `LC_ALL`
- `LANG`

## Main Functions

### `format_list()`

The primary function for formatting lists according to locale conventions.

```python
def format_list(
    lst: Sequence[str],
    style: Literal['standard', 'standard-short', 'or', 'or-short', 'unit', 'unit-short', 'unit-narrow'] = 'standard',
    locale: Locale | str | None = None,
) -> str
```

#### Parameters

- **`lst`**: A sequence of string items to format into a list
- **`style`**: The formatting style to use (default: 'standard')
- **`locale`**: The locale to use for formatting (defaults to system locale)

#### Supported Styles

| Style | Description | Example |
|-------|-------------|---------|
| `standard` | Typical 'and' list for arbitrary placeholders | "January, February, and March" |
| `standard-short` | Short version of 'and' list | "Jan., Feb., and Mar." |
| `or` | Typical 'or' list for arbitrary placeholders | "January, February, or March" |
| `or-short` | Short version of 'or' list | "Jan., Feb., or Mar." |
| `unit` | List suitable for wide units | "3 feet, 7 inches" |
| `unit-short` | List suitable for short units | "3 ft, 7 in" |
| `unit-narrow` | List for narrow units (limited space) | "3′ 7″" |

#### Examples

```python
from babel.lists import format_list

# Basic usage
format_list(['apples', 'oranges', 'pears'], locale='en')
# Output: 'apples, oranges, and pears'

# Chinese locale
format_list(['apples', 'oranges', 'pears'], locale='zh')
# Output: 'apples、oranges和pears'

# Using 'or' style
format_list(['omena', 'peruna', 'aplari'], style='or', locale='fi')
# Output: 'omena, peruna tai aplari'
```

## Internal Functions

### `_resolve_list_style()`

Resolves the appropriate list formatting style for a given locale, with fallback support.

```python
def _resolve_list_style(locale: Locale, style: str)
```

This function implements a fallback mechanism based on CLDR (Common Locale Data Repository) specifications when a specific style isn't available for a locale.

## Style Fallback System

The module includes a fallback system for unsupported styles:

```python
_style_fallbacks = {
    "or-narrow": ["or-short", "or"],
    "or-short": ["or"],
    "standard-narrow": ["standard-short", "standard"],
    "standard-short": ["standard"],
    "unit": ["unit-short", "standard"],
    "unit-narrow": ["unit-short", "unit", "standard"],
    "unit-short": ["standard"],
}
```

## Deprecation Notice

⚠️ **Warning**: The `DEFAULT_LOCALE` constant is deprecated and will be removed in version 3.0.

## Error Handling

- Returns empty string for empty lists
- Returns single item for single-item lists
- Raises `ValueError` if no suitable formatting style can be found for the locale

## Notes and Suggestions

### Best Practices

1. **Always specify locale**: While the function can use system defaults, explicitly specifying the locale makes your code more predictable.

2. **Handle edge cases**: The function gracefully handles empty lists and single-item lists, but consider your application's specific needs.

3. **Style availability**: Not all styles are available in all locales. The fallback system helps, but test with your target locales.

### Usage Recommendations

```python
# Good: Explicit locale
format_list(items, locale='en_US')

# Better: Handle potential errors
try:
    formatted = format_list(items, style='unit-narrow', locale='en')
except ValueError as e:
    # Handle unsupported style/locale combination
    formatted = format_list(items, locale='en')  # Use default style
```

### Performance Considerations

- The function processes lists sequentially for items beyond the first two
- For very large lists, consider whether list formatting is the appropriate display method

## Dependencies

- `babel.core.Locale`: For locale parsing and data access
- `babel.core.default_locale`: For default locale determination
- Standard library modules: `warnings`, `collections.abc`, `typing`