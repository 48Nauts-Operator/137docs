<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# babel.messages.frontend

This module provides frontends for Babel's message extraction functionality, including command-line interfaces and distutils/setuptools commands for internationalization (i18n) tasks.

## Purpose

The module serves as the main entry point for Babel's message catalog management tools, providing:

- **Command-line interface** for extracting, compiling, initializing, and updating message catalogs
- **Distutils/setuptools integration** for build system compatibility
- **Configuration file parsing** for extraction mappings
- **Utility functions** for keyword and mapping configuration

## Main Classes

### CommandMixin

Base class that provides compatibility between distutils commands and optparse option parsing.

**Key Features:**
- Option validation and finalization
- Boolean and multiple-value option support
- Option aliases for command-line compatibility

### CompileCatalog

Compiles message catalogs from PO files to binary MO files.

**Usage:**
```bash
pybabel compile -d locales -D messages
```

**Key Options:**
- `--domain/-D`: Domain of PO files (default: 'messages')
- `--directory/-d`: Base directory containing catalogs
- `--locale/-l`: Specific locale to compile
- `--use-fuzzy/-f`: Include fuzzy translations
- `--statistics`: Show translation statistics

### ExtractMessages

Extracts localizable strings from source code and generates POT template files.

**Usage:**
```bash
pybabel extract -o messages.pot myproject/
```

**Key Options:**
- `--output-file/-o`: Output POT file path
- `--keywords/-k`: Additional keywords to extract
- `--mapping-file/-F`: Extraction mapping configuration
- `--add-comments/-c`: Include translator comments
- `--ignore-dirs`: Patterns for directories to ignore

**Example:**
```python
# Configuration in setup.cfg or pyproject.toml
[babel.extractors]
custom = myproject.extractors:extract_custom

[babel.mappings]
pattern = "**.py"
method = "python"

pattern = "**.html"
method = "custom"
```

### InitCatalog

Creates new message catalogs from POT template files.

**Usage:**
```bash
pybabel init -l es -i messages.pot -d locales
```

**Key Options:**
- `--locale/-l`: Target locale for new catalog
- `--input-file/-i`: POT template file
- `--output-dir/-d`: Output directory structure

### UpdateCatalog

Updates existing message catalogs from updated POT template files.

**Usage:**
```bash
pybabel update -l es -i messages.pot -d locales
```

**Key Options:**
- `--init-missing`: Create missing catalog files
- `--no-fuzzy-matching`: Disable fuzzy matching
- `--previous`: Keep previous msgids for translated messages
- `--check`: Check if catalogs are up-to-date without updating

### CommandLineInterface

Main command-line interface that orchestrates all catalog management commands.

**Usage:**
```bash
pybabel <command> [options] [args]
```

**Available Commands:**
- `compile`: Compile catalogs to MO files
- `extract`: Extract messages and generate POT files  
- `init`: Create new catalogs from POT files
- `update`: Update existing catalogs from POT files

## Important Functions

### listify_value(arg, split=None)

Converts various input formats into a flat list of strings.

```python
>>> listify_value("foo bar")
['foo', 'bar']
>>> listify_value(["foo,bar", "baz"], ",")
['foo', 'bar', 'baz']
```

### parse_keywords(strings)

Parses GNU gettext-style keyword specifications.

```python
>>> parse_keywords(['_', 'ngettext:1,2', 'pgettext:1c,2'])
{'_': None, 'ngettext': (1, 2), 'pgettext': ((1, 'c'), 2)}
```

### parse_mapping_cfg(fileobj, filename=None)

Parses extraction method mappings from INI-style configuration files.

**Example Configuration:**
```ini
[extractors]
custom = myproject.extractors:extract_custom

[python: **.py]

[custom: **/templates/**.html]
silent = false
```

## Configuration Files

### Setup.cfg Style
```ini
[babel.extractors]
custom = myproject.extractors:extract_custom

[babel.mappings]
# Python files
[python: **.py]

# Custom extractor for templates  
[custom: **/templates/**.html]
silent = false
```

### TOML Style (pyproject.toml)
```toml
[tool.babel.extractors]
custom = "myproject.extractors:extract_custom"

[[tool.babel.mappings]]
pattern = "**.py"
method = "python"

[[tool.babel.mappings]]
pattern = "**/templates/**.html" 
method = "custom"
silent = false
```

## Error Classes

- **BaseError**: Base exception class
- **OptionError**: Invalid command-line options
- **SetupError**: Setup/configuration errors  
- **ConfigurationError**: Configuration file parsing errors

## Usage Notes

### Integration with Build Systems

The module provides backward-compatible exports for setuptools integration:

```python
# These are re-exported from babel.messages.setuptools_frontend
from babel.messages.frontend import extract_messages, compile_catalog
```

### Keyword Extraction

Use the `t` modifier to specify the number of arguments for polymorphic functions:

```bash
pybabel extract --keyword="ngettext:1,2" --keyword="npgettext:1c,2,3"
```

### Directory Filtering

Ignore common directories during extraction:

```bash
pybabel extract --ignore-dirs=".git __pycache__ node_modules" src/
```

### Locale Management

List all available locales:

```bash
pybabel --list-locales
```

## Best Practices

1. **Use mapping files** for complex projects with multiple file types
2. **Include translator comments** with `--add-comments` for context
3. **Set up proper ignore patterns** to avoid extracting from generated files