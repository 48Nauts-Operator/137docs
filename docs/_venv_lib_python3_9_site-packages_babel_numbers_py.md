<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# babel.numbers Documentation

## Overview

The `babel.numbers` module provides locale-dependent formatting and parsing of numeric data, including regular numbers, currencies, percentages, and scientific notation. It supports various numbering systems and follows Unicode CLDR (Common Locale Data Repository) standards for internationalization.

## Purpose

This module enables developers to:
- Format numbers according to locale-specific conventions
- Parse locale-formatted number strings back to numeric values
- Handle currency formatting with proper symbols and precision
- Work with compact number formats (e.g., "12K", "1.2M")
- Support different numbering systems (Latin, Arabic, etc.)

## Environment Variables

The module determines default locales from these environment variables (in order):
- `LC_MONETARY` - for currency-related functions
- `LC_NUMERIC` - for general numeric formatting
- `LC_ALL` - fallback locale setting
- `LANG` - system language setting

## Key Classes

### `NumberPattern`

Represents a parsed number format pattern that can be applied to format numbers.

```python
class NumberPattern:
    def __init__(self, pattern, prefix, suffix, grouping, int_prec, frac_prec, exp_prec, exp_plus, number_pattern=None)
    def apply(self, value, locale, currency=None, currency_digits=True, ...)
```

**Key Methods:**
- `apply()` - Formats a number according to the pattern
- `compute_scale()` - Determines scaling factor for percentages (×100) or per-mille (×1000)

### Exception Classes

#### `UnknownCurrencyError`
Raised when requesting data for an unsupported currency.

#### `NumberFormatError` 
Raised when a string cannot be parsed into a number.

#### `UnsupportedNumberingSystemError`
Raised when an unsupported numbering system is requested.

## Core Functions

### Currency Functions

#### `get_currency_name(currency, count=None, locale=None)`
```python
>>> get_currency_name('USD', locale='en_US')
'US Dollar'
```

#### `get_currency_symbol(currency, locale=None)`
```python
>>> get_currency_symbol('USD', locale='en_US')
'$'
```

#### `format_currency(number, currency, format=None, locale=None, ...)`
```python
>>> format_currency(1099.98, 'USD', locale='en_US')
'$1,099.98'
>>> format_currency(1099.98, 'EUR', locale='de_DE')
'1.099,98 €'
```

### Number Formatting Functions

#### `format_decimal(number, format=None, locale=None, ...)`
```python
>>> format_decimal(1.2345, locale='en_US')
'1.234'
>>> format_decimal(12345.5, locale='de_DE')
'12.345,5'
```

#### `format_percent(number, format=None, locale=None, ...)`
```python
>>> format_percent(0.34, locale='en_US')
'34%'
```

#### `format_scientific(number, format=None, locale=None, ...)`
```python
>>> format_scientific(10000, locale='en_US')
'1E4'
```

#### `format_compact_decimal(number, format_type="short", locale=None, ...)`
```python
>>> format_compact_decimal(12345, format_type="short", locale='en_US')
'12K'
>>> format_compact_decimal(12345, format_type="long", locale='en_US')
'12 thousand'
```

### Number Parsing Functions

#### `parse_decimal(string, locale=None, strict=False, ...)`
```python
>>> parse_decimal('1,099.98', locale='en_US')
Decimal('1099.98')
>>> parse_decimal('1.099,98', locale='de')
Decimal('1099.98')
```

#### `parse_number(string, locale=None, ...)`
```python
>>> parse_number('1,099', locale='en_US')
1099
```

### Symbol Retrieval Functions

#### `get_decimal_symbol(locale=None, numbering_system="latn")`
```python
>>> get_decimal_symbol('en_US')
'.'
>>> get_decimal_symbol('de_DE')
','
```

#### `get_group_symbol(locale=None, numbering_system="latn")`
```python
>>> get_group_symbol('en_US')
','
>>> get_group_symbol('de_DE')
'.'
```

## Important Parameters

### `numbering_system`
- Controls which numbering system to use for symbols
- `"latn"` (default) - Uses Latin digits (0-9)
- `"default"` - Uses locale's default numbering system
- Other systems like `"arab"` for Arabic-Indic digits

### `decimal_quantization` 
- When `True` (default), rounds numbers to pattern precision
- When `False`, preserves original precision

### `group_separator`
- When `True` (default), includes thousands separators
- When `False`, omits grouping symbols

## Usage Examples

### Basic Number Formatting
```python
from babel.numbers import format_decimal, format_currency

# Format decimal numbers
format_decimal(1234.5, locale='en_US')  # '1,234.5'
format_decimal(1234.5, locale='de_DE')  # '1.234,5'

# Format currency
format_currency(99.99, 'USD', locale='en_US')  # '$99.99'
format_currency(99.99, 'EUR', locale='fr_FR')  # '99,99 €'
```

### Working with Different Numbering Systems
```python
# Arabic locale with different numbering systems
format_decimal(1234.5, locale='ar_EG', numbering_system='default')  # '1٬234٫5'
format_decimal(1234.5, locale='ar_EG', numbering_system='latn')     # '1,234.5'
```

### Parsing Numbers
```python
from babel.numbers import parse_decimal