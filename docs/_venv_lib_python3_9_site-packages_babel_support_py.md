<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# babel.support Module Documentation

## Overview

The `babel.support` module provides several classes and functions that help with integrating and using Babel in applications. This module is designed for application developers who want to use Babel's localization features in their projects.

> **Note**: The code in this module is not used by Babel itself - it's provided as a utility layer for applications.

## Classes

### Format

A wrapper class that provides various date and number formatting functions bound to a specific locale and time-zone.

#### Constructor

```python
Format(locale, tzinfo=None, *, numbering_system="latn")
```

**Parameters:**
- `locale`: The locale identifier (string) or `Locale` instance
- `tzinfo`: The time-zone info (`tzinfo` instance or `None`)
- `numbering_system`: The numbering system for formatting (defaults to "latn", use "default" for locale's default)

#### Methods

##### Date and Time Formatting

- **`date(date=None, format='medium')`**: Format a date according to the given pattern
- **`datetime(datetime=None, format='medium')`**: Format a date and time
- **`time(time=None, format='medium')`**: Format a time
- **`timedelta(delta, granularity="second", threshold=0.85, format="long", add_direction=False)`**: Format a time delta

##### Number Formatting

- **`number(number)`**: Format an integer number for the locale
- **`decimal(number, format=None)`**: Format a decimal number
- **`compact_decimal(number, format_type='short', fraction_digits=0)`**: Format numbers in compact form (e.g., "123M")
- **`currency(number, currency)`**: Format a number as currency
- **`compact_currency(number, currency, format_type='short', fraction_digits=0)`**: Format currency in compact form
- **`percent(number, format=None)`**: Format a number as percentage
- **`scientific(number)`**: Format a number using scientific notation

#### Example Usage

```python
from babel.support import Format
from babel.util import UTC
from datetime import date

fmt = Format('en_US', UTC)
print(fmt.date(date(2007, 4, 1)))  # 'Apr 1, 2007'
print(fmt.decimal(1.2345))         # '1.234'
print(fmt.percent(0.34))           # '34%'
```

### LazyProxy

A proxy class that delays the evaluation of an object until it's actually used. This is particularly useful for implementing lazy translation functions.

#### Constructor

```python
LazyProxy(func, *args, enable_cache=True, **kwargs)
```

**Parameters:**
- `func`: The function to call when the value is needed
- `*args`: Positional arguments to pass to the function
- `enable_cache`: Whether to cache the result after first evaluation
- `**kwargs`: Keyword arguments to pass to the function

#### Key Features

- **Lazy evaluation**: The function is only called when the value is actually needed
- **Transparent proxy**: Supports most Python operations (arithmetic, comparison, iteration, etc.)
- **Caching**: Can optionally cache the result to avoid repeated function calls
- **Copy support**: Implements `__copy__` and `__deepcopy__`

#### Example Usage

```python
def greeting(name='world'):
    return f'Hello, {name}!'

lazy_greeting = LazyProxy(greeting, name='Joe')
print(lazy_greeting)  # 'Hello, Joe!'
print('  ' + lazy_greeting)  # '  Hello, Joe!'
```

### NullTranslations

An extended version of `gettext.NullTranslations` that provides additional translation methods, including Babel-specific `*gettext` methods and context-aware translations.

#### Key Features

- **Domain support**: Methods like `dgettext()`, `dngettext()` for domain-specific translations
- **Context support**: `pgettext()`, `npgettext()` methods for context-aware translations
- **Fallback compatibility**: Works with gettext fallback mechanisms
- **Unicode support**: Provides `ugettext()`, `ungettext()` methods

#### Important Methods

- **`dgettext(domain, message)`**: Get text from specific domain
- **`pgettext(context, message)`**: Get text with context
- **`npgettext(context, singular, plural, num)`**: Get plural text with context
- **`dpgettext(domain, context, message)`**: Get text from domain with context

### Translations

The main translation catalog class that extends both `NullTranslations` and `gettext.GNUTranslations`.

#### Constructor

```python
Translations(fp=None, domain=None)
```

**Parameters:**
- `fp`: File-like object containing the translation data
- `domain`: Message domain (defaults to 'messages')

#### Key Methods

##### Class Methods

- **`load(dirname=None, locales=None, domain=None)`**: Load translations from directory

```python
translations = Translations.load(
    dirname='locale',
    locales=['en_US', 'en'],
    domain='messages'
)
```

##### Instance Methods

- **`add(translations, merge=True)`**: Add another translation catalog
- **`merge(translations)`**: Merge translations, overriding existing messages

#### Example Usage

```python
# Load translations
trans = Translations.load('locale', 'en_US', 'messages')

# Merge additional translations
extra_trans = Translations.load('locale', 'en_US', 'extra')
trans.add(extra_trans)

# Use translations
print(trans.gettext('Hello, world!'))
```

## Utility Functions

### _locales_to_names()

Internal utility function that normalizes locale specifications to a list of locale names.

## Usage Notes and Suggestions

### Best Practices

1. **Use Format for consistent formatting**: The `Format` class provides a convenient way to format numbers and dates consistently across your application.

2. **Leverage LazyProxy for performance**: Use `LazyProxy` when you need to defer expensive operations or when the locale might not be available immediately.

3. **Domain organization**: Use different domains to organize translations by feature or component.

4. **Fallback chains**: Set up proper fallback chains for translations to handle missing