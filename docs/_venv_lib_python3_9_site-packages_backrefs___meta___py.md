<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Meta Module Documentation

## Overview

This module provides version management functionality for Python packages, implementing a biased approach to **PEP 440** semantic versioning. It includes utilities for parsing, validating, and comparing version strings with support for development, pre-release, and post-release builds.

## Purpose

- Parse and validate version strings according to PEP 440 standards
- Provide comparable version objects for sorting and comparison operations
- Generate canonical version strings
- Determine development status for package setup files

## Key Components

### Version Class

The `Version` class is a namedtuple-based implementation that represents a semantic version with the following structure:

```python
Version(major, minor, micro, release, pre, post, dev)
```

#### Constructor Parameters

- **`major`** (int): Major version number
- **`minor`** (int): Minor version number  
- **`micro`** (int): Micro/patch version number
- **`release`** (str): Release type - one of: `"final"`, `"alpha"`, `"beta"`, `"candidate"`, `".dev"`, `".dev-alpha"`, `".dev-beta"`, `".dev-candidate"`
- **`pre`** (int): Pre-release number (default: 0)
- **`post`** (int): Post-release number (default: 0)
- **`dev`** (int): Development release number (default: 0)

#### Key Methods

- **`_is_pre()`**: Returns `True` if this is a pre-release version
- **`_is_dev()`**: Returns `True` if this is a development version
- **`_is_post()`**: Returns `True` if this is a post-release version
- **`_get_dev_status()`**: Returns development status string for setup files
- **`_get_canonical()`**: Returns the canonical PEP 440 version string

#### Example Usage

```python
# Final release
version = Version(1, 2, 3, "final")         # "1.2.3"

# Pre-release
version = Version(1, 2, 0, "alpha", pre=1)  # "1.2a1"

# Development release
version = Version(1, 2, 3, ".dev", dev=1)   # "1.2.3.dev1"

# Post-release
version = Version(1, 2, 0, "final", post=1) # "1.2.post1"
```

### parse_version Function

Parses a version string into a `Version` object.

```python
def parse_version(ver: str) -> Version:
```

**Parameters:**
- `ver` (str): Version string to parse

**Returns:**
- `Version`: Parsed version object

**Example:**
```python
version = parse_version("1.2.3a1")
# Returns: Version(1, 2, 3, "alpha", pre=1, post=0, dev=0)
```

## Constants and Mappings

### Release Type Mappings

- **`REL_MAP`**: Maps internal release types to PEP 440 abbreviations
- **`PRE_REL_MAP`**: Maps PEP 440 pre-release abbreviations to internal types
- **`DEV_STATUS`**: Maps release types to development status strings

### Regular Expression

- **`RE_VER`**: Compiled regex pattern for parsing version strings according to PEP 440

## Version Information

The module defines its own version:

```python
__version_info__ = Version(5, 8, 0, "final")
__version__ = "5.8.0"
```

## Validation Rules

The `Version` class enforces several validation rules:

### ‚úÖ Allowed Patterns

- **Final releases**: `Version(1, 0, 0, "final")` ‚Üí `"1.0"`
- **Pre-releases**: `Version(1, 2, 0, "alpha", pre=4)` ‚Üí `"1.2a4"`
- **Development**: `Version(1, 2, 3, ".dev", dev=1)` ‚Üí `"1.2.3.dev1"`
- **Post-releases**: `Version(1, 2, 0, "final", post=1)` ‚Üí `"1.2.post1"`

### ‚ùå Restrictions

- No implicit pre-releases (must specify `pre > 0`)
- No implicit post-releases (must specify `post > 0`) 
- No post-releases with pre-releases
- No epochs (`1!`) or local versions (`+custom`)
- All numeric parts must be non-negative integers

## Notes and Suggestions

### üîß Usage Recommendations

1. **For stable releases**: Use `Version(x, y, z, "final")`
2. **For testing**: Use development releases with `.dev` suffix
3. **For release candidates**: Use `"candidate"` with appropriate `pre` number
4. **Version comparison**: Objects support direct comparison (`v1 > v2`)

### ‚ö†Ô∏è Important Considerations

- This implementation is more restrictive than standard PEP 440
- Development releases are sorted before alpha releases due to the `.dev` prefix
- Post-releases with pre-releases are explicitly forbidden
- The module does not support all PEP 440 features (epochs, local versions)

### üí° Integration Tips

```python
# Good for setup.py integration
from meta import __version__, __version_info__

setup(
    name="mypackage",
    version=__version__,
    # Use __version_info__._get_dev_status() for classifiers
)
```