<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Common Module Documentation

## Overview

This Python module contains common code used across multiple modules, primarily focused on weekday representation and manipulation. The module provides a `weekday` class that represents specific weekdays with optional occurrence specifications.

## Purpose

The module serves as a utility for handling weekday-related operations, particularly useful in scheduling, calendar applications, or date/time manipulation scenarios where you need to represent:
- Specific days of the week
- Nth occurrence of a weekday (e.g., "first Monday", "last Friday")

## Classes

### `weekday`

A class that represents a weekday with an optional occurrence number.

#### Attributes

- `weekday` (int): The day of the week (0-6, where 0 is Monday)
- `n` (int, optional): The occurrence number (e.g., 1 for first, -1 for last)

#### Methods

##### `__init__(self, weekday, n=None)`
Initializes a weekday object.

**Parameters:**
- `weekday` (int): Day of the week index (0-6)
- `n` (int, optional): Occurrence number

**Example:**
```python
# Create a Monday
monday = weekday(0)

# Create the first Monday of a period
first_monday = weekday(0, 1)

# Create the last Friday of a period  
last_friday = weekday(4, -1)
```

##### `__call__(self, n)`
Returns a new weekday object with the specified occurrence number.

**Parameters:**
- `n` (int): The occurrence number

**Returns:**
- `weekday`: New weekday object if `n` differs from current, otherwise returns self

**Example:**
```python
monday = weekday(0)
first_monday = monday(1)  # Creates weekday(0, 1)
```

##### `__eq__(self, other)` and `__ne__(self, other)`
Implements equality comparison between weekday objects.

##### `__hash__(self)`
Makes the weekday object hashable for use in sets and as dictionary keys.

##### `__repr__(self)`
Returns a string representation of the weekday object.

**Format:**
- Simple weekday: `"MO"`, `"TU"`, `"WE"`, `"TH"`, `"FR"`, `"SA"`, `"SU"`
- With occurrence: `"MO(+1)"`, `"FR(-1)"`

## Implementation Notes

### Performance Optimizations
- Uses `__slots__` to reduce memory overhead and improve attribute access speed
- Only stores two attributes: `weekday` and `n`

### Weekday Mapping
The class uses the following weekday mapping:
```python
0: Monday (MO)
1: Tuesday (TU)  
2: Wednesday (WE)
3: Thursday (TH)
4: Friday (FR)
5: Saturday (SA)
6: Sunday (SU)
```

## Usage Examples

```python
# Basic weekday creation
monday = weekday(0)
friday = weekday(4)

# Weekdays with occurrence
first_monday = weekday(0, 1)
last_friday = weekday(4, -1)
second_tuesday = weekday(1, 2)

# Using the callable interface
monday = weekday(0)
third_monday = monday(3)

# String representation
print(monday)           # Output: MO
print(first_monday)     # Output: MO(+1)
print(last_friday)      # Output: FR(-1)

# Equality comparison
mon1 = weekday(0, 1)
mon2 = weekday(0, 1)
print(mon1 == mon2)     # Output: True

# Using in collections
weekdays_set = {weekday(0), weekday(1), weekday(0, 1)}
```

## Suggestions and Notes

### Potential Improvements
- Consider adding input validation for `weekday` parameter (should be 0-6)
- Could benefit from class constants for weekday indices (e.g., `MONDAY = 0`)
- Documentation strings (docstrings) would improve code maintainability

### Usage Considerations
- The occurrence number `n` can be positive (counting from start) or negative (counting from end)
- `n=None` represents any occurrence of the weekday
- Objects are immutable after creation (calling with different `n` returns new object)

### Integration Notes
- This class appears to be designed for use with date/time libraries
- Likely used in conjunction with recurrence rules or scheduling systems
- The hash implementation makes it suitable for caching and set operations