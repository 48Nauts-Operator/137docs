<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Common Utilities Module

## Overview

This module contains common code utilities that are shared across multiple modules. Currently, it provides a `weekday` class for representing weekdays with optional occurrence specifications, commonly used in date/time manipulation and recurring event scheduling.

## Purpose

The primary purpose of this module is to:
- Provide a standardized way to represent weekdays
- Support weekday specifications with occurrence numbers (e.g., "first Monday", "last Friday")
- Enable efficient comparison and hashing of weekday objects
- Offer a reusable component for date/time-related operations across different modules

## Classes

### `weekday`

A class that represents a weekday with an optional occurrence specifier.

#### Attributes

- `weekday` (int): The day of the week (0-6, where 0 is Monday)
- `n` (int, optional): The occurrence number (e.g., 1 for first, -1 for last)

#### Methods

##### `__init__(self, weekday, n=None)`

Initializes a new weekday instance.

**Parameters:**
- `weekday`: Integer representing the day of the week (0-6)
- `n`: Optional occurrence number

```python
# Examples
monday = weekday(0)           # Any Monday
first_monday = weekday(0, 1)  # First Monday of the month
last_friday = weekday(4, -1)  # Last Friday of the month
```

##### `__call__(self, n)`

Creates a new weekday instance with a different occurrence number.

**Parameters:**
- `n`: New occurrence number

**Returns:**
- New `weekday` instance if `n` differs from current, otherwise returns `self`

```python
monday = weekday(0)
first_monday = monday(1)  # Creates weekday(0, 1)
```

##### `__eq__(self, other)`

Compares two weekday instances for equality.

**Returns:**
- `True` if both weekday and occurrence number match, `False` otherwise

##### `__hash__(self)`

Provides hash functionality for use in sets and dictionaries.

**Returns:**
- Hash value based on weekday and occurrence number

##### `__repr__(self)`

Returns a string representation of the weekday.

**Returns:**
- String representation (e.g., "MO", "TU(+1)", "FR(-1)")

```python
print(weekday(0))     # Output: "MO"
print(weekday(0, 1))  # Output: "MO(+1)"
print(weekday(4, -1)) # Output: "FR(-1)"
```

## Usage Examples

```python
# Create weekday instances
monday = weekday(0)
first_tuesday = weekday(1, 1)
last_friday = weekday(4, -1)

# Use callable interface
any_wednesday = weekday(2)
second_wednesday = any_wednesday(2)

# Comparison
print(monday == weekday(0))        # True
print(monday == first_tuesday)     # False

# String representation
print(f"Meeting on {first_tuesday}")  # Meeting on TU(+1)
```

## Notes and Suggestions

### Performance Optimizations
- Uses `__slots__` to reduce memory overhead and improve attribute access speed
- Efficient hashing implementation for use in collections

### Weekday Numbering
- Follows the convention where Monday = 0, Sunday = 6
- Consider adding constants or class attributes for better readability:
  ```python
  MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY = range(7)
  ```

### Potential Improvements
1. **Input Validation**: Consider adding validation for weekday values (0-6 range)
2. **Documentation**: Add docstrings to methods for better IDE support
3. **Type Hints**: Add type annotations for better code clarity and IDE support
4. **Constants**: Define weekday constants for improved readability

### Integration Notes
- This class appears designed for use with date/time libraries
- The occurrence number (`n`) suggests integration with calendar/scheduling systems
- The callable interface provides flexibility for creating variations of weekday specifications