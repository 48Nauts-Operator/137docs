<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# relativedelta Module Documentation

## Overview

The `relativedelta` module provides a powerful class for performing date and time arithmetic in Python. It extends the functionality of Python's built-in `datetime.timedelta` by supporting relative date operations (like "add 3 months" or "go to next Monday") and absolute date replacements (like "set day to 15").

## Purpose

This module is designed to handle complex date calculations that are difficult or impossible with standard `timedelta` objects, such as:
- Adding months or years while handling variable month lengths
- Moving to specific weekdays
- Replacing specific date/time components
- Handling leap years correctly

## Key Features

- **Relative operations**: Add/subtract years, months, weeks, days, hours, minutes, seconds
- **Absolute operations**: Set specific values for date/time components
- **Weekday navigation**: Move to specific weekdays (e.g., "next Monday")
- **Leap year handling**: Automatic handling of leap days
- **Flexible initialization**: Create from two dates or from keyword arguments

## Classes and Functions

### Main Class: `relativedelta`

The core class that represents a relative time delta.

#### Constructor Signatures

```python
# Create from two datetime objects
relativedelta(datetime1, datetime2)

# Create from keyword arguments
relativedelta(years=0, months=0, days=0, hours=0, ...)
```

#### Key Parameters

**Relative Parameters (plural forms):**
- `years`, `months`, `weeks`, `days` - Add/subtract time units
- `hours`, `minutes`, `seconds`, `microseconds` - Add/subtract time components

**Absolute Parameters (singular forms):**
- `year`, `month`, `day` - Replace date components
- `hour`, `minute`, `second`, `microsecond` - Replace time components

**Special Parameters:**
- `weekday` - Move to specific weekday (use `MO`, `TU`, etc.)
- `leapdays` - Handle leap day adjustments
- `yearday`, `nlyearday` - Set day of year

#### Important Methods

##### `normalized()`
Returns a version with integer values for relative attributes.

```python
>>> relativedelta(days=1.5, hours=2).normalized()
relativedelta(days=+1, hours=+14)
```

##### Arithmetic Operations
- `__add__()`, `__sub__()` - Add/subtract relativedelta objects
- `__mul__()`, `__div__()` - Multiply/divide by scalars
- `__neg__()`, `__abs__()` - Negate or get absolute value

#### Usage Examples

```python
from datetime import datetime
from dateutil.relativedelta import relativedelta, MO

dt = datetime(2018, 4, 9, 13, 37, 0)

# Add 3 months and 2 days
new_date = dt + relativedelta(months=3, days=2)

# Go to next Monday
monday = dt + relativedelta(weekday=MO)

# Set to first day of month, then add 25 hours
result = dt + relativedelta(day=1, hours=25)
```

### Weekday Constants

Pre-defined weekday objects for use with the `weekday` parameter:

- `MO` - Monday
- `TU` - Tuesday  
- `WE` - Wednesday
- `TH` - Thursday
- `FR` - Friday
- `SA` - Saturday
- `SU` - Sunday

#### Weekday Usage

```python
# Next Monday
relativedelta(weekday=MO)

# Second Monday of month
relativedelta(weekday=MO(2))

# Last Monday of month  
relativedelta(weekday=MO(-1))

# Using integer (0=Monday, 1=Tuesday, etc.)
relativedelta(weekday=0)  # Same as MO
```

### Helper Functions

#### `_sign(x)`
Internal utility function that returns the sign of a number (+1 or -1).

## Important Notes and Considerations

### ‚ö†Ô∏è Behavior Warnings

1. **Order of Operations**: When adding a `relativedelta` to a datetime, operations are applied in this order:
   1. Year, Month, Day (absolute values first, then relative)
   2. Hours, Minutes, Seconds, Microseconds  
   3. Weekday adjustments

2. **Month Arithmetic**: Adding months handles variable month lengths automatically:
   ```python
   # January 31 + 1 month = February 28 (or 29 in leap year)
   datetime(2023, 1, 31) + relativedelta(months=1)
   ```

3. **Non-integer Restrictions**: Years and months must be integers due to their ambiguous nature when fractional.

### üí° Best Practices

- Use **relative parameters** (plural) for arithmetic operations
- Use **absolute parameters** (singular) for setting specific values
- Combine absolute and relative parameters for complex operations
- Be aware of month-end edge cases when adding months
- Use `normalized()` method to convert fractional time units to integers

### üîÑ Compatibility

- Compatible with Python 2.x and 3.x (uses `six` library)
- Works with both `date` and `datetime` objects
- Integrates seamlessly with standard `timedelta` objects

## Example Usage Patterns

```python
from datetime import datetime
from dateutil.relativedelta import relativedelta, MO, FR

base_date = datetime(2023, 1, 15, 10, 30)

# Common patterns
next_month = base_date + relativedelta(months=1)
last_year = base_date + relativedelta(years=-1)
end_of_month = base_date + relativedelta(day=31)
next_friday = base_date + relativedelta(weekday=FR)
business_quarter = base_date + relativedelta(months=3)

# Complex example: First Monday of next month at 9 AM
first_monday_9am = base_date + relativedelta(
    months=1, day=1, weekday=MO, hour=9, minute=0, second=0
)
```

This module is particularly useful for business applications, scheduling systems, and any application requiring sophisticated date arithmetic beyond simple day/hour/minute calculations.