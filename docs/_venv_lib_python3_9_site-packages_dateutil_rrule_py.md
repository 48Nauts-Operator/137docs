<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# dateutil.rrule Module Documentation

## Overview

The `rrule` module provides a complete implementation of recurrence rules as documented in the [iCalendar RFC 5545](https://tools.ietf.org/html/rfc5545). It allows you to generate recurring dates based on complex rules, with support for caching to improve performance.

## Purpose

This module is designed to:
- Generate recurring datetime sequences based on RFC 5545 specifications
- Handle complex recurrence patterns (yearly, monthly, weekly, daily, etc.)
- Support exclusion rules and dates
- Provide efficient caching mechanisms
- Parse RFC-compliant recurrence rule strings

## Key Constants

### Frequency Constants
```python
YEARLY, MONTHLY, WEEKLY, DAILY, HOURLY, MINUTELY, SECONDLY = range(7)
```

### Weekday Constants
```python
MO, TU, WE, TH, FR, SA, SU  # Monday through Sunday
```

## Main Classes

### `rrule`

The primary class for creating recurrence rules.

#### Constructor
```python
rrule(freq, dtstart=None, interval=1, wkst=None, count=None, until=None, ...)
```

#### Key Parameters
- **`freq`**: Required frequency (YEARLY, MONTHLY, WEEKLY, DAILY, HOURLY, MINUTELY, SECONDLY)
- **`dtstart`**: Start datetime (defaults to current time)
- **`interval`**: Interval between recurrences (default: 1)
- **`count`**: Maximum number of occurrences
- **`until`**: End datetime for recurrence
- **`byweekday`**: Specific weekdays for recurrence
- **`bymonth`**: Specific months
- **`bymonthday`**: Specific days of month
- **`cache`**: Enable caching for performance

#### Important Methods
- **`before(dt, inc=False)`**: Returns last occurrence before given datetime
- **`after(dt, inc=False)`**: Returns first occurrence after given datetime
- **`between(after, before, inc=False)`**: Returns occurrences in date range
- **`count()`**: Returns total number of recurrences

#### Example Usage
```python
from datetime import datetime
from dateutil.rrule import rrule, DAILY, MO, FR

# Daily recurrence for 10 days
rule = rrule(DAILY, count=10, dtstart=datetime(2023, 1, 1))

# Weekly on Monday and Friday
rule = rrule(WEEKLY, byweekday=(MO, FR), dtstart=datetime(2023, 1, 1))
```

### `rruleset`

Allows combining multiple rules, dates, and exclusions.

#### Key Methods
- **`rrule(rrule)`**: Add an rrule to the set
- **`rdate(datetime)`**: Add a specific date
- **`exrule(rrule)`**: Add an exclusion rule
- **`exdate(datetime)`**: Add an exclusion date

#### Example Usage
```python
from dateutil.rrule import rruleset, rrule, DAILY

rset = rruleset()
rset.rrule(rrule(DAILY, count=10, dtstart=datetime(2023, 1, 1)))
rset.exdate(datetime(2023, 1, 5))  # Exclude January 5th
```

### `weekday`

Represents a weekday with optional occurrence number.

#### Constructor
```python
weekday(wkday, n=None)
```

#### Example Usage
```python
# First Monday of the month
first_monday = weekday(0, 1)  # or MO(1)

# Last Friday of the month  
last_friday = weekday(4, -1)  # or FR(-1)
```

## Utility Functions

### `rrulestr()`

Parses RFC 5545 compliant recurrence rule strings.

#### Parameters
- **`s`**: Rule string to parse
- **`dtstart`**: Default start datetime
- **`cache`**: Enable caching
- **`ignoretz`**: Ignore timezone information

#### Example Usage
```python
from dateutil.rrule import rrulestr

rule = rrulestr("FREQ=DAILY;COUNT=10")
rule = rrulestr("DTSTART:20230101T090000\nRRULE:FREQ=WEEKLY;BYDAY=MO,FR")
```

## Internal Classes

### `rrulebase`

Base class providing common functionality for `rrule` and `rruleset`.

### `_iterinfo`

Internal class managing masks and iteration information for efficient date generation.

## Important Notes

### Performance Considerations
- **Caching**: Enable caching (`cache=True`) when reusing the same rrule multiple times
- **Large Sets**: Be cautious with unbounded rules (no `count` or `until`)

### RFC Compliance
- Invalid dates (e.g., February 30) are automatically ignored
- The module follows RFC 5545 specifications closely
- Extension: `byeaster` parameter for Easter-relative dates

### Timezone Handling
- When using `until` with timezone-aware `dtstart`, `until` must be in UTC
- Timezone information is preserved in generated datetimes

### Deprecation Warning
- Using both `count` and `until` parameters together is deprecated

## Common Use Cases

### Business Days
```python
# Weekdays only
rule = rrule(DAILY, byweekday=(MO,TU,WE,TH,FR), dtstart=datetime(2023,1,1))
```

### Monthly Meetings
```python
# First Monday of each month
rule = rrule(MONTHLY, byweekday=MO(1), dtstart=datetime(2023,1,1))
```

### Quarterly Reports
```python
# Every 3 months
rule = rrule(MONTHLY, interval=3, dtstart=datetime(2023,1,1))
```

## Error Handling

The module raises `ValueError` for:
- Invalid parameter combinations
- Malformed rule strings
- Invalid date specifications
- Empty rule sets

## Dependencies

- `datetime` and `calendar`