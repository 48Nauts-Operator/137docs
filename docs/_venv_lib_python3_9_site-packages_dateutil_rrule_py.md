<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# dateutil.rrule Module Documentation

## Overview

The `rrule` module provides a complete implementation of recurrence rules as documented in the [iCalendar RFC 5545](https://tools.ietf.org/html/rfc5545). It allows you to generate recurring dates and times with support for complex patterns, caching for performance, and exclusion rules.

## Key Features

- **RFC 5545 Compliant**: Full implementation of iCalendar recurrence rules
- **Performance Optimized**: Built-in caching support for repeated queries
- **Flexible**: Support for complex recurrence patterns with multiple rules
- **String Parsing**: Parse RFC-compliant recurrence rule strings

## Constants

### Frequency Constants
```python
YEARLY, MONTHLY, WEEKLY, DAILY, HOURLY, MINUTELY, SECONDLY
```
Used to specify the frequency of recurrence.

### Weekday Constants
```python
MO, TU, WE, TH, FR, SA, SU
```
Represent days of the week for use in recurrence rules.

## Core Classes

### `rrule`

The main class for creating recurrence rules. Generates datetime objects based on specified patterns.

#### Constructor
```python
rrule(freq, dtstart=None, interval=1, wkst=None, count=None, until=None, ...)
```

#### Key Parameters

- **`freq`** (required): Frequency constant (YEARLY, MONTHLY, etc.)
- **`dtstart`**: Start date/time for recurrence (defaults to now)
- **`interval`**: Interval between recurrences (default: 1)
- **`count`**: Maximum number of occurrences to generate
- **`until`**: End date/time for recurrence rule
- **`byweekday`**: Specific weekdays for recurrence
- **`bymonth`**: Specific months (1-12)
- **`bymonthday`**: Specific days of month (1-31, or negative)
- **`byhour`**: Specific hours (0-23)
- **`byminute`**: Specific minutes (0-59)
- **`bysecond`**: Specific seconds (0-59)
- **`cache`**: Enable caching for improved performance

#### Example Usage
```python
from dateutil.rrule import rrule, WEEKLY, MO, WE, FR
from datetime import datetime

# Every weekday
rule = rrule(WEEKLY, byweekday=(MO, WE, FR), count=10)

# Monthly on the 15th
rule = rrule(MONTHLY, bymonthday=15, dtstart=datetime(2024, 1, 1))
```

#### Important Methods

- **`count()`**: Returns total number of recurrences
- **`before(dt, inc=False)`**: Last occurrence before given datetime
- **`after(dt, inc=False)`**: First occurrence after given datetime
- **`between(after, before, inc=False)`**: All occurrences in date range

### `rruleset`

Combines multiple recurrence rules, inclusion dates, exclusion rules, and exclusion dates.

#### Key Methods

- **`rrule(rule)`**: Add an rrule to the set
- **`rdate(date)`**: Add a specific date to include
- **`exrule(rule)`**: Add an rrule for exclusions
- **`exdate(date)`**: Add a specific date to exclude

#### Example Usage
```python
from dateutil.rrule import rruleset, rrule, DAILY
from datetime import datetime

rset = rruleset()

# Add a daily rule
rset.rrule(rrule(DAILY, count=10, dtstart=datetime(2024, 1, 1)))

# Add a specific date
rset.rdate(datetime(2024, 1, 15))

# Exclude weekends
rset.exrule(rrule(WEEKLY, byweekday=(SA, SU)))
```

### `weekday`

Represents a weekday with optional occurrence number.

```python
# First Monday of the month
first_monday = weekday(0, 1)  # or MO(1)

# Last Friday of the month  
last_friday = weekday(4, -1)  # or FR(-1)
```

## String Parsing

### `rrulestr()`

Parses RFC 5545 compliant recurrence rule strings.

```python
from dateutil.rrule import rrulestr

# Parse a simple rule
rule = rrulestr("FREQ=DAILY;COUNT=10")

# Parse with start date
rule = rrulestr("DTSTART:20240101T090000\nRRULE:FREQ=WEEKLY;BYDAY=MO,WE,FR")
```

## Important Notes

### Invalid Dates
Per RFC 5545, invalid dates (like February 30th) are automatically ignored rather than adjusted:

```python
from dateutil.rrule import rrule, MONTHLY
from datetime import datetime

# Starting on Jan 31st, monthly recurrence will skip months without 31 days
rule = rrule(MONTHLY, dtstart=datetime(2024, 1, 31), count=6)
# Results: Jan 31, Mar 31, May 31, Jul 31, Aug 31, Oct 31 (Feb, Apr, Jun, Sep skipped)
```

### Performance Tips

- **Enable caching** for rules used repeatedly:
  ```python
  rule = rrule(DAILY, count=1000, cache=True)
  ```

- **Use `count` or `until`** to limit infinite sequences

- **Avoid using both `count` and `until`** together (deprecated)

### Timezone Handling

- DTSTART and UNTIL must have consistent timezone awareness
- If DTSTART has timezone info, UNTIL must be in UTC
- Use `ignoretz=True` in `rrulestr()` to ignore timezone information

## Common Use Cases

### Business Days
```python
# Weekdays only
rrule(WEEKLY, byweekday=(MO, TU, WE, TH, FR))
```

### Monthly Meetings
```python
# First Monday of each month