<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# IDNA UTS46 Data Module Documentation

## Overview

This module contains the **IDNA Mapping Table from UTS46** (Unicode Technical Standard #46), which is used for **Internationalized Domain Names in Applications (IDNA)**. The file is automatically generated and provides Unicode character mapping data for domain name processing.

## Purpose

The module implements the UTS46 standard for processing internationalized domain names, allowing non-ASCII characters to be used in domain names while maintaining compatibility with the ASCII-based DNS system.

## Key Components

### Version Information
- **`__version__`**: `"15.1.0"` - Indicates the Unicode version this data corresponds to

### Data Structure

The module contains a series of segment functions (`_seg_0()` through `_seg_81()`) that return lists of tuples. Each tuple represents a Unicode character mapping with the following format:

```python
# Two-element tuple: (codepoint, mapping_type)
(0x41, "M", "a")  # Maps uppercase A to lowercase a

# Three-element tuple: (codepoint, mapping_type, replacement)
(0x41, "M", "a")  # Maps codepoint 0x41 to "a"
```

### Mapping Types

The mapping types used in the data include:

- **`"V"`** (Valid) - Character is valid as-is
- **`"M"`** (Mapped) - Character should be mapped to the replacement string
- **`"D"`** (Deviation) - Character handling depends on processing options
- **`"3"`** (Disallowed_STD3_Valid) - Valid but disallowed in STD3 ASCII rules
- **`"X"`** (Disallowed) - Character is not allowed
- **`"I"`** (Ignored) - Character should be ignored during processing

### Main Data Export

**`uts46data`**: A large tuple containing all Unicode character mappings, created by concatenating all segment functions.

## Functions

### Segment Functions (`_seg_0()` to `_seg_81()`)

These functions return lists of character mapping tuples for different Unicode ranges:

```python
def _seg_0() -> List[Union[Tuple[int, str], Tuple[int, str, str]]]:
    return [
        (0x0, "3"),      # NULL character - disallowed in STD3
        (0x41, "M", "a"), # A -> a (case folding)
        (0x61, "V"),     # a is valid as-is
        # ... more mappings
    ]
```

## Usage Examples

This data is typically used by IDNA processing libraries:

```python
# Example of how this data might be used (pseudocode)
def process_character(codepoint):
    # Find mapping in uts46data
    for entry in uts46data:
        if entry[0] == codepoint:
            mapping_type = entry[1]
            if mapping_type == "V":
                return chr(codepoint)  # Valid as-is
            elif mapping_type == "M" and len(entry) > 2:
                return entry[2]  # Return replacement
            elif mapping_type == "X":
                raise ValueError("Disallowed character")
            # ... handle other types
```

## Important Notes

### File Generation
- **Auto-generated**: This file is automatically created by `tools/idna-data`
- **Do not edit manually**: Changes will be overwritten when regenerated
- **Unicode Standard**: Based on UTS46 specification

### Character Encoding
- The file uses UTF-8 encoding (specified in vim modeline)
- Contains extensive Unicode character mappings including:
  - Case folding (Aâ†’a)
  - Character normalization
  - Script-specific mappings
  - Emoji and symbol handling

### Performance Considerations
- Large dataset with thousands of mappings
- Consider using binary search or hash tables for efficient lookups
- Data is organized sequentially by Unicode codepoint

## Related Standards

- **UTS46**: Unicode IDNA Compatibility Processing
- **RFC 5891**: Internationalized Domain Names in Applications (IDNA): Protocol
- **Unicode Standard**: Version 15.1.0

## Maintenance

When updating:
1. Use the official `tools/idna-data` generator
2. Verify the Unicode version matches your requirements
3. Test with comprehensive IDNA test cases
4. Update version information if necessary

This module is essential for proper internationalized domain name processing and should be used in conjunction with a complete IDNA implementation library.