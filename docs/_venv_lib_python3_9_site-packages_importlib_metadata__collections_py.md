<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# FreezableDefaultDict and Pair Classes Documentation

This Python file provides two utility classes for data structure management: a freezable default dictionary and a name-value pair container.

## Overview

The file contains two main classes:
- `FreezableDefaultDict`: A dictionary that can be "frozen" to prevent automatic creation of new keys
- `Pair`: A simple name-value pair structure with parsing capabilities

## Classes

### FreezableDefaultDict

A specialized `collections.defaultdict` that can be frozen to prevent the creation of new keys after construction.

#### Purpose
- Extends the functionality of `defaultdict` by adding the ability to "freeze" the dictionary
- Useful when you want to prevent mutation during iteration or after initial setup
- Maintains existing keys and values but stops auto-generation of new entries

#### Key Methods

##### `__missing__(self, key)`
- **Purpose**: Handles access to non-existent keys
- **Behavior**: 
  - If frozen: returns a new instance from `default_factory()` without adding it to the dictionary
  - If not frozen: behaves like a normal `defaultdict`

##### `freeze(self)`
- **Purpose**: Freezes the dictionary to prevent new key creation
- **Effect**: Sets internal `_frozen` attribute to prevent automatic key addition

#### Usage Example

```python
# Create a FreezableDefaultDict with list as default factory
dd = FreezableDefaultDict(list)

# Add items normally
dd[0].append('1')  # Creates key 0 with list ['1']

# Freeze the dictionary
dd.freeze()

# Accessing new keys returns empty list but doesn't add to dict
result = dd[1]  # Returns [] but key 1 is not added
print(len(dd))  # Still 1, not 2
```

### Pair

A `NamedTuple` representing a simple name-value pair with parsing functionality.

#### Purpose
- Provides a structured way to handle name-value pairs
- Includes built-in parsing from string format
- Immutable due to `NamedTuple` inheritance

#### Attributes
- `name`: String representing the name/key
- `value`: String representing the value

#### Key Methods

##### `parse(cls, text)` (Class Method)
- **Purpose**: Parses a string in "name=value" format into a Pair object
- **Parameters**: `text` - String containing name and value separated by "="
- **Returns**: New `Pair` instance
- **Behavior**: 
  - Splits text on first "=" character
  - Strips whitespace from both name and value
  - Handles cases where value might contain additional "=" characters

#### Usage Example

```python
# Parse a name-value pair from string
pair = Pair.parse("username = john_doe")
print(pair.name)   # "username"
print(pair.value)  # "john_doe"

# Direct instantiation
pair2 = Pair("status", "active")
```

## Dependencies

- `collections`: For `defaultdict` base class
- `typing`: For `NamedTuple` and type hints

## Notes and Suggestions

### FreezableDefaultDict
- ‚ö†Ô∏è **Important**: Frozen state only prevents new keys from being added to the dictionary, but still returns default values when accessed
- üí° **Use Case**: Ideal for scenarios where you need to populate a dictionary initially but want to prevent accidental additions during processing
- üîß **Consider**: Adding an `unfreeze()` method for more flexibility

### Pair
- ‚úÖ **Thread-safe**: Immutable due to `NamedTuple` inheritance
- üí° **Enhancement**: Consider adding validation for the "=" separator in the parse method
- üîß **Suggestion**: Could be extended to handle different separators or escape characters

### General
- Both classes are lightweight and focused on specific use cases
- Consider adding more comprehensive error handling for edge cases
- The `FreezableDefaultDict` attribution notes it's from `jaraco.collections 3.3`