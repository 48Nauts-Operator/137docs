<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# FoldedCase String Class Documentation

## Overview

This module provides the `FoldedCase` class, a case-insensitive string implementation that behaves like a regular Python string but performs case-insensitive comparisons and operations. This is particularly useful when you need to work with strings where case variations should be treated as equivalent.

## Dependencies

- `re`: Regular expression operations
- `._functools.method_cache`: Caching decorator for method optimization

## Classes

### `FoldedCase`

A case-insensitive string class that inherits from Python's built-in `str` class.

#### Purpose

- Provides case-insensitive string comparisons
- Maintains all standard string functionality
- Optimizes performance through caching
- Enables case-insensitive string operations like searching and splitting

#### Key Features

- **Case-insensitive equality**: `FoldedCase('hello') == 'HELLO'` returns `True`
- **Case-insensitive ordering**: Sorting works regardless of case
- **Case-insensitive searching**: Find substrings regardless of case
- **Case-insensitive splitting**: Split strings using case-insensitive delimiters

## Methods

### Comparison Methods

#### `__eq__(self, other)`
- **Purpose**: Case-insensitive equality comparison
- **Returns**: `True` if strings are equal ignoring case

#### `__ne__(self, other)`
- **Purpose**: Case-insensitive inequality comparison
- **Returns**: `True` if strings are not equal ignoring case

#### `__lt__(self, other)` and `__gt__(self, other)`
- **Purpose**: Case-insensitive ordering comparisons
- **Returns**: Boolean result of lowercase comparison

### Utility Methods

#### `__hash__(self)`
- **Purpose**: Provides consistent hashing based on lowercase version
- **Returns**: Hash of the lowercase string
- **Note**: Ensures objects that compare equal have the same hash

#### `__contains__(self, other)`
- **Purpose**: Case-insensitive substring checking
- **Returns**: `True` if `other` is found within the string (case-insensitive)

#### `in_(self, other)`
- **Purpose**: Checks if this FoldedCase string appears in another string
- **Parameters**: `other` - string to search in
- **Returns**: `True` if self is found in other (case-insensitive)
- **Use case**: Solves the limitation where `FoldedCase('hello') in 'Hello World'` returns `False`

#### `lower(self)`
- **Purpose**: Returns lowercase version of the string
- **Optimization**: Uses `@method_cache` decorator for performance
- **Note**: Cached since it's called frequently by other methods

#### `index(self, sub)`
- **Purpose**: Case-insensitive substring index finding
- **Parameters**: `sub` - substring to find
- **Returns**: Index of first occurrence (case-insensitive)

#### `split(self, splitter=' ', maxsplit=0)`
- **Purpose**: Case-insensitive string splitting
- **Parameters**: 
  - `splitter`: Delimiter to split on (default: space)
  - `maxsplit`: Maximum number of splits (default: 0 = no limit)
- **Returns**: List of split string parts
- **Implementation**: Uses regex with `re.I` flag for case-insensitive matching

## Usage Examples

```python
# Basic equality
s = FoldedCase('hello world')
print(s == 'Hello World')  # True
print('Hello World' == s)  # True

# Case-insensitive operations
print(s.index('O'))        # 4 (finds 'o' in 'world')
print(s.split('O'))        # ['hell', ' w', 'rld']

# Sorting
words = ['GAMMA', 'alpha', 'Beta']
sorted_words = sorted(map(FoldedCase, words))
# Result: ['alpha', 'Beta', 'GAMMA']

# Membership testing
print("hello" in FoldedCase("Hello World"))     # True
print(FoldedCase('hello').in_('Hello World'))   # True
```

## Notes and Considerations

### Performance
- The `lower()` method is cached using `@method_cache` for better performance
- This is crucial since most operations rely on lowercase conversion

### Limitations
- Set operations require both elements to be `FoldedCase` objects
- Direct membership testing (`FoldedCase in str`) doesn't work as expected
- Use the `in_()` method for checking membership in regular strings

### Best Practices
- Use `FoldedCase` when case-insensitive string operations are needed frequently
- Consider converting all related strings to `FoldedCase` for consistent behavior
- Be aware of the asymmetric behavior in membership testing

## Version Information
- Based on jaraco.text version 3.5