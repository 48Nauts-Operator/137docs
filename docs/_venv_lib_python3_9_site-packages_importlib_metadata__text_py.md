<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# FoldedCase Module Documentation

## Overview

This module provides a case-insensitive string class called `FoldedCase` that behaves identically to Python's built-in `str` class, except that all string comparisons and operations are performed in a case-insensitive manner.

The implementation is derived from `jaraco.text 3.5` and extends Python's `str` class with overridden comparison and string manipulation methods.

## Dependencies

- `re` - Regular expressions for case-insensitive string splitting
- `._functools.method_cache` - Caching decorator for performance optimization

## Classes

### `FoldedCase(str)`

A case-insensitive string class that inherits from `str` but performs all comparisons and operations without regard to case.

#### Key Features

- **Case-insensitive comparisons**: Strings differing only in case are considered equal
- **Preserved original case**: The original string case is maintained for display purposes
- **Standard string operations**: Supports indexing, splitting, and membership testing
- **Performance optimization**: Uses caching for frequently called methods

#### Methods

##### Comparison Methods

```python
def __lt__(self, other)
def __gt__(self, other)  
def __eq__(self, other)
def __ne__(self, other)
```

- Perform case-insensitive comparisons by converting both strings to lowercase
- Enable proper sorting of `FoldedCase` objects

##### Hash and Membership Methods

```python
def __hash__(self)
def __contains__(self, other)
```

- `__hash__()`: Returns hash of lowercase version for consistent dictionary/set behavior
- `__contains__()`: Performs case-insensitive substring checking

##### String Operation Methods

```python
def lower(self)
def index(self, sub)
def split(self, splitter=' ', maxsplit=0)
def in_(self, other)
```

- **`lower()`**: Cached version of string lowercasing for performance
- **`index(sub)`**: Finds case-insensitive index of substring
- **`split(splitter, maxsplit)`**: Performs case-insensitive string splitting using regex
- **`in_(other)`**: Checks if this string appears in another string (case-insensitive)

## Usage Examples

### Basic Comparisons

```python
s = FoldedCase('hello world')

# Case-insensitive equality
print(s == 'Hello World')  # True
print('Hello World' == s)  # True
print(s != 'Hello World')  # False
```

### String Operations

```python
s = FoldedCase('hello world')

# Case-insensitive indexing and splitting
print(s.index('O'))        # 4 (finds 'o' in 'hello')
print(s.split('O'))        # ['hell', ' w', 'rld']
```

### Membership Testing

```python
s = FoldedCase('Hello World')

# Standard membership (FoldedCase on right side)
print("hello" in s)  # True

# Special method for FoldedCase on left side
print(FoldedCase('hello').in_('Hello World'))  # True
```

### Sorting

```python
words = ['GAMMA', 'alpha', 'Beta']
sorted_words = sorted(map(FoldedCase, words))
print(sorted_words)  # ['alpha', 'Beta', 'GAMMA']
```

## Important Notes

### Set and Dictionary Usage

- Both the candidate and elements must be `FoldedCase` objects for proper set inclusion testing
- Hash consistency is maintained through lowercase conversion

```python
s = FoldedCase("Hello World")
print(FoldedCase("hello world") in {s})  # True
```

### Membership Testing Limitations

- String membership only works when `FoldedCase` object is on the right side of the `in` operator
- For reverse membership testing, use the `in_()` method

```python
# This works
"hello" in FoldedCase("Hello World")  # True

# This doesn't work as expected  
FoldedCase('hello') in 'Hello World'  # False

# Use this instead
FoldedCase('hello').in_('Hello World')  # True
```

## Performance Considerations

- The `lower()` method is cached using `@method_cache` decorator since it's called frequently
- Case-insensitive operations may have slight performance overhead compared to regular strings

## Suggestions for Use

1. **Use for configuration keys**: Ideal for handling case-insensitive configuration parameters
2. **File path comparisons**: Useful on case-insensitive file systems
3. **User input processing**: Great for handling user input where case shouldn't matter
4. **Data normalization**: Helpful when working with data that may have inconsistent casing