<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Jinja2 Defaults Configuration

This file defines the default configuration settings, constants, and policies for the Jinja2 template engine. It serves as a central location for all default values used throughout the templating system.

## Purpose

The `defaults.py` file establishes:
- Template syntax delimiters (blocks, variables, comments)
- Parser and lexer behavior settings
- Default namespace functions and utilities
- Built-in filters and tests
- Default policies for various template operations

## Template Syntax Configuration

### Block Delimiters
```python
BLOCK_START_STRING = "{%"
BLOCK_END_STRING = "%}"
```
- Defines the opening and closing delimiters for template blocks (e.g., `{% if %}`, `{% for %}`)

### Variable Delimiters
```python
VARIABLE_START_STRING = "{{"
VARIABLE_END_STRING = "}}"
```
- Defines the delimiters for variable interpolation (e.g., `{{ variable_name }}`)

### Comment Delimiters
```python
COMMENT_START_STRING = "{#"
COMMENT_END_STRING = "#}"
```
- Defines the delimiters for template comments (e.g., `{# This is a comment #}`)

## Parser/Lexer Behavior Settings

### Line-based Syntax
- **`LINE_STATEMENT_PREFIX`**: Optional prefix for line-based statements (default: `None`)
- **`LINE_COMMENT_PREFIX`**: Optional prefix for line-based comments (default: `None`)

### Whitespace Control
- **`TRIM_BLOCKS`**: Remove trailing newlines after block tags (default: `False`)
- **`LSTRIP_BLOCKS`**: Strip leading whitespace from block tags (default: `False`)
- **`KEEP_TRAILING_NEWLINE`**: Preserve trailing newlines in templates (default: `False`)

### Line Endings
```python
NEWLINE_SEQUENCE: "te.Literal['\\n', '\\r\\n', '\\r']" = "\n"
```
- Specifies the newline sequence to use in rendered output

## Default Namespace

The `DEFAULT_NAMESPACE` dictionary provides built-in functions and utilities available in all templates:

| Function/Class | Purpose |
|----------------|---------|
| `range` | Python's built-in range function |
| `dict` | Python's built-in dict constructor |
| `lipsum` | Generate Lorem Ipsum placeholder text |
| `cycler` | Cycle through a sequence of values |
| `joiner` | Join template output with separators |
| `namespace` | Create namespace objects for variable storage |

### Usage Examples
```jinja2
{# Generate Lorem Ipsum text #}
{{ lipsum(5) }}

{# Create a cycler for alternating values #}
{% set row_cycle = cycler('odd', 'even') %}

{# Use namespace for variable assignment #}
{% set ns = namespace(found=false) %}
```

## Default Policies

The `DEFAULT_POLICIES` dictionary configures behavior for various template operations:

### Compiler Settings
- **`compiler.ascii_str`**: Force ASCII string compilation (default: `True`)

### URL Processing
- **`urlize.rel`**: Default `rel` attribute for auto-generated links (default: `"noopener"`)
- **`urlize.target`**: Default `target` attribute for links (default: `None`)
- **`urlize.extra_schemes`**: Additional URL schemes to recognize (default: `None`)

### Text Processing
- **`truncate.leeway`**: Extra characters allowed when truncating text (default: `5`)

### JSON Handling
- **`json.dumps_function`**: Custom JSON serialization function (default: `None`)
- **`json.dumps_kwargs`**: Arguments passed to JSON serializer (default: `{"sort_keys": True}`)

### Internationalization
- **`ext.i18n.trimmed`**: Trim whitespace in i18n blocks (default: `False`)

## Imported Components

The file imports and re-exports:
- **`DEFAULT_FILTERS`**: Built-in template filters from `.filters`
- **`DEFAULT_TESTS`**: Built-in template tests from `.tests`
- **Utility classes**: `Cycler`, `Joiner`, `Namespace` from `.utils`
- **`generate_lorem_ipsum`**: Lorem Ipsum generator function

## Notes and Suggestions

### Customization
- These defaults can be overridden when creating a Jinja2 environment
- Consider the impact on template compatibility when changing syntax delimiters
- Whitespace control settings significantly affect template output formatting

### Security Considerations
- The `urlize.rel="noopener"` policy helps prevent security vulnerabilities in generated links
- Be cautious when modifying URL-related policies in user-facing applications

### Performance
- The `json.dumps_kwargs` setting with `sort_keys=True` ensures consistent output but may impact performance for large objects