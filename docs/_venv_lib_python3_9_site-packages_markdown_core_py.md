<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Python Markdown Library Documentation

## Overview

This file contains the core implementation of **Python Markdown**, a Python implementation of John Gruber's Markdown specification. It provides functionality to convert Markdown text to HTML with support for extensions and customizable output formats.

## Key Information

- **Documentation**: https://python-markdown.github.io/
- **GitHub**: https://github.com/Python-Markdown/markdown/
- **PyPI**: https://pypi.org/project/Markdown/
- **License**: BSD

## Main Components

### Classes

#### `Markdown`

The main parser class that converts Markdown to HTML.

**Key Attributes:**
- `tab_length` (int): Number of spaces per tab (default: 4)
- `ESCAPED_CHARS` (list): Characters that get backslash escape treatment
- `block_level_elements` (list): HTML tags treated as block-level elements
- `references` (dict): Link references found in parsed documents
- `output_formats` (dict): Available output formats and their serializers

**Processing Pipeline:**
The conversion process follows these steps:
1. **Preprocessors** - Initial text processing
2. **Block Parser** - Parse high-level structural elements
3. **Tree Processors** - Process the ElementTree object (includes inline patterns)
4. **Post Processors** - Final text processing after serialization

## Important Methods

### `Markdown.__init__(**kwargs)`

Creates a new Markdown instance.

**Parameters:**
- `extensions`: List of extensions to load
- `extension_configs`: Configuration settings for extensions
- `output_format`: Output format ('html' or 'xhtml')
- `tab_length`: Tab length in spaces

### `Markdown.convert(source: str) -> str`

Converts Markdown text to HTML.

```python
md = Markdown()
html = md.convert("# Hello World\n\nThis is **bold** text.")
```

### `Markdown.convertFile(input, output, encoding)`

Converts Markdown files with proper encoding handling.

```python
md = Markdown()
md.convertFile(input='input.md', output='output.html', encoding='utf-8')
```

### `Markdown.registerExtensions(extensions, configs)`

Loads and registers extensions with the parser.

### `Markdown.build_extension(ext_name: str, configs) -> Extension`

Builds an extension from a string name, supporting both entry points and dot notation.

## Exported Functions

### `markdown(text: str, **kwargs) -> str`

**Convenience function** for simple Markdown conversion.

```python
import markdown
html = markdown.markdown("# Hello World")
```

### `markdownFromFile(**kwargs)`

**Convenience function** for file-based conversion.

```python
import markdown
markdown.markdownFromFile(input='input.md', output='output.html')
```

## Output Formats

The library supports two output formats:

- **`html`**: HTML5-style tags
- **`xhtml`**: XHTML-style tags (default)

## Extension System

The library supports a robust extension system:

- Extensions can be loaded by name or as instances
- Entry point support for plugin discovery  
- Configuration passed via `extension_configs` parameter
- Extensions can modify any part of the processing pipeline

## Usage Examples

### Basic Usage

```python
import markdown

# Simple conversion
html = markdown.markdown("**Hello** *World*")

# With extensions
html = markdown.markdown(
    text="# Title\n\n```python\nprint('hello')\n```",
    extensions=['codehilite', 'toc']
)
```

### Advanced Usage

```python
# Custom instance with configuration
md = Markdown(
    extensions=['codehilite', 'toc'],
    extension_configs={
        'codehilite': {'css_class': 'highlight'},
        'toc': {'title': 'Table of Contents'}
    },
    output_format='html',
    tab_length=2
)

html = md.convert(markdown_text)
```

## Notes and Suggestions

### Performance Considerations

- **Reuse instances**: Create one `Markdown` instance and call `reset()` between conversions for better performance
- **Memory management**: The parser maintains state, so reset between documents

### Error Handling

- Input must be Unicode strings
- File operations use UTF-8 encoding by default
- Extension loading failures raise descriptive errors

### Best Practices

- Use the convenience functions (`markdown()`, `markdownFromFile()`) for simple use cases
- Create `Markdown` instances for repeated conversions or when you need custom configuration
- Always specify encoding when working with files in different character sets

### Extension Development

- Extensions should inherit from `markdown.extensions.Extension`
- Use `registerExtension()` if your extension needs state reset capability
- Extensions can modify any part of the processing pipeline through registries