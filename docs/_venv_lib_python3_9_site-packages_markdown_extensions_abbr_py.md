<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Abbreviation Extension for Python-Markdown

## Overview

This extension adds abbreviation handling to Python-Markdown, allowing users to define abbreviations that are automatically converted to HTML `<abbr>` elements with tooltips. When an abbreviation is defined, all instances of that abbreviation in the text will be wrapped in an `<abbr>` tag with a `title` attribute containing the full definition.

## Purpose

The extension enables markdown documents to:
- Define abbreviations inline using a special syntax
- Automatically convert abbreviation text to semantic HTML `<abbr>` elements
- Provide hover tooltips with full definitions
- Support both inline definitions and glossary-based abbreviations

## Syntax

Abbreviations are defined using the following syntax:
```markdown
*[HTML]: HyperText Markup Language
*[CSS]: Cascading Style Sheets
```

## Main Classes

### `AbbrExtension`

The main extension class that coordinates the abbreviation functionality.

**Key Methods:**
- `__init__(**kwargs)` - Initializes the extension with configuration options
- `reset()` - Clears all previously defined abbreviations
- `load_glossary(dictionary)` - Loads abbreviations from a dictionary
- `extendMarkdown(md)` - Registers processors with the Markdown parser

**Configuration:**
- `glossary`: A dictionary where keys are abbreviations and values are definitions

### `AbbrTreeprocessor`

Processes the parsed markdown tree to replace abbreviation text with `<abbr>` elements.

**Key Methods:**
- `create_element(title, text, tail)` - Creates an `<abbr>` HTML element
- `iter_element(el, parent)` - Recursively processes elements to find and replace abbreviations
- `run(root)` - Main processing method that builds regex pattern and processes the tree

**Features:**
- Uses regex to find abbreviation matches
- Processes abbreviations in order of length (longest first) to avoid conflicts
- Handles both element text and tail text

### `AbbrBlockprocessor`

Parses markdown text to find and extract abbreviation definitions.

**Key Features:**
- Uses regex pattern to identify abbreviation definitions: `*[abbr]: definition`
- Removes definition lines from the output
- Supports removing abbreviations with empty definitions (`''` or `""`)
- Handles multi-line blocks correctly

**Regex Pattern:**
```python
r'^[*]\[(?P<abbr>[^\\]*?)\][ ]?:[ ]*\n?[ ]*(?P<title>.*)$'
```

## Usage Examples

### Basic Usage

```python
import markdown

# Initialize with extension
md = markdown.Markdown(extensions=['abbr'])

# Markdown text with abbreviations
text = """
*[HTML]: HyperText Markup Language
*[CSS]: Cascading Style Sheets

HTML and CSS are fundamental web technologies.
"""

# Convert to HTML
html = md.convert(text)
```

### Using Glossary Configuration

```python
md = markdown.Markdown(
    extensions=['abbr'],
    extension_configs={
        'abbr': {
            'glossary': {
                'API': 'Application Programming Interface',
                'SDK': 'Software Development Kit'
            }
        }
    }
)
```

## Important Notes

### Deprecated Classes
- `AbbrPreprocessor` - Renamed to `AbbrBlockprocessor`
- `AbbrInlineProcessor` - Will be removed; use `AbbrTreeprocessor` instead

### Processing Order
The extension registers processors with specific priorities:
- `AbbrTreeprocessor`: Priority 7
- `AbbrBlockprocessor`: Priority 16

### Text Handling
- Uses `AtomicString` to prevent further processing of abbreviation text
- Processes abbreviations in reverse order by length to handle nested cases
- Handles both element text content and tail text after elements

## Suggestions for Use

1. **Define abbreviations early** in your document for consistency
2. **Use meaningful definitions** that provide value to readers
3. **Consider performance** - many abbreviations can slow processing
4. **Test with complex documents** to ensure proper rendering
5. **Use the glossary feature** for site-wide abbreviation consistency

## Dependencies

- `xml.etree.ElementTree` for HTML element creation
- `re` for regular expression matching
- Parent Markdown classes: `Extension`, `BlockProcessor`, `Treeprocessor`

## License

BSD License - See original file header for full copyright information.