<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Admonition Extension for Python-Markdown

## Overview

The Admonition extension adds support for reStructuredText (rST)-style admonitions to Python-Markdown. Admonitions are specially marked "topics" that can appear anywhere in a document, typically used for warnings, notes, tips, and other highlighted content blocks.

## Purpose

This extension allows you to create visually distinct content blocks using a simple syntax:

```markdown
!!! note "Optional Title"
    This is the content of the admonition.
    It can span multiple lines.
```

This renders as a styled `<div>` with appropriate CSS classes for formatting.

## Key Components

### Classes

#### `AdmonitionExtension`

The main extension class that integrates the admonition functionality into Python-Markdown.

**Key Methods:**
- `extendMarkdown(md)`: Registers the extension and adds the `AdmonitionProcessor` to the block processors with priority 105.

#### `AdmonitionProcessor`

The core processor that handles parsing and rendering of admonition blocks.

**Important Attributes:**
- `CLASSNAME = 'admonition'`: Base CSS class for admonition blocks
- `CLASSNAME_TITLE = 'admonition-title'`: CSS class for admonition titles
- `RE`: Regular expression pattern that matches admonition syntax: `!!! type "title"`
- `RE_SPACES`: Pattern for normalizing multiple spaces in class names

**Key Methods:**

##### `parse_content(parent, block)`
- **Purpose**: Handles continuation of admonition content across multiple blocks
- **Returns**: Tuple of `(sibling_element, processed_block, remaining_content)`
- **Complex Logic**: Manages indentation and handles nested list scenarios

##### `test(parent, block)`
- **Purpose**: Determines if a block should be processed as an admonition
- **Returns**: `True` if block matches admonition pattern or continues existing admonition

##### `run(parent, blocks)`
- **Purpose**: Main processing method that converts markdown to HTML elements
- **Actions**:
  - Parses admonition syntax
  - Creates appropriate HTML structure
  - Handles titles and content
  - Manages block continuation

##### `get_class_and_title(match)`
- **Purpose**: Extracts CSS classes and title from regex match
- **Returns**: Tuple of `(css_class, title_or_none)`
- **Title Logic**:
  - No title provided → Uses capitalized class name
  - Empty title (`""`) → No title element created
  - Custom title → Uses provided text

## Syntax and Usage

### Basic Syntax
```markdown
!!! type
    Content goes here

!!! type "Custom Title"
    Content with custom title

!!! warning ""
    Content with no title
```

### Supported Features
- **Multiple word types**: `!!! note info` becomes class `admonition note info`
- **Custom titles**: Quoted strings after the type
- **Empty titles**: Use `""` to suppress title completely
- **Nested content**: Supports lists, code blocks, and other markdown elements
- **Multi-block content**: Properly indented content continues the admonition

## HTML Output

The extension generates HTML structure like:

```html
<div class="admonition note">
    <p class="admonition-title">Note</p>
    <p>Your content here</p>
</div>
```

## Technical Notes

### Processing Priority
- Registered with priority **105** in the block processor chain
- Processes before most other block elements but after higher-priority processors

### Indentation Handling
- Uses standard Markdown tab length for detecting content blocks
- Complex logic handles nested lists and maintains proper indentation context
- Supports continuation across multiple block boundaries

### Regular Expression Pattern
```python
r'(?:^|\n)!!! ?([\w\-]+(?: +[\w\-]+)*)(?: +"(.*?)")? *(?:\n|$)'
```
- Matches `!!!` at line start
- Captures type (alphanumeric, hyphens, spaces allowed)
- Optionally captures quoted title
- Handles line boundaries properly

## Usage Recommendations

1. **CSS Styling**: This extension only provides HTML structure. You'll need CSS rules for visual styling of `.admonition` and `.admonition-title` classes.

2. **Common Types**: While any type name works, common conventions include:
   - `note`, `tip`, `warning`, `danger`, `info`, `important`

3. **Indentation**: Ensure proper indentation (4 spaces or 1 tab) for multi-line content.

4. **Nesting**: Be careful with complex nested structures; test thoroughly with lists and code blocks.

## Dependencies

- Python-Markdown core
- `xml.etree.ElementTree` for HTML element creation
- Standard library `re` module for pattern matching