<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Definition List Extension for Python-Markdown

## Overview

This Python module extends Python-Markdown with the ability to parse definition lists. Definition lists are HTML `<dl>` elements that contain terms (`<dt>`) and their definitions (`<dd>`), commonly used for glossaries, dictionaries, or any term-definition pairs.

## Purpose

The extension allows Markdown to recognize and convert definition list syntax into proper HTML definition list elements. This is particularly useful for documentation, glossaries, and technical writing where term-definition pairs are common.

## Key Components

### Classes

#### `DefListProcessor`

The main block processor that handles definition list parsing.

**Key Attributes:**
- `RE`: Regular expression pattern `(^|\n)[ ]{0,3}:[ ]{1,3}(.*?)(\n|$)` that matches definition lines (lines starting with `:`)
- `NO_INDENT_RE`: Pattern `^[ ]{0,3}[^ :]` that matches non-indented content

**Key Methods:**
- `test(parent, block)`: Determines if a block contains definition list syntax
- `run(parent, blocks)`: Processes the definition list and creates the appropriate HTML structure

```python
def test(self, parent: etree.Element, block: str) -> bool:
    return bool(self.RE.search(block))
```

#### `DefListIndentProcessor`

Handles indented children of definition list items, extending the base `ListIndentProcessor`.

**Key Attributes:**
- `ITEM_TYPES`: List types including both `'dd'` and `'li'` 
- `LIST_TYPES`: Supported list types including `'dl'`, `'ol'`, and `'ul'`

**Key Methods:**
- `create_item(parent, block)`: Creates new `<dd>` elements and parses content

#### `DefListExtension`

The main extension class that integrates the processors into Python-Markdown.

**Key Methods:**
- `extendMarkdown(md)`: Registers the definition list processors with the Markdown parser

```python
def extendMarkdown(self, md):
    md.parser.blockprocessors.register(DefListIndentProcessor(md.parser), 'defindent', 85)
    md.parser.blockprocessors.register(DefListProcessor(md.parser), 'deflist', 25)
```

### Functions

#### `makeExtension(**kwargs)`

Factory function that creates and returns a `DefListExtension` instance.

## Usage Example

```markdown
Term 1
Term 2
:   Definition for terms 1 and 2

Another Term
:   Another definition
    
    This definition has multiple paragraphs.
```

This would generate:

```html
<dl>
<dt>Term 1</dt>
<dt>Term 2</dt>
<dd>Definition for terms 1 and 2</dd>
<dt>Another Term</dt>
<dd>
<p>Another definition</p>
<p>This definition has multiple paragraphs.</p>
</dd>
</dl>
```

## Implementation Notes

### Processing Logic

1. **Term Extraction**: Terms are extracted from lines preceding the definition (lines starting with `:`)
2. **State Management**: The processor handles both regular lists and "loose lists" (with paragraph formatting)
3. **Nesting Support**: The extension properly handles nested and continued definition lists
4. **Indentation**: Supports proper indentation handling for multi-line definitions

### Priority Levels

- `DefListProcessor`: Priority 25 (runs relatively early in block processing)
- `DefListIndentProcessor`: Priority 85 (runs later to handle indented content)

## Dependencies

- `xml.etree.ElementTree`: For HTML element tree manipulation
- `re`: For regular expression pattern matching
- Parent classes from `blockprocessors` module

## Notes and Suggestions

### Performance Considerations
- The regular expressions are compiled at class level for efficiency
- Block processing is done in a single pass where possible

### Extensibility
- The extension properly integrates with existing list processors
- Maintains compatibility with other Markdown extensions

### Edge Cases Handled
- Empty term lists (treated as regular paragraphs)
- Paragraphs that coincidentally start with colons
- Mixed list types and nesting
- Proper state management for loose vs. tight lists

## Documentation Reference

For detailed usage examples and syntax documentation, see the [official documentation](https://Python-Markdown.github.io/extensions/definition_lists).