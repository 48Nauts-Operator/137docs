<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# NL2BR Extension Documentation

## Overview

The `NL2BR` extension is a Python-Markdown extension that converts newline characters (`\n`) into HTML line breaks (`<br>` tags). This behavior mimics GitHub-flavored Markdown, where single newlines within paragraphs are treated as hard line breaks rather than being ignored.

## Purpose

By default, standard Markdown ignores single newlines within paragraphs and only creates new paragraphs when there are two consecutive newlines. This extension changes that behavior to make single newlines create `<br>` tags, providing more intuitive line breaking similar to what users expect from platforms like GitHub.

## Classes and Functions

### `Nl2BrExtension`

The main extension class that inherits from the base `Extension` class.

#### Methods

##### `extendMarkdown(md)`

Extends the Markdown parser by registering a new inline pattern processor.

**Parameters:**
- `md`: The Markdown instance to extend

**Functionality:**
- Creates a `SubstituteTagInlineProcessor` that matches newlines and replaces them with `<br>` tags
- Registers this processor with the name `'nl'` and priority `5`

```python
def extendMarkdown(self, md):
    """ Add a `SubstituteTagInlineProcessor` to Markdown. """
    br_tag = SubstituteTagInlineProcessor(BR_RE, 'br')
    md.inlinePatterns.register(br_tag, 'nl', 5)
```

### `makeExtension(**kwargs)`

Factory function that creates and returns an instance of `Nl2BrExtension`.

**Parameters:**
- `**kwargs`: Keyword arguments passed to the extension constructor

**Returns:**
- An instance of `Nl2BrExtension`

## Constants

### `BR_RE`

Regular expression pattern used to match newline characters.

```python
BR_RE = r'\n'
```

## Usage Example

```python
import markdown
from markdown.extensions import nl2br

# Using the extension
md = markdown.Markdown(extensions=['nl2br'])
text = "First line\nSecond line\nThird line"
html = md.convert(text)
# Result: <p>First line<br>Second line<br>Third line</p>
```

## Technical Notes

- **Priority Level**: The extension is registered with priority `5`, which determines when it runs relative to other inline patterns
- **Pattern Type**: Uses `SubstituteTagInlineProcessor` which directly substitutes matched patterns with HTML tags
- **Compatibility**: Works with Python-Markdown's extension system

## Suggestions and Considerations

- **Use Case**: Ideal for applications where you want GitHub-flavored Markdown line break behavior
- **Performance**: Lightweight extension with minimal performance impact
- **Conflicts**: May interact with other extensions that modify inline patterns; test thoroughly when combining with other extensions
- **Alternative**: Consider whether this behavior is desired for your use case, as it changes standard Markdown behavior

## License and Attribution

- Original code: Copyright 2011 Brian Neal
- Modifications: Copyright 2011-2014 The Python Markdown Project  
- License: BSD License

## References

- [Official Documentation](https://Python-Markdown.github.io/extensions/nl2br)
- [BSD License](https://opensource.org/licenses/bsd-license.php)