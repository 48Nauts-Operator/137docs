<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# NL2BR Extension Documentation

## Overview

The `NL2BR` extension is a Python-Markdown extension that converts newline characters (`\n`) into HTML line breaks (`<br>` tags). This behavior mimics GitHub-flavored Markdown, where single newlines are treated as hard breaks rather than being ignored.

## Purpose

In standard Markdown, single newlines within a paragraph are typically ignored, and you need two newlines to create a new paragraph. This extension changes that behavior to make every newline create a visible line break, which is useful for:

- Poetry or verse formatting
- Address blocks
- Lists where line breaks matter
- Any content where preserving single newlines is important

## Components

### Constants

- **`BR_RE`**: Regular expression pattern `r'\n'` that matches newline characters

### Classes

#### `Nl2BrExtension`

The main extension class that inherits from the base `Extension` class.

**Methods:**

- **`extendMarkdown(md)`**: Configures the Markdown processor to include the newline-to-break conversion
  - Creates a `SubstituteTagInlineProcessor` that replaces newlines with `<br>` tags
  - Registers the processor with priority level 5 under the name 'nl'

### Functions

#### `makeExtension(**kwargs)`

Factory function that creates and returns an instance of `Nl2BrExtension`.

```python
def makeExtension(**kwargs):
    return Nl2BrExtension(**kwargs)
```

## Usage Example

```python
import markdown

# Using the extension
md = markdown.Markdown(extensions=['nl2br'])

# Input text with newlines
text = """First line
Second line
Third line"""

# Convert to HTML
html = md.convert(text)
# Output: <p>First line<br>Second line<br>Third line</p>
```

## Technical Details

- **Priority Level**: The processor is registered with priority 5, which determines when it runs relative to other inline processors
- **Pattern Type**: Uses `SubstituteTagInlineProcessor` for simple tag substitution
- **Inline Processing**: Operates at the inline level, meaning it processes content within paragraphs and other block elements

## Notes and Considerations

### ‚ö†Ô∏è Important Notes

- This extension changes fundamental Markdown behavior and may not be suitable for all use cases
- Content created with this extension may not render correctly in standard Markdown processors
- Consider the impact on existing Markdown content before implementing

### üí° Suggestions

- **Use Case Specific**: Best suited for content where line breaks are semantically important
- **Testing**: Thoroughly test with existing content to ensure desired behavior
- **Documentation**: Document usage for content creators to avoid confusion
- **Fallback**: Consider providing a way to disable the extension for specific content blocks

## License

- Original code: Copyright 2011 Brian Neal
- Modifications: Copyright 2011-2014 The Python Markdown Project
- License: BSD License

## References

- [Official Documentation](https://Python-Markdown.github.io/extensions/nl2br)
- [GitHub-flavored Markdown Specification](https://github.github.com/gfm/)