<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Sane Lists Extension for Python-Markdown

## Overview

This extension modifies the default behavior of lists in Python-Markdown to implement more predictable and "sane" list processing. The extension addresses issues with how ordered and unordered lists interact with each other in standard Markdown processing.

## Purpose

The Sane Lists extension solves common problems with Markdown list behavior by:

- Preventing ordered lists (`ol`) and unordered lists (`ul`) from being treated as siblings
- Disabling lazy list behavior for ordered lists
- Ensuring more consistent and predictable list rendering

## Key Classes and Functions

### `SaneOListProcessor`

Extends the standard `OListProcessor` to implement stricter ordered list handling.

**Key Features:**
- **`SIBLING_TAGS = ['ol']`**: Only allows other ordered lists as siblings (excludes `ul`)
- **`LAZY_OL = False`**: Disables lazy list behavior for more predictable formatting
- **Custom regex pattern**: Uses a refined regular expression for matching ordered list items

```python
# Example regex pattern used internally:
r'^[ ]{0,%d}((\d+\.))[ ]+(.*)' % (self.tab_length - 1)
```

### `SaneUListProcessor`

Extends the standard `UListProcessor` to implement stricter unordered list handling.

**Key Features:**
- **`SIBLING_TAGS = ['ul']`**: Only allows other unordered lists as siblings (excludes `ol`)
- **Custom regex pattern**: Uses a refined regular expression for matching unordered list items

```python
# Example regex pattern used internally:
r'^[ ]{0,%d}(([*+-]))[ ]+(.*)' % (self.tab_length - 1)
```

### `SaneListExtension`

The main extension class that registers the custom list processors.

**Methods:**
- **`extendMarkdown(md)`**: Registers the sane list processors with the Markdown parser
  - Registers `SaneOListProcessor` with priority 40
  - Registers `SaneUListProcessor` with priority 30

### `makeExtension(**kwargs)`

Factory function for creating extension instances.

## Usage

To use this extension with Python-Markdown:

```python
import markdown

# Method 1: Using the extension name
md = markdown.Markdown(extensions=['sane_lists'])

# Method 2: Using the makeExtension function
from markdown.extensions.sane_lists import makeExtension
md = markdown.Markdown(extensions=[makeExtension()])

# Convert markdown text
result = md.convert(your_markdown_text)
```

## Technical Notes

### Registration Priorities
- **Ordered Lists**: Priority 40
- **Unordered Lists**: Priority 30

These priorities ensure proper processing order within the Markdown parser.

### Regular Expression Patterns
Both processors use tab-length-aware regular expressions that respect the configured indentation settings of the Markdown parser.

## Important Considerations

- **Breaking Change**: This extension changes default Markdown behavior and may affect existing documents
- **Sibling Separation**: Mixed list types will no longer be treated as continuous lists
- **Lazy Lists**: Ordered lists require more explicit formatting (lazy behavior disabled)

## Documentation Reference

For detailed documentation and examples, see: [Python-Markdown Sane Lists Documentation](https://Python-Markdown.github.io/extensions/sane_lists)

## License

This extension is licensed under the [BSD License](https://opensource.org/licenses/bsd-license.php).