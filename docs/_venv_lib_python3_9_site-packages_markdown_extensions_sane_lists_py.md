<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Sane List Extension for Python-Markdown

## Overview

This Python module provides a "sane lists" extension for Python-Markdown that modifies the default list behavior to be more predictable and intuitive. The extension addresses common issues with how Python-Markdown handles ordered and unordered lists by preventing unexpected list merging and disabling lazy list numbering.

## Purpose

The standard Python-Markdown list processing can sometimes produce unexpected results when mixing different list types or when list numbering doesn't start from 1. This extension provides a more predictable alternative by:

- Preventing ordered lists (`ol`) and unordered lists (`ul`) from being treated as siblings
- Disabling lazy numbering in ordered lists
- Ensuring stricter list item recognition patterns

## Classes and Functions

### `SaneOListProcessor`

**Inherits from:** `OListProcessor`

**Purpose:** Handles ordered list processing with sane behavior modifications.

**Key Features:**
- **`SIBLING_TAGS = ['ol']`** - Only treats other ordered lists as siblings, excluding unordered lists
- **`LAZY_OL = False`** - Disables lazy list behavior where numbering can be inconsistent
- **Custom `CHILD_RE` pattern** - Uses a stricter regex pattern for recognizing ordered list items

```python
# Pattern matches: optional spaces + digits + period + space + content
self.CHILD_RE = re.compile(r'^[ ]{0,%d}((\d+\.))[ ]+(.*)' % (self.tab_length - 1))
```

### `SaneUListProcessor`

**Inherits from:** `UListProcessor`

**Purpose:** Handles unordered list processing with sane behavior modifications.

**Key Features:**
- **`SIBLING_TAGS = ['ul']`** - Only treats other unordered lists as siblings, excluding ordered lists
- **Custom `CHILD_RE` pattern** - Uses a stricter regex pattern for recognizing unordered list items

```python
# Pattern matches: optional spaces + list marker (*+-) + space + content
self.CHILD_RE = re.compile(r'^[ ]{0,%d}(([*+-]))[ ]+(.*)' % (self.tab_length - 1))
```

### `SaneListExtension`

**Inherits from:** `Extension`

**Purpose:** Main extension class that registers the sane list processors with Python-Markdown.

**Methods:**
- **`extendMarkdown(md)`** - Registers the custom processors, replacing the default list processors

**Processor Registration:**
- `SaneOListProcessor` registered with priority 40
- `SaneUListProcessor` registered with priority 30

### `makeExtension(**kwargs)`

**Purpose:** Factory function to create and return a `SaneListExtension` instance.

**Usage:** Standard Python-Markdown extension creation pattern.

## Usage Example

```python
import markdown

# Using the extension
md = markdown.Markdown(extensions=['sane_lists'])
result = md.convert(your_markdown_text)

# Or using the factory function
from markdown.extensions.sane_lists import makeExtension
extension = makeExtension()
```

## Key Differences from Standard Lists

| Aspect | Standard Behavior | Sane Lists Behavior |
|--------|------------------|-------------------|
| **Mixed List Types** | Can merge `ol` and `ul` as siblings | Keeps `ol` and `ul` separate |
| **Lazy Numbering** | Enabled for ordered lists | Disabled |
| **List Recognition** | More permissive patterns | Stricter regex patterns |

## Notes and Suggestions

- **Use Case:** Ideal for documents where you need predictable list behavior and want to avoid unexpected list merging
- **Performance:** Minimal performance impact as it only modifies existing processor behavior
- **Compatibility:** Designed to work with Python-Markdown's standard architecture
- **Documentation:** Full documentation available at the [official Python-Markdown documentation](https://Python-Markdown.github.io/extensions/sane_lists)

## License

This extension is licensed under the [BSD License](https://opensource.org/licenses/bsd-license.php).

**Original Author:** Waylan Limberg (2011)  
**Maintained by:** The Python Markdown Project (2011-2014)