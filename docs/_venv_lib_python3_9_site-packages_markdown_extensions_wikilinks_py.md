<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# WikiLinks Extension Documentation

## Overview

The WikiLinks extension for Python-Markdown converts `[[WikiLinks]]` syntax into HTML anchor tags with relative links. This extension enables wiki-style linking within Markdown documents, automatically transforming bracketed text into clickable links.

## Purpose

- **Convert wiki-style links**: Transforms `[[Page Name]]` syntax into HTML `<a>` tags
- **Generate clean URLs**: Automatically formats page names into URL-friendly formats
- **Provide customization**: Allows configuration of base URLs, CSS classes, and URL building logic
- **Support metadata**: Can read configuration from document metadata

## Key Components

### Functions

#### `build_url(label: str, base: str, end: str) -> str`

Constructs a URL from the given components.

**Parameters:**
- `label`: The wiki link text (e.g., "My Page Name")
- `base`: Base URL prefix (default: "/")
- `end`: URL suffix (default: "/")

**Behavior:**
- Replaces spaces with underscores
- Handles multiple spaces and mixed space/underscore combinations
- Returns formatted URL string

**Example:**
```python
build_url("My Page Name", "/wiki/", ".html")
# Returns: "/wiki/My_Page_Name.html"
```

#### `makeExtension(**kwargs)`

Factory function to create a `WikiLinkExtension` instance.

### Classes

#### `WikiLinkExtension(Extension)`

Main extension class that integrates with Python-Markdown.

**Configuration Options:**
- `base_url`: String prepended to URLs (default: "/")
- `end_url`: String appended to URLs (default: "/")
- `html_class`: CSS class for generated links (default: "wikilink")
- `build_url`: Custom URL building function (default: `build_url`)

**Key Methods:**
- `extendMarkdown(md)`: Registers the wiki link processor with Markdown

#### `WikiLinksInlineProcessor(InlineProcessor)`

Processes wiki link patterns and generates HTML elements.

**Pattern:** `\[\[([\w0-9_ -]+)\]\]`
- Matches double square brackets containing alphanumeric characters, spaces, hyphens, and underscores

**Key Methods:**
- `handleMatch(m, data)`: Converts matched wiki links to HTML anchor elements
- `_getMeta()`: Retrieves configuration from document metadata or extension config

## Usage Examples

### Basic Usage

```python
import markdown

md = markdown.Markdown(extensions=['wikilinks'])
result = md.convert('Check out [[My Page]] for more info.')
# Output: <p>Check out <a class="wikilink" href="/My_Page/">My Page</a> for more info.</p>
```

### Custom Configuration

```python
md = markdown.Markdown(extensions=[
    'wikilinks'
], extension_configs={
    'wikilinks': {
        'base_url': '/wiki/',
        'end_url': '.html',
        'html_class': 'wiki-link'
    }
})
```

### Using Metadata

```markdown
wiki_base_url: /docs/
wiki_end_url: .md
wiki_html_class: doc-link

This is a [[Sample Page]] link.
```

## Technical Notes

### Regular Expression Pattern
- **Pattern**: `\[\[([\w0-9_ -]+)\]\]`
- **Supports**: Letters, numbers, spaces, underscores, and hyphens
- **Priority**: Registered at priority 75 in inline patterns

### URL Cleaning
The `build_url` function performs the following transformations:
- Multiple spaces → single underscore
- Leading/trailing spaces around underscores → removed
- Single spaces → underscores

### Metadata Integration
The extension checks for these metadata keys:
- `wiki_base_url`
- `wiki_end_url` 
- `wiki_html_class`

## Recommendations

### Best Practices
- Use descriptive page names in wiki links
- Consider URL structure when setting `base_url` and `end_url`
- Apply consistent CSS styling through the `html_class` option

### Customization Options
- **Custom URL Builder**: Provide your own `build_url` function for specialized URL formatting
- **CSS Integration**: Use the `html_class` config to integrate with your site's styling
- **Dynamic Configuration**: Leverage metadata for per-document configuration

### Limitations
- Only supports basic alphanumeric characters and common punctuation
- No support for nested brackets or complex link syntax
- URL cleaning is simple and may not handle all edge cases

## Dependencies

- `xml.etree.ElementTree`: For HTML element creation
- `re`: For pattern matching and text processing
- Python-Markdown framework components