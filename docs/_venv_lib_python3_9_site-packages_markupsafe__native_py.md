<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# HTML Escape Utility

## Overview

This file contains a utility function for escaping HTML special characters in strings. The purpose is to safely convert potentially dangerous characters into their HTML entity equivalents, preventing issues like XSS (Cross-Site Scripting) attacks when displaying user-generated content in web applications.

## Functions

### `_escape_inner(s: str, /) -> str`

**Purpose**: Escapes HTML special characters in a given string by replacing them with their corresponding HTML entities.

**Parameters**:
- `s` (str): The input string to be escaped
- The `/` in the function signature indicates that this parameter is positional-only

**Returns**:
- `str`: The escaped string with HTML entities replacing special characters

**Character Mappings**:
| Original Character | HTML Entity | Description |
|-------------------|-------------|-------------|
| `&` | `&amp;` | Ampersand |
| `>` | `&gt;` | Greater than |
| `<` | `&lt;` | Less than |
| `'` | `&#39;` | Single quote (apostrophe) |
| `"` | `&#34;` | Double quote |

**Example Usage**:
```python
# Example input with HTML special characters
dangerous_input = '<script>alert("Hello & goodbye")</script>'

# Escaped output
safe_output = _escape_inner(dangerous_input)
print(safe_output)
# Output: &lt;script&gt;alert(&#34;Hello &amp; goodbye&#34;)&lt;/script&gt;
```

## Implementation Notes

- **Order Matters**: The ampersand (`&`) is escaped first to prevent double-escaping of the HTML entities that follow
- **Positional-Only Parameter**: The `/` syntax ensures the function can only be called with positional arguments, not keyword arguments
- **Private Function**: The leading underscore (`_`) indicates this is intended as an internal/private function
- **Method Chaining**: Uses method chaining for clean, readable code that applies all replacements in sequence

## Security Considerations

- This function helps prevent XSS attacks by neutralizing HTML special characters
- Essential for safely displaying user input in web applications
- Should be used whenever untrusted content is rendered in HTML contexts

## Suggestions

1. **Error Handling**: Consider adding input validation to handle `None` values:
   ```python
   def _escape_inner(s: str, /) -> str:
       if s is None:
           return ""
       # ... rest of implementation
   ```

2. **Performance**: For high-volume applications, consider using `str.translate()` with a translation table for better performance

3. **Documentation**: Add a docstring to explain the function's purpose and usage:
   ```python
   def _escape_inner(s: str, /) -> str:
       """Escape HTML special characters in a string.
       
       Args:
           s: String to escape
           
       Returns:
           String with HTML entities replacing special characters
       """
   ```

4. **Testing**: Ensure comprehensive unit tests cover edge cases like empty strings, strings with no special characters, and strings with multiple consecutive special characters.