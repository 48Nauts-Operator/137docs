<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Debug Information Module

## Overview

This Python module provides functionality to collect and display comprehensive debug and environment information for the `mkdocs-autorefs` package. It's designed to help with troubleshooting by gathering system details, Python interpreter information, installed packages, and relevant environment variables.

## Purpose

The module serves as a diagnostic tool that can be executed standalone to output formatted debug information, which is useful for:

- Bug reporting and troubleshooting
- Environment verification
- System compatibility checking
- Development and debugging workflows

## Classes

### `_Variable`

```python
@dataclass
class _Variable:
    name: str    # Variable name
    value: str   # Variable value
```

A dataclass that represents an environment variable with its name and value.

### `_Package`

```python
@dataclass
class _Package:
    name: str      # Package name
    version: str   # Package version
```

A dataclass that stores information about an installed Python package.

### `_Environment`

```python
@dataclass
class _Environment:
    interpreter_name: str           # Python interpreter name
    interpreter_version: str        # Python interpreter version
    interpreter_path: str          # Path to Python executable
    platform: str                 # Operating System
    packages: list[_Package]       # Installed packages
    variables: list[_Variable]     # Environment variables
```

A comprehensive dataclass that aggregates all environment information into a single structure.

## Functions

### `_interpreter_name_version() -> tuple[str, str]`

Retrieves the Python interpreter name and version information.

- **Returns**: A tuple containing interpreter name and version string
- **Fallback**: Returns `("", "0.0.0")` if implementation details are unavailable

### `_get_version(dist: str = "mkdocs-autorefs") -> str`

Retrieves the version of a specified Python distribution/package.

- **Parameters**:
  - `dist`: Distribution name (defaults to "mkdocs-autorefs")
- **Returns**: Version string or "0.0.0" if package not found
- **Error Handling**: Catches `PackageNotFoundError` and returns default version

### `_get_debug_info() -> _Environment`

Collects comprehensive environment information including:

- Python interpreter details
- System platform information
- Relevant environment variables (PYTHONPATH and MKDOCS_AUTOREFS_*)
- Installed package versions

- **Returns**: An `_Environment` object with all collected information

### `_print_debug_info() -> None`

Formats and prints debug information in a readable markdown-style format.

**Output includes**:
- System platform
- Python interpreter details
- Environment variables
- Installed package versions

## Usage

### As a Standalone Script

```bash
python debug_module.py
```

### As an Imported Module

```python
from debug_module import _get_debug_info, _print_debug_info

# Get debug info as structured data
env_info = _get_debug_info()

# Print formatted debug information
_print_debug_info()
```

## Example Output

```
- __System__: Linux-5.4.0-74-generic-x86_64-with-glibc2.31
- __Python__: cpython 3.9.7 (/usr/bin/python3)
- __Environment variables__:
  - `PYTHONPATH`: `/home/user/projects`
- __Installed packages__:
  - `mkdocs-autorefs` v0.4.1
```

## Notes and Suggestions

### Security Considerations
- Be cautious when sharing debug output as it may contain sensitive environment variable values
- Consider filtering sensitive variables before output in production environments

### Extensibility
- The `packages` list in `_get_debug_info()` can be extended to include additional relevant packages
- Environment variable filtering can be customized by modifying the `variables` list

### Error Handling
- The module gracefully handles missing packages and environment variables
- Consider adding logging for debugging purposes in production use

### Performance
- Environment variable collection uses list comprehension with walrus operator for efficiency
- Package version lookup is cached by the `importlib.metadata` module