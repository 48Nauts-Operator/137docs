<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# MkDocs Config Options Module

This module provides configuration option types for MkDocs, extending the base configuration system with specialized validators and converters for different types of configuration values.

## Overview

The module defines numerous configuration option classes that handle validation, type conversion, and post-processing of configuration values. These are used throughout MkDocs to ensure configuration files are properly validated and processed.

## Key Classes

### Core Configuration Options

#### `SubConfig[SomeConfig]`
A configuration option that contains a nested configuration structure.

```python
# New style (recommended for MkDocs 1.4+)
SubConfig(MyConfigClass, validate=True)

# Legacy style
SubConfig(config_option1, config_option2, validate=False)
```

**Features:**
- Supports type-safe nested configurations
- Validation can be enabled/disabled
- Backward compatible with legacy configuration patterns

#### `PropagatingSubConfig[SomeConfig]`
Extends `SubConfig` to automatically propagate matching keys from parent to child configurations.

#### `OptionallyRequired[T]`
**⚠️ Soft-deprecated** - Base class for config options with default values and required validation.

### Collection Options

#### `ListOfItems[T]`
Validates a homogeneous list of items using a specified option type.

```python
# Example: List of integers
ListOfItems(Type(int))  # Valid: [1, 2, 3]

# Example: List of file paths
ListOfItems(File(exists=True))
```

#### `DictOfItems[T]`
Validates a dictionary where all values are of the same type.

```python
# Example: Dictionary of integers
DictOfItems(Type(int))  # Valid: {"a": 1, "b": 2}
```

#### `ConfigItems` (Deprecated)
**⚠️ Deprecated** - Use `ListOfItems(SubConfig(...))` instead.

### Basic Type Validators

#### `Type[T]`
Validates against Python types with optional length constraints.

```python
Type(str)  # Any string
Type(int)  # Any integer
Type(str, length=10)  # String of exactly 10 characters
```

#### `Choice[T]`
Validates against a predefined set of choices.

```python
Choice(['option1', 'option2', 'option3'], default='option1')
```

#### `Optional[T]`
Wraps another option to make `None` values acceptable.

```python
Optional(Type(str))  # Accepts string or None
```

### Network and URL Options

#### `IpAddress`
Validates IP address and port combinations.

```python
# Valid formats:
# "localhost:8000"
# "127.0.0.1:8080" 
# "[::1]:8000"
```

#### `URL`
Validates URLs with required schemes.

```python
URL(is_dir=True)  # Ensures URLs end with '/' for directories
```

### File System Options

#### `FilesystemObject`
Base class for file system path validators.

```python
FilesystemObject(exists=True)  # Validates path exists
```

#### `Dir`
Validates directory paths.

```python
Dir(exists=True)  # Must be existing directory
```

#### `File`
Validates file paths.

```python
File(exists=True)  # Must be existing file
```

#### `DocsDir`
Special directory validator that ensures the docs directory is not the parent of the config file.

#### `SiteDir`
Validates that site and docs directories don't contain each other.

### Specialized Options

#### `Theme`
Validates and builds theme configurations.

```python
# Accepts:
# - String: "material"
# - Dict: {"name": "material", "custom_dir": "custom"}
```

#### `Nav`
Validates navigation structure.

```python
# Valid nav structures:
# - List of strings: ["index.md", "about.md"]
# - Nested structure: [{"Section": ["page1.md", "page2.md"]}]
```

#### `MarkdownExtensions`
Validates Markdown extension configurations.

```python
# Accepts:
# - List: ["toc", "tables"]
# - Dict: {"toc": {"permalink": True}, "tables": {}}
```

#### `Plugins`
Validates and loads plugin configurations with support for namespaced plugins.

```python
# Supports theme-namespaced plugins like "material/search"
# Caches plugin instances for performance
```

#### `Deprecated`
Handles deprecated configuration options with warnings and migration.

```python
Deprecated(
    moved_to="new_option",
    message="This option is deprecated"
)
```

### Utility Options

#### `Private[T]`
Prevents user configuration - only for programmatic use.

#### `PathSpec`
Validates gitignore-style path patterns.

#### `ExtraScript`
Handles extra JavaScript configurations with type detection.

## Important Notes

### Type Safety
- Many options support generic type parameters for better type checking
- Use the new `SubConfig(ConfigClass)` syntax for type-safe nested configs

### Validation Phases
Configuration options go through three phases:
1. **pre_validation**: Setup and preparation
2. **run_validation**: Core validation logic  
3. **post_validation**: Cross-option validation and cleanup

### Deprecation Warnings
Several options are deprecated:
- `OptionallyRequired` - Use modern base classes instead
- `ConfigItems` - Use `ListOfItems(SubConfig(...))` instead
- `RepoURL` - No longer used in MkDocs

### Error Handling
- All validation errors raise `ValidationError`
- Warnings are collected in the `warnings` attribute
- Plugin loading errors include full tracebacks for debugging

## Usage Examples

```python
from mkdocs.config import config_options

# Basic type validation
site_name = config_options.Type(str, required=True)

# File path validation  
docs_dir = config_options.Dir(exists=True, default='docs')

# Choice validation
theme = config_options.Choice(['material', 'readthedocs'], default='material')

# List validation
plugins = config_options.ListOfItems(config_options.SubConfig(PluginConfig))

# Optional validation