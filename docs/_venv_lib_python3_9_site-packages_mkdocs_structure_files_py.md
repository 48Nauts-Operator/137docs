<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# MkDocs Files Module Documentation

This module handles file management and organization for MkDocs, providing functionality to collect, process, and manage files in the documentation site.

## Purpose

The `mkdocs.structure.files` module is responsible for:
- Collecting files from the documentation source directory
- Managing file inclusion/exclusion based on patterns
- Handling file copying and processing
- Organizing different types of files (documentation, static, media)
- Supporting both physical and virtual (generated) files

## Key Classes

### `InclusionLevel` (Enum)

Defines the inclusion status of files in the documentation site.

```python
class InclusionLevel(enum.Enum):
    EXCLUDED = -3      # File excluded, not processed
    DRAFT = -2         # Excluded from final site, available in serve mode
    NOT_IN_NAV = -1    # Part of site but doesn't produce nav warnings
    UNDEFINED = 0      # Status needs to be computed
    INCLUDED = 1       # Fully included in the site
```

**Key Methods:**
- `is_included()` - Returns True if file should be in final site
- `is_excluded()` - Returns True if file is excluded
- `is_in_serve()` - Returns True if file available during development
- `is_in_nav()` - Returns True if file should appear in navigation

### `Files` Class

A collection container for managing multiple `File` objects.

```python
files = Files([file1, file2, file3])
```

**Key Properties:**
- `src_uris` - Mapping of source URIs to File objects
- `src_paths` - *(Deprecated)* Mapping of source paths to File objects

**Key Methods:**

#### File Management
- `append(file)` - Add a file to the collection
- `remove(file)` - Remove a file from the collection  
- `get_file_from_path(path)` - Retrieve file by source path

#### File Filtering
- `documentation_pages()` - Get all Markdown documentation files
- `static_pages()` - Get HTML/XML/JSON static files
- `media_files()` - Get non-documentation files (images, etc.)
- `javascript_files()` - Get JavaScript files
- `css_files()` - Get CSS files

#### Operations
- `copy_static_files(dirty=False)` - Copy non-documentation files to destination
- `add_files_from_theme(env, config)` - Add theme template files

### `File` Class

Represents a single file in the MkDocs project, handling both physical and virtual files.

```python
# Physical file
file = File("docs/index.md", "/path/to/docs", "/path/to/site", True)

# Virtual file
file = File.generated(config, "virtual.md", content="# Virtual Content")
```

**Key Properties:**

#### Paths and URIs
- `src_uri` - Source path relative to docs directory (always `/`-separated)
- `dest_uri` - Destination path relative to site directory  
- `abs_src_path` - Absolute source file path (OS-specific)
- `abs_dest_path` - Absolute destination file path (OS-specific)
- `url` - Web URL for the file

#### Content Access
- `content_bytes` - File content as bytes
- `content_string` - File content as UTF-8 string

#### Metadata
- `name` - Filename without extension
- `inclusion` - File's inclusion level
- `generated_by` - Plugin that generated this file (if virtual)
- `edit_uri` - Relative path for edit links

**Key Methods:**

#### File Operations
- `copy_file(dirty=False)` - Copy file to destination
- `is_modified()` - Check if source is newer than destination
- `url_relative_to(other)` - Get relative URL to another file

#### File Type Detection
- `is_documentation_page()` - True for Markdown files
- `is_static_page()` - True for HTML/XML/JSON files  
- `is_media_file()` - True for other file types
- `is_javascript()` - True for JavaScript files
- `is_css()` - True for CSS files

#### Virtual File Creation
```python
# Content-backed virtual file
file = File.generated(config, "api.md", content="# API Docs")

# File-backed virtual file  
file = File.generated(config, "temp.md", abs_src_path="/tmp/temp.md")
```

## Key Functions

### `get_files(config: MkDocsConfig) -> Files`

Main function to collect all files from the documentation directory.

```python
files = get_files(config)
```

**Process:**
1. Walks the `docs_dir` recursively
2. Creates `File` objects for each discovered file
3. Applies inclusion/exclusion rules
4. Handles conflicts (e.g., README.md vs index.md)
5. Returns organized `Files` collection

### `set_exclusions(files: Iterable[File], config: MkDocsConfig)`

Applies inclusion/exclusion patterns to files based on configuration.

**Configuration Options:**
- `exclude_docs` - Files to exclude completely
- `draft_docs` - Files to treat as drafts
- `not_in_nav` - Files to exclude from navigation

### `file_sort_key(file: File)`

Provides consistent sorting for files (index files first, directories last).

```python
sorted_files = sorted(file_list, key=file_sort_key)
```

## Usage Examples

### Basic File Collection
```python
from mkdocs.structure.files import get_files

# Get all files from docs directory
files = get_files(config)

# Work with documentation pages only
for page_file in files.documentation_pages():
    print(f"Processing: {page_file.src_uri}")
```

### Creating Virtual Files
```python
# Generate API documentation
api_content = generate_api_docs()
virtual_file = File.generated(
    config, 
    "api/reference.md", 
    content=api_content,
    inclusion=InclusionLevel.INCLUDED
)
files.append(virtual_file)
```

### File Filtering
```python
# Copy