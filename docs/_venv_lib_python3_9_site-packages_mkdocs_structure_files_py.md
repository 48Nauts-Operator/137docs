<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# MkDocs Files Module Documentation

## Overview

This module provides file management functionality for MkDocs, a static site generator. It handles the discovery, organization, and processing of source files in a documentation project, managing their transformation from source to destination paths.

## Key Components

### InclusionLevel Enum

Defines the inclusion status of files in the MkDocs build process:

```python
class InclusionLevel(enum.Enum):
    EXCLUDED = -3      # File excluded from processing
    DRAFT = -2         # Excluded from final site, but available during serve
    NOT_IN_NAV = -1    # Part of site but doesn't produce nav warnings  
    UNDEFINED = 0      # Status needs to be computed
    INCLUDED = 1       # Fully included in the site
```

**Key Methods:**
- `is_included()`: Returns True if file should be in the final site
- `is_excluded()`: Returns True if file should be excluded
- `is_in_serve()`: Returns True if file should be available during development
- `is_in_nav()`: Returns True if file should appear in navigation

### Files Class

A collection container for managing multiple `File` objects.

```python
class Files:
    def __init__(self, files: Iterable[File]) -> None
```

**Important Properties:**
- `src_uris`: Mapping of source URIs to File objects
- `src_paths`: Deprecated mapping of source paths to File objects

**Key Methods:**

#### File Management
- `append(file: File)`: Add a file to the collection
- `remove(file: File)`: Remove a file from the collection  
- `get_file_from_path(path: str)`: Retrieve file by source path

#### File Type Filtering
- `documentation_pages()`: Returns Markdown documentation files
- `static_pages()`: Returns HTML/XML/JSON static files
- `media_files()`: Returns non-documentation files (images, etc.)
- `javascript_files()`: Returns JavaScript files
- `css_files()`: Returns CSS files

#### File Operations
- `copy_static_files(dirty=False)`: Copy static files to destination
- `add_files_from_theme()`: Add theme files to collection

### File Class

Represents an individual file in the MkDocs project, handling both physical and virtual files.

```python
class File:
    def __init__(self, path: str, src_dir: str | None, dest_dir: str, 
                 use_directory_urls: bool, *, dest_uri: str | None = None,
                 inclusion: InclusionLevel = InclusionLevel.UNDEFINED)
```

**Key Properties:**

#### Path Properties
- `src_uri`: Source path (always '/'-separated)
- `dest_uri`: Destination path (always '/'-separated)  
- `abs_src_path`: Absolute source file path
- `abs_dest_path`: Absolute destination file path
- `url`: Web URL for the file

#### Configuration
- `use_directory_urls`: Whether to use directory-style URLs
- `inclusion`: File inclusion status
- `generated_by`: Plugin that generated this file (if any)

#### Content Access
- `content_bytes`: File content as bytes
- `content_string`: File content as string (UTF-8)

**Important Methods:**

#### File Operations
```python
def copy_file(self, dirty: bool = False) -> None
    """Copy source file to destination"""

def is_modified(self) -> bool
    """Check if source is newer than destination"""
```

#### File Type Detection
```python
def is_documentation_page(self) -> bool
    """True if file is Markdown documentation"""

def is_static_page(self) -> bool  
    """True if file is HTML/XML/JSON"""

def is_media_file(self) -> bool
    """True if file is not documentation or static"""
```

#### Virtual File Creation
```python
@classmethod
def generated(cls, config: MkDocsConfig, src_uri: str, 
              *, content: str | bytes) -> File
    """Create virtual file with in-memory content"""
```

## Utility Functions

### get_files(config: MkDocsConfig) -> Files
Main function to discover and collect all files from the documentation directory.

```python
files = get_files(config)
```

### set_exclusions(files: Iterable[File], config: MkDocsConfig) -> None
Applies exclusion patterns from configuration to determine which files to include/exclude.

## Usage Examples

### Basic File Collection
```python
from mkdocs.structure.files import get_files

# Get all files from docs directory
files = get_files(config)

# Filter for documentation pages
docs = files.documentation_pages()

# Get specific file
readme = files.get_file_from_path('README.md')
```

### Creating Virtual Files
```python
# Create in-memory file
virtual_file = File.generated(
    config, 
    'generated/data.json',
    content='{"key": "value"}'
)
files.append(virtual_file)
```

### Working with File Content
```python
# Read file content
content = file.content_string  # As string
raw_bytes = file.content_bytes  # As bytes

# Modify content
file.content_string = "# New Content\nModified file"
```

## Notes and Recommendations

### Path Handling
- Use `src_uri` and `dest_uri` properties instead of `src_path`/`dest_path` for cross-platform compatibility
- Paths use forward slashes internally regardless of OS

### Content Access
- Always use `content_bytes`/`content_string` to read file content
- Don't directly access `abs_src_path` for reading files

### File Exclusion
- Files can be excluded at multiple levels (excluded, draft, not in nav)
- Use appropriate inclusion filters when processing files

### Virtual Files
- Virtual files (generated content) don't have physical source paths
- They must specify content either in-memory or via temporary files

### Deprecation Warnings
- Several properties and methods are marked as deprecated
- Use newer alternatives where available (e.g., `src_uris` instead of `src_paths`)

This module is central to MkDocs' file processing pipeline and handles the complex mapping