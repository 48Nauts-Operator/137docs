<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Navigation Module Documentation

## Overview

The `navigation.py` module is responsible for building and managing the navigation structure for MkDocs sites. It processes navigation configuration from the MkDocs config file and creates a hierarchical navigation tree containing sections, pages, and external links.

## Purpose

This module:
- Converts navigation configuration into structured navigation objects
- Manages the relationship between pages, sections, and links
- Handles navigation item ordering and hierarchy
- Provides navigation state management (active sections, previous/next links)
- Validates navigation references and reports missing or invalid links

## Core Classes

### Navigation

The main navigation container that holds the complete site navigation structure.

```python
class Navigation:
    def __init__(self, items: list, pages: list[Page]) -> None:
```

**Key Attributes:**
- `items`: Nested list containing the full navigation hierarchy (sections, pages, links)
- `pages`: Flat list of all pages in navigation order
- `homepage`: Reference to the homepage page object (if exists)

**Features:**
- Automatically identifies and sets the homepage
- Provides iteration and length operations
- String representation for debugging

### Section

Represents a navigation section that can contain child items (pages, links, or nested sections).

```python
class Section(StructureItem):
    def __init__(self, title: str, children: list[StructureItem]) -> None:
```

**Key Attributes:**
- `title`: Display title of the section
- `children`: List of child navigation items
- `active`: Boolean indicating if section contains the current page

**Features:**
- Active state propagates to parent sections
- Type identification properties (`is_section`, `is_page`, `is_link`)
- Hierarchical printing for debugging

### Link

Represents external or absolute links in the navigation.

```python
class Link(StructureItem):
    def __init__(self, title: str, url: str):
```

**Key Attributes:**
- `title`: Display text for the link
- `url`: Target URL (should be absolute)
- `active`: Always `False` (external links cannot be active)
- `children`: Always `None` (links have no children)

## Key Functions

### get_navigation()

The main entry point for building site navigation.

```python
def get_navigation(files: Files, config: MkDocsConfig) -> Navigation:
```

**Process:**
1. Gets documentation pages from files
2. Uses nav config or auto-generates from file structure
3. Converts config data to navigation objects
4. Links pages with previous/next relationships
5. Validates navigation references
6. Reports missing or invalid navigation items

**Returns:** Complete `Navigation` object

### _data_to_navigation()

Recursively converts navigation configuration data into navigation objects.

```python
def _data_to_navigation(data, files: Files, config: MkDocsConfig):
```

**Handles:**
- Dictionary entries (sections with children)
- List entries (multiple items)
- String/tuple entries (individual pages/links)
- File lookups and validation

## Helper Functions

### _get_by_type()

Generic function to extract specific types of navigation items from the navigation tree.

```python
def _get_by_type(nav, t: type[T]) -> list[T]:
```

### _add_parent_links()

Establishes parent-child relationships in the navigation hierarchy.

```python
def _add_parent_links(nav) -> None:
```

### _add_previous_and_next_links()

Creates sequential navigation links between pages.

```python
def _add_previous_and_next_links(pages: list[Page]) -> None:
```

## Important Notes

### Navigation Validation

The module performs several validation checks:
- **Missing files**: Reports pages referenced in nav config but not found in docs
- **Excluded files**: Warns about nav references to excluded files  
- **External links**: Logs external URLs in navigation
- **Absolute paths**: Validates absolute path references based on config

### Auto-generation

If no navigation configuration is provided:
- All documentation pages are included automatically
- Pages are sorted using `file_sort_key`
- Directory structure is preserved using `nest_paths`

### Error Handling

- Raises `BuildError` if plugins set invalid page types
- Logs warnings for various validation issues
- Gracefully handles missing or invalid navigation references

## Usage Example

```python
# Typically called by MkDocs build process
navigation = get_navigation(files, config)

# Access navigation items
for item in navigation:
    if item.is_section:
        print(f"Section: {item.title}")
    elif item.is_page:
        print(f"Page: {item.title}")
    elif item.is_link:
        print(f"Link: {item.title} -> {item.url}")
```

## Dependencies

- `mkdocs.structure.pages.Page`
- `mkdocs.structure.files.Files`
- `mkdocs.config.defaults.MkDocsConfig`
- `mkdocs.utils.nest_paths`
- `mkdocs.structure.StructureItem`