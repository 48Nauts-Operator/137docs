<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Python Configuration and Options

This module contains dataclasses for configuring the Python handler in the `mkdocstrings` documentation generator. It provides comprehensive configuration options for parsing and rendering Python docstrings, modules, classes, and functions.

## Purpose

The file defines configuration schemas and validation for:
- Docstring parsing options (Google, NumPy, Sphinx styles)
- Member filtering and organization
- Signature rendering preferences
- Template rendering options
- External inventory handling

## Key Features

### Pydantic Integration
The module conditionally uses Pydantic for validation when available:
- Provides automatic validation of configuration options
- Generates JSON schemas for IDE support
- Falls back gracefully when Pydantic is not installed

```python
# Conditional Pydantic import with fallback
try:
    import pydantic
    from pydantic.dataclasses import dataclass
    # ... Pydantic-specific code
except ImportError:
    from dataclasses import dataclass
```

## Main Configuration Classes

### `PythonInputOptions`
The primary configuration class containing all available options:

```python
@dataclass(frozen=True, kw_only=True)
class PythonInputOptions:
    """Accepted input options."""
```

**Key Options:**
- **`docstring_style`**: Choose between `"auto"`, `"google"`, `"numpy"`, `"sphinx"`, or `None`
- **`filters`**: List of filters or `"public"` to control which members are included
- **`members`**: Boolean or explicit list of members to render
- **`show_source`**: Whether to display source code
- **`heading_level`**: Initial heading level (default: 2)
- **`separate_signature`**: Put signatures in code blocks below headings

### Docstring Style Options

#### `GoogleStyleOptions`
Configuration for Google-style docstrings:
- `returns_multiple_items`: Parse multiple items in Returns/Yields sections
- `returns_named_value`: Parse items as name+description vs type+description
- `trim_doctest_flags`: Remove doctest flags from examples

#### `NumpyStyleOptions` / `SphinxStyleOptions`
Similar configurations for NumPy and Sphinx docstring styles.

#### `AutoStyleOptions`
Automatic style detection configuration:
- `method`: Detection method (`"heuristics"` or `"max_sections"`)
- `style_order`: Priority order for style detection
- `default`: Fallback style when detection fails

### `SummaryOption`
Controls summary rendering for different object types:
```python
@dataclass(frozen=True, kw_only=True)
class SummaryOption:
    attributes: bool = False
    functions: bool = False  
    classes: bool = False
    modules: bool = False
```

## Configuration Processing

### Data Coercion
The `coerce()` class method handles:
- Converting string filters to compiled regex patterns
- Transforming boolean summary options to `SummaryOption` instances
- Processing docstring options based on selected style

### Factory Methods
Several classes provide `from_data()` class methods for creating instances from dictionaries:

```python
@classmethod
def from_data(cls, **data: Any) -> Self:
    """Create an instance from a dictionary."""
    return cls(**cls.coerce(**data))
```

## Important Options

### Member Filtering
- **`filters`**: Use patterns like `["!^_[^_]"]` to exclude private members
- **`members`**: Explicit control over which members to include
- **`inherited_members`**: Include inherited class members

### Docstring Control
Fine-grained control over docstring sections:
- `show_docstring_parameters`
- `show_docstring_returns` 
- `show_docstring_examples`
- `show_docstring_raises`

### Signature Formatting
- **`line_length`**: Maximum line length for code formatting
- **`show_signature_annotations`**: Include type hints in signatures
- **`modernize_annotations`**: Convert `Optional[T]` to `T | None` syntax

## Usage Notes

### Version Compatibility
The module includes version-specific handling:
- Python 3.9 compatibility with conditional `kw_only` parameter
- Graceful degradation when modern typing features aren't available

### Validation
- Install Pydantic for automatic validation during development
- Configuration errors are caught early with descriptive messages
- JSON schema support for IDE autocompletion

### Performance
- Uses frozen dataclasses for immutability
- Compiled regex patterns for efficient filtering
- Lazy loading of optional dependencies

## Example Configuration

```yaml
# mkdocs.yml
plugins:
  - mkdocstrings:
      handlers:
        python:
          options:
            docstring_style: google
            show_source: true
            filters: ["!^_"]
            members_order: alphabetical
            heading_level: 2
```

This comprehensive configuration system allows fine-tuned control over Python documentation generation while maintaining usability through sensible defaults.