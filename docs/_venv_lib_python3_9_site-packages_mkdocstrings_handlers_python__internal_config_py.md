<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Python Options Configuration Module

This module defines configuration dataclasses for the mkdocstrings Python handler. It provides comprehensive options for controlling how Python code documentation is generated and rendered.

## Purpose

The module serves as the configuration system for mkdocstrings' Python handler, allowing users to customize:
- Docstring parsing behavior for different styles (Google, NumPy, Sphinx)
- Member filtering and organization
- Signature rendering options
- Documentation appearance and structure

## Key Features

- **Optional Pydantic validation**: Uses Pydantic for validation when available, falls back to standard dataclasses
- **Cross-version compatibility**: Handles Python 3.9+ with appropriate feature detection
- **Flexible configuration**: Supports nested configuration with reasonable defaults
- **JSON Schema generation**: Integrates with mkdocs-material's schema system for IDE support

## Main Classes

### Docstring Style Options

#### `GoogleStyleOptions`
Configuration for Google-style docstring parsing.

**Key Options:**
- `ignore_init_summary`: Skip `__init__` method docstring summaries
- `returns_multiple_items`: Parse multiple items in Returns/Yields sections
- `returns_named_value`: Allow named return values with type annotations
- `trim_doctest_flags`: Remove doctest flags from examples
- `warn_unknown_params`: Warn about undocumented parameters

```python
google_options = GoogleStyleOptions(
    ignore_init_summary=True,
    returns_multiple_items=False
)
```

#### `NumpyStyleOptions`
Configuration for NumPy-style docstring parsing.

**Key Options:**
- `ignore_init_summary`: Skip `__init__` method docstring summaries
- `trim_doctest_flags`: Remove doctest flags from examples
- `warn_unknown_params`: Warn about undocumented parameters

#### `SphinxStyleOptions`
Configuration for Sphinx-style docstring parsing (currently minimal options).

#### `AutoStyleOptions`
Configuration for automatic docstring style detection.

**Key Options:**
- `method`: Detection method (`"heuristics"` or `"max_sections"`)
- `style_order`: Priority order for style detection
- `default`: Fallback style if detection fails
- `per_style_options`: Style-specific configuration

### Core Configuration Classes

#### `PythonInputOptions`
Main configuration class with comprehensive documentation generation options.

**Categories of Options:**

**General Options:**
- `allow_inspection`: Enable dynamic module inspection
- `force_inspection`: Force dynamic analysis over static
- `extensions`: Griffe extensions to load
- `preload_modules`: Modules to pre-load for cross-references

**Member Organization:**
- `filters`: Include/exclude patterns for members
- `members`: Explicit member selection
- `members_order`: Ordering strategy (`"alphabetical"`, `"source"`, `"__all__"`)
- `inherited_members`: Include inherited class members
- `group_by_category`: Group by type (attributes, classes, functions, modules)

**Signature Rendering:**
- `show_signature`: Display method/function signatures
- `show_signature_annotations`: Include type annotations
- `separate_signature`: Render signatures in code blocks
- `annotations_path`: Annotation verbosity level
- `modernize_annotations`: Use modern type syntax (e.g., `str | None`)

**Docstring Display:**
- `show_docstring_*`: Control visibility of specific docstring sections
- `docstring_style`: Parser to use (`"auto"`, `"google"`, `"numpy"`, `"sphinx"`)
- `docstring_section_style`: Rendering style (`"table"`, `"list"`, `"spacy"`)
- `merge_init_into_class`: Merge `__init__` docs into class

```python
options = PythonInputOptions(
    show_source=True,
    members_order="alphabetical",
    docstring_style="google",
    show_signature_annotations=True,
    filters=["!^_[^_]"]  # Exclude private members
)
```

#### `PythonConfig`
Top-level configuration combining options with inventory and path settings.

**Key Components:**
- `inventories`: External documentation inventories to link to
- `paths`: Search paths for Python packages
- `options`: Main configuration options
- `locale`: Localization settings

```python
config = PythonConfig(
    paths=["src", "lib"],
    inventories=[
        Inventory(url="https://docs.python.org/3/objects.inv")
    ],
    options=options
)
```

## Utility Classes

### `SummaryOption`
Controls summary generation for different object types:
- `attributes`: Show attribute summaries
- `functions`: Show function/method summaries  
- `classes`: Show class summaries
- `modules`: Show module summaries

### `Inventory`
Represents an external documentation inventory:
- `url`: Location of the inventory file
- `base_url`: Base URL for documentation links
- `domains`: Sphinx domains to include

## Usage Notes

### Pydantic Integration
The module automatically uses Pydantic for validation when available:
- Provides enhanced error messages and type checking
- Generates JSON schemas for IDE integration
- Falls back gracefully to standard dataclasses

### Python Version Compatibility
- Uses `typing_extensions` for older Python versions
- Conditionally applies `kw_only=True` for Python 3.10+
- Handles `eval_type_backport` requirement for Python 3.9 + Pydantic

### Configuration Coercion
Classes provide `from_data()` and `coerce()` methods to handle:
- Dictionary-based configuration input
- Type conversion and validation
- Nested object construction

## Example Configuration

```yaml
# mkdocs.yml
plugins:
  - mkdocstrings:
      handlers:
        python:
          options:
            docstring_style: google
            show_source: true
            show_signature_annotations: true
            members_order: alphabetical
            filters:
              - "!^_"
              - "!^__"
            summary: true
            docstring_options:
              ignore_init_summary: true
              trim_doctest_flags: true
```

This comprehensive configuration system allows users to fine-tune every aspect of their Python documentation generation while maintaining sensible defaults for common use cases.