<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Environment Debug Module

## Overview

This Python module provides functionality to collect and display debugging information about the current Python environment. It's specifically designed for the `mkdocstrings-python` package and gathers system information, Python interpreter details, environment variables, and installed package versions.

## Purpose

The primary purpose of this module is to:
- Collect comprehensive environment information for debugging purposes
- Display system and Python interpreter details
- Track relevant environment variables (particularly those related to `mkdocstrings-python`)
- Provide version information for installed packages
- Assist in troubleshooting and support scenarios

## Data Classes

### `_Variable`
Represents an environment variable with its name and value.

```python
@dataclass
class _Variable:
    name: str     # Variable name
    value: str    # Variable value
```

### `_Package`
Represents a Python package with its name and version.

```python
@dataclass
class _Package:
    name: str     # Package name
    version: str  # Package version
```

### `_Environment`
Stores comprehensive environment information including interpreter details, platform info, packages, and variables.

```python
@dataclass
class _Environment:
    interpreter_name: str          # Python interpreter name
    interpreter_version: str       # Python interpreter version
    interpreter_path: str          # Path to Python executable
    platform: str                 # Operating System
    packages: list[_Package]       # Installed packages
    variables: list[_Variable]     # Environment variables
```

## Functions

### `_interpreter_name_version() -> tuple[str, str]`
- **Purpose**: Extracts Python interpreter name and version information
- **Returns**: Tuple containing interpreter name and version string
- **Details**: 
  - Uses `sys.implementation` for accurate interpreter detection
  - Handles different release levels (alpha, beta, rc, final)
  - Falls back to empty name and "0.0.0" version if implementation info unavailable

### `_get_version(dist: str = "mkdocstrings-python") -> str`
- **Purpose**: Retrieves version information for a specified Python package
- **Parameters**: 
  - `dist`: Distribution/package name (defaults to "mkdocstrings-python")
- **Returns**: Version string or "0.0.0" if package not found
- **Error Handling**: Gracefully handles `PackageNotFoundError`

### `_get_debug_info() -> _Environment`
- **Purpose**: Collects comprehensive environment information
- **Returns**: `_Environment` object containing all debug information
- **Collected Information**:
  - Python interpreter details
  - System platform information
  - Environment variables (PYTHONPATH and MKDOCSTRINGS_PYTHON_* variables)
  - Package version information

### `_print_debug_info() -> None`
- **Purpose**: Formats and prints debug information to stdout
- **Output Format**:
  - System platform
  - Python interpreter details
  - Environment variables (as bullet points)
  - Installed packages with versions

## Usage

### As a Script
Run the module directly to print debug information:

```bash
python debug_module.py
```

### As a Module
Import and use specific functions:

```python
from debug_module import _get_debug_info, _print_debug_info

# Get environment info programmatically
env_info = _get_debug_info()

# Print formatted debug information
_print_debug_info()
```

## Example Output

```
- __System__: Linux-5.4.0-74-generic-x86_64-with-glibc2.31
- __Python__: cpython 3.9.5 (/usr/bin/python3)
- __Environment variables__:
  - `PYTHONPATH`: `/home/user/projects`
  - `MKDOCSTRINGS_PYTHON_DEBUG`: `true`
- __Installed packages__:
  - `mkdocstrings-python` v0.8.2
```

## Notes and Suggestions

### Current Limitations
- Only tracks `mkdocstrings-python` package by default
- Environment variable collection is limited to PYTHONPATH and MKDOCSTRINGS_PYTHON_* variables
- All functions are marked as private (prefixed with `_`)

### Potential Improvements
1. **Extend Package Tracking**: Consider adding more relevant packages to the monitoring list
2. **Configurable Variables**: Allow customization of which environment variables to track
3. **Output Formats**: Add support for JSON or structured output formats
4. **Public API**: Consider exposing some functions as public API if meant for external use
5. **Logging Integration**: Consider using Python's logging module instead of direct print statements

### Dependencies
- Standard library only (no external dependencies)
- Compatible with Python 3.7+ (uses `from __future__ import annotations`)