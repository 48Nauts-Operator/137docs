<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Debug Information Module

## Overview

This Python module provides functionality for collecting and displaying debug/environment information for the `mkdocstrings-python` package. It gathers system details, Python interpreter information, relevant environment variables, and package versions to help with troubleshooting and support.

## Purpose

The primary purpose of this module is to:
- Collect comprehensive environment information
- Display debug information in a formatted, readable way
- Assist with troubleshooting by providing system context
- Support issue reporting with relevant environment details

## Data Classes

### `_Variable`

```python
@dataclass
class _Variable:
    name: str    # Variable name
    value: str   # Variable value
```

Represents an environment variable with its name and value.

### `_Package`

```python
@dataclass
class _Package:
    name: str     # Package name
    version: str  # Package version
```

Represents a Python package with its name and installed version.

### `_Environment`

```python
@dataclass
class _Environment:
    interpreter_name: str        # Python interpreter name
    interpreter_version: str     # Python interpreter version
    interpreter_path: str        # Path to Python executable
    platform: str               # Operating System
    packages: list[_Package]     # Installed packages
    variables: list[_Variable]   # Environment variables
```

Central data structure that aggregates all environment information.

## Functions

### `_interpreter_name_version()`

```python
def _interpreter_name_version() -> tuple[str, str]:
```

- **Purpose**: Determines the Python interpreter name and version
- **Returns**: Tuple containing interpreter name and version string
- **Handles**: Different Python implementations (CPython, PyPy, etc.)
- **Fallback**: Returns empty string and "0.0.0" if implementation info unavailable

### `_get_version()`

```python
def _get_version(dist: str = "mkdocstrings-python") -> str:
```

- **Purpose**: Retrieves the version of a specified Python package
- **Parameters**: 
  - `dist`: Distribution name (defaults to "mkdocstrings-python")
- **Returns**: Version string or "0.0.0" if package not found
- **Error Handling**: Catches `PackageNotFoundError` and returns default version

### `_get_debug_info()`

```python
def _get_debug_info() -> _Environment:
```

- **Purpose**: Collects comprehensive environment information
- **Returns**: `_Environment` object with all debug data
- **Collects**:
  - Python interpreter details
  - System platform information
  - PYTHONPATH environment variable
  - All environment variables starting with "MKDOCSTRINGS_PYTHON"
  - Package version information

### `_print_debug_info()`

```python
def _print_debug_info() -> None:
```

- **Purpose**: Formats and prints debug information to stdout
- **Output Format**:
  - System platform
  - Python interpreter details
  - Environment variables (bulleted list)
  - Installed packages with versions

## Usage

### As a Script

Run directly from command line:

```bash
python debug_module.py
```

This will print formatted debug information to the console.

### As a Module

```python
from debug_module import _get_debug_info, _print_debug_info

# Get environment info programmatically
env_info = _get_debug_info()

# Print formatted debug information
_print_debug_info()
```

## Output Example

```
- __System__: Linux-5.4.0-74-generic-x86_64-with-glibc2.31
- __Python__: cpython 3.9.7 (/usr/bin/python3)
- __Environment variables__:
  - `PYTHONPATH`: `/home/user/projects`
  - `MKDOCSTRINGS_PYTHON_DEBUG`: `true`
- __Installed packages__:
  - `mkdocstrings-python` v0.8.2
```

## Notes and Suggestions

### üîç **Current Limitations**
- Only tracks the `mkdocstrings-python` package by default
- Environment variable collection is limited to PYTHONPATH and MKDOCSTRINGS_PYTHON* variables

### üí° **Potential Improvements**
- Add support for tracking additional relevant packages
- Include more system information (memory, disk space)
- Add option to export debug info to file
- Include Git repository information if available

### ‚ö†Ô∏è **Security Considerations**
- Be cautious when sharing debug output as it may contain sensitive environment variable values
- Consider filtering sensitive information before displaying

### üõ†Ô∏è **Development Notes**
- All functions are prefixed with underscore indicating internal use
- Uses modern Python features (dataclasses, walrus operator, type hints)
- Requires Python 3.8+ for full compatibility