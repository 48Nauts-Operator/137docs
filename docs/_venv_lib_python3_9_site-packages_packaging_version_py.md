<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# packaging.version Module Documentation

## Overview

This module provides version parsing and comparison functionality for Python packages, implementing PEP 440 (Python package versioning standard). It allows parsing, validation, comparison, and manipulation of version strings commonly used in Python packaging.

## Purpose

The module serves to:
- Parse and validate version strings according to PEP 440
- Enable comparison and sorting of versions
- Extract individual components from version strings (epoch, release, pre-release, post-release, dev, local)
- Normalize version representations

## Public API

### Exports

```python
__all__ = ["VERSION_PATTERN", "InvalidVersion", "Version", "parse"]
```

## Main Classes and Functions

### `parse(version: str) -> Version`

A convenience function to parse version strings.

```python
>>> parse('1.0.dev1')
<Version('1.0.dev1')>
```

**Parameters:**
- `version`: The version string to parse

**Raises:**
- `InvalidVersion`: When the version string is not valid

---

### `InvalidVersion` Exception

```python
class InvalidVersion(ValueError)
```

Raised when a version string doesn't conform to PEP 440 standards.

**Example:**
```python
>>> Version("invalid")
Traceback (most recent call last):
    ...
packaging.version.InvalidVersion: Invalid version: 'invalid'
```

---

### `Version` Class

The main class for handling version objects. Inherits from `_BaseVersion` to get comparison functionality.

#### Constructor

```python
def __init__(self, version: str) -> None
```

**Parameters:**
- `version`: String representation of a version

**Raises:**
- `InvalidVersion`: If version doesn't conform to PEP 440

#### Key Properties

- **`epoch`** (`int`): The epoch of the version
  ```python
  >>> Version("1!2.0.0").epoch
  1
  ```

- **`release`** (`tuple[int, ...]`): Components of the release segment
  ```python
  >>> Version("1.2.3").release
  (1, 2, 3)
  ```

- **`pre`** (`tuple[str, int] | None`): Pre-release segment
  ```python
  >>> Version("1.2.3a1").pre
  ('a', 1)
  ```

- **`post`** (`int | None`): Post-release number
  ```python
  >>> Version("1.2.3.post1").post
  1
  ```

- **`dev`** (`int | None`): Development release number
  ```python
  >>> Version("1.2.3.dev1").dev
  1
  ```

- **`local`** (`str | None`): Local version segment
  ```python
  >>> Version("1.2.3+abc").local
  'abc'
  ```

#### Derived Properties

- **`public`**: Public portion (excludes local segment)
- **`base_version`**: Base version (excludes pre/post/dev/local)
- **`major`**, **`minor`**, **`micro`**: Individual release components
- **`is_prerelease`**, **`is_postrelease`**, **`is_devrelease`**: Boolean flags

#### Comparison Support

The class supports all comparison operators (`<`, `<=`, `==`, `>=`, `>`, `!=`):

```python
>>> v1 = Version("1.0a5")
>>> v2 = Version("1.0")
>>> v1 < v2
True
```

---

### `VERSION_PATTERN`

A regular expression string for matching valid version strings. The pattern supports:

- Optional epoch (`1!`)
- Release segments (`1.2.3`)
- Pre-release versions (`a1`, `b2`, `rc1`)
- Post-release versions (`.post1`)
- Development versions (`.dev1`)
- Local versions (`+abc.123`)

**Usage:**
```python
import re
pattern = re.compile(VERSION_PATTERN, re.VERBOSE | re.IGNORECASE)
```

## Internal Components

### Helper Functions

- **`_parse_letter_version()`**: Parses and normalizes letter versions (alpha, beta, etc.)
- **`_parse_local_version()`**: Parses local version segments
- **`_cmpkey()`**: Generates comparison keys for version sorting

### Internal Classes

- **`_BaseVersion`**: Base class providing comparison methods
- **`_Version`**: NamedTuple storing parsed version components
- **`_TrimmedRelease`**: Version subclass that trims trailing zeros from release

## Type Definitions

The module defines several type aliases for type hints:
- `LocalType`: Local version tuple type
- `CmpKey`: Comparison key tuple type
- Various comparison-related types

## Usage Examples

```python
from packaging.version import Version, parse

# Basic parsing
v = Version("1.2.3")
v = parse("1.2.3")  # Alternative

# Version comparison
versions = ["1.0", "1.0a1", "1.0.post1", "1.0.dev1"]
sorted_versions = sorted(versions, key=Version)

# Accessing components
v = Version("2!1.2.3a1.post1.dev1+local.1")
print(f"Epoch: {v.epoch}")           # 2
print(f"Release: {v.release}")       # (1, 2, 3)
print(f"Pre: {v.pre}")              # ('a', 1)
print(f"Major: {v.major}")          # 1
```

## Notes and Recommendations

- Always use this module instead of string comparison for version ordering
- The module handles complex PEP 440 cases like development releases before alpha releases
- Version objects are hashable and can be used as dictionary keys
- The parsing is strict - invalid versions will raise `InvalidVersion`
- Consider using the `parse()` function for cleaner code when you just need a Version object

## Dependencies

- Requires `._structures` module for `Infinity` and `NegativeInfinity` types
- Uses standard library modules: `itertools`, `re`, `typing`