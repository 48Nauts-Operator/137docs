<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Python Version Parsing Module Documentation

## Overview

This module is part of the `pip._vendor.packaging` library and provides functionality for parsing, validating, and comparing software version strings according to PEP 440 (Python's versioning standard). It enables proper semantic version handling with support for epochs, pre-releases, post-releases, development releases, and local version identifiers.

## Purpose

- **Parse version strings** into structured components
- **Validate version strings** against PEP 440 specification
- **Enable version comparison** and sorting operations
- **Normalize version representations** for consistent handling

## Public API

### Functions

#### `parse(version: str) -> Version`

Parses a version string and returns a `Version` object.

```python
>>> parse('1.0.dev1')
<Version('1.0.dev1')>
```

**Parameters:**
- `version`: The version string to parse

**Raises:**
- `InvalidVersion`: When the version string is not valid

### Classes

#### `InvalidVersion(ValueError)`

Exception raised when a version string doesn't conform to PEP 440.

```python
>>> Version("invalid")
Traceback (most recent call last):
    ...
packaging.version.InvalidVersion: Invalid version: 'invalid'
```

#### `Version(_BaseVersion)`

The main class for handling project versions with full comparison support.

```python
>>> v1 = Version("1.0a5")
>>> v2 = Version("1.0")
>>> v1 < v2
True
```

##### Constructor

```python
def __init__(self, version: str) -> None
```

**Parameters:**
- `version`: String representation of a version (will be parsed and normalized)

**Raises:**
- `InvalidVersion`: If version doesn't conform to PEP 440

##### Properties

| Property | Type | Description | Example |
|----------|------|-------------|---------|
| `epoch` | `int` | The epoch of the version | `Version("1!2.0.0").epoch` → `1` |
| `release` | `tuple[int, ...]` | Release segment components | `Version("1.2.3").release` → `(1, 2, 3)` |
| `pre` | `tuple[str, int] \| None` | Pre-release segment | `Version("1.2.3a1").pre` → `('a', 1)` |
| `post` | `int \| None` | Post-release number | `Version("1.2.3.post1").post` → `1` |
| `dev` | `int \| None` | Development number | `Version("1.2.3.dev1").dev` → `1` |
| `local` | `str \| None` | Local version segment | `Version("1.2.3+abc").local` → `'abc'` |
| `public` | `str` | Public portion (no local segment) | `Version("1.2.3+abc").public` → `'1.2.3'` |
| `base_version` | `str` | Base version (no pre/post/dev/local) | `Version("1!1.2.3dev1+abc").base_version` → `'1!1.2.3'` |
| `major` | `int` | First release component | `Version("1.2.3").major` → `1` |
| `minor` | `int` | Second release component | `Version("1.2.3").minor` → `2` |
| `micro` | `int` | Third release component | `Version("1.2.3").micro` → `3` |

##### Boolean Properties

| Property | Description | Example |
|----------|-------------|---------|
| `is_prerelease` | Whether version is pre-release or dev | `Version("1.2.3a1").is_prerelease` → `True` |
| `is_postrelease` | Whether version is post-release | `Version("1.2.3.post1").is_postrelease` → `True` |
| `is_devrelease` | Whether version is development release | `Version("1.2.3.dev1").is_devrelease` → `True` |

## Constants

### `VERSION_PATTERN`

A regular expression string for matching valid version numbers. The pattern:

- Is **not anchored** at start/end for embedding in larger expressions
- Should be compiled with `re.VERBOSE | re.IGNORECASE` flags
- Supports all PEP 440 version components

## Internal Classes

### `_BaseVersion`

Base class providing comparison operations for version objects using a `_key` attribute.

### `_Version(NamedTuple)`

Internal structure holding parsed version components:
- `epoch`: Version epoch
- `release`: Release tuple  
- `dev`, `pre`, `post`: Optional release type tuples
- `local`: Optional local version tuple

### `_TrimmedRelease(Version)`

Internal class that removes trailing zeros from release segments for specific use cases.

## Helper Functions

### `_parse_letter_version(letter, number)`

Parses and normalizes pre-release, post-release, and dev-release segments.

**Normalizations:**
- `alpha` → `a`
- `beta` → `b` 
- `c`, `pre`, `preview` → `rc`
- `rev`, `r` → `post`

### `_parse_local_version(local)`

Parses local version identifiers, converting to tuple of strings and integers.

### `_cmpkey(...)`

Generates comparison keys for proper version sorting according to PEP 440 rules.

## Usage Examples

```python
from packaging.version import Version, parse

# Basic parsing
v = parse("1.2.3")
v = Version("1.2.3")

# Version comparison
v1 = Version("1.0a1")
v2 = Version("1.0")
print(v1 < v2)  # True

# Accessing components
v = Version("2!1.2.3.post1.dev2+local.1")
print(v.epoch)      # 2
print(v.release)    # (1, 2, 3)
print(v.post)       # 1
print(v.dev)