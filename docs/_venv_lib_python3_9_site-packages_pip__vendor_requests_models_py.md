<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# requests.models Documentation

## Overview

The `requests.models` module contains the core objects that power the Requests HTTP library. This module defines the primary classes for creating, preparing, and handling HTTP requests and responses.

## Purpose

This module provides:
- HTTP request creation and preparation functionality
- HTTP response handling and content processing
- Support for various data encoding formats (URL-encoded, multipart, JSON)
- Hook system for request/response processing
- Comprehensive error handling for HTTP operations

## Constants

```python
REDIRECT_STATI = (301, 302, 303, 307, 308)  # HTTP status codes for automatic redirects
DEFAULT_REDIRECT_LIMIT = 30                  # Maximum number of redirects to follow
CONTENT_CHUNK_SIZE = 10 * 1024              # Default chunk size for content reading (10KB)
ITER_CHUNK_SIZE = 512                       # Default chunk size for line iteration
```

## Classes

### RequestEncodingMixin

A mixin class that provides encoding functionality for HTTP requests.

**Key Methods:**
- `path_url` - Property that builds the path URL from the full URL
- `_encode_params(data)` - Static method to encode URL parameters
- `_encode_files(files, data)` - Static method to build multipart/form-data request bodies

**Usage Notes:**
- Handles both dictionary and list of tuples for parameter encoding
- Supports 2-4 tuple formats for file uploads: `(filename, fileobj)`, `(filename, fileobj, content_type)`, or `(filename, fileobj, content_type, headers)`
- Automatically handles UTF-8 encoding for string parameters

### RequestHooksMixin

A mixin class that provides hook registration and management functionality.

**Key Methods:**
- `register_hook(event, hook)` - Register a callback hook for an event
- `deregister_hook(event, hook)` - Remove a previously registered hook

**Usage Notes:**
- Hooks must be callable objects
- Supports both single hooks and iterable collections of hooks
- Returns boolean indicating success/failure for deregistration

### Request

A user-created request object used to prepare HTTP requests.

**Constructor Parameters:**
- `method` - HTTP method (GET, POST, etc.)
- `url` - Target URL
- `headers` - Dictionary of HTTP headers
- `files` - Dictionary of files for multipart upload
- `data` - Request body data
- `json` - JSON data for request body
- `params` - URL parameters
- `auth` - Authentication handler or (user, pass) tuple
- `cookies` - Cookie dictionary or CookieJar
- `hooks` - Dictionary of callback hooks

**Key Methods:**
- `prepare()` - Creates and returns a `PreparedRequest` object

**Example:**
```python
import requests
req = requests.Request('GET', 'https://httpbin.org/get')
prepared = req.prepare()
```

### PreparedRequest

The fully prepared HTTP request containing the exact bytes to be sent to the server.

**Key Attributes:**
- `method` - HTTP verb
- `url` - Complete HTTP URL
- `headers` - Dictionary of HTTP headers
- `body` - Request body content
- `hooks` - Dictionary of callback hooks

**Key Methods:**
- `prepare(method, url, headers, files, data, params, auth, cookies, hooks, json)` - Prepare the entire request
- `prepare_method(method)` - Prepare HTTP method
- `prepare_url(url, params)` - Prepare and validate URL
- `prepare_headers(headers)` - Prepare HTTP headers
- `prepare_body(data, files, json)` - Prepare request body
- `prepare_auth(auth, url)` - Prepare authentication
- `prepare_cookies(cookies)` - Prepare cookie header
- `copy()` - Create a copy of the prepared request

**Usage Notes:**
- Should not be instantiated manually - use `Request.prepare()` instead
- Handles IDNA encoding for international domain names
- Supports streaming request bodies
- Automatically sets Content-Length or Transfer-Encoding headers

### Response

The HTTP response object containing the server's response to an HTTP request.

**Key Attributes:**
- `status_code` - Integer HTTP status code
- `headers` - Case-insensitive dictionary of response headers
- `url` - Final URL location after redirects
- `encoding` - Text encoding for response content
- `history` - List of redirect responses
- `reason` - Textual reason for HTTP status
- `cookies` - CookieJar of cookies from server
- `elapsed` - Time elapsed for the request
- `request` - The PreparedRequest object that generated this response

**Key Properties:**
- `ok` - True if status_code < 400
- `is_redirect` - True if response is a redirect
- `is_permanent_redirect` - True if response is a permanent redirect
- `content` - Response content as bytes
- `text` - Response content as unicode string
- `apparent_encoding` - Detected encoding using chardet

**Key Methods:**
- `iter_content(chunk_size, decode_unicode)` - Iterate over response data in chunks
- `iter_lines(chunk_size, decode_unicode, delimiter)` - Iterate over response data line by line
- `json(**kwargs)` - Parse response content as JSON
- `raise_for_status()` - Raise HTTPError for bad status codes
- `close()` - Release connection back to pool

**Example:**
```python
response = requests.get('https://api.github.com/user')
if response.ok:
    data = response.json()
    print(data)
else:
    response.raise_for_status()
```

## Important Features

### Content Handling
- **Streaming Support**: Both requests and responses support streaming for large files
- **Automatic Encoding Detection**: Uses chardet/charset_normalizer for encoding detection
- **Multiple Content Types**: Supports URL-encoded, multipart, JSON, and raw binary data

### Error Handling
- Comprehensive exception handling for network errors, SSL errors, and content decoding issues
- Automatic conversion of urllib3 exceptions to requests exceptions
- Detailed error messages with context information

### International Domain Support
- IDNA encoding for international domain names
- Proper Unicode handling throughout the request/response cycle
- UTF-8 encoding for parameters and headers

## Notes an