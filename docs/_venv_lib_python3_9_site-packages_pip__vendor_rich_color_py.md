<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Color Module Documentation

## Overview

This module provides comprehensive color support for terminal applications, including parsing, conversion, and representation of colors across different terminal color systems. It handles various color formats from basic ANSI colors to true RGB colors, with automatic downgrading capabilities for different terminal capabilities.

## Purpose

The module serves as a color abstraction layer that:
- Parses multiple color input formats (hex, RGB, named colors, ANSI codes)
- Manages different terminal color systems and their capabilities
- Provides color conversion and downgrading between systems
- Generates appropriate ANSI escape codes for terminal output

## Key Classes and Enums

### ColorSystem (IntEnum)

Represents the different color systems supported by terminals:

```python
class ColorSystem(IntEnum):
    STANDARD = 1    # 16 colors
    EIGHT_BIT = 2   # 256 colors  
    TRUECOLOR = 3   # 16.7 million colors
    WINDOWS = 4     # Windows-specific palette
```

### ColorType (IntEnum)

Defines the internal color type classification:

```python
class ColorType(IntEnum):
    DEFAULT = 0     # Terminal default color
    STANDARD = 1    # Standard 16-color ANSI
    EIGHT_BIT = 2   # 8-bit (256) color palette
    TRUECOLOR = 3   # 24-bit RGB color
    WINDOWS = 4     # Windows console colors
```

### Color (NamedTuple)

The main color class that represents a terminal color:

```python
@rich_repr
class Color(NamedTuple):
    name: str                           # Color name/identifier
    type: ColorType                     # Color type classification
    number: Optional[int] = None        # ANSI color number (if applicable)
    triplet: Optional[ColorTriplet] = None  # RGB values (if applicable)
```

## Important Methods

### Color Parsing

#### `Color.parse(color: str) -> Color`

Parses various color string formats:

```python
# Named colors
color = Color.parse("red")
color = Color.parse("bright_blue")

# Hex colors
color = Color.parse("#ff0000")

# RGB format
color = Color.parse("rgb(255,0,0)")

# ANSI color numbers
color = Color.parse("color(196)")

# Default color
color = Color.parse("default")
```

**Supported formats:**
- Named ANSI colors (e.g., "red", "bright_green")
- Hex colors (e.g., "#ff0000") 
- RGB function format (e.g., "rgb(255,0,0)")
- ANSI color numbers (e.g., "color(196)")
- "default" for terminal default

### Color Creation

#### `Color.from_ansi(number: int) -> Color`

Creates a color from an 8-bit ANSI color number (0-255):

```python
red_color = Color.from_ansi(1)      # Standard red
bright_red = Color.from_ansi(196)   # 8-bit bright red
```

#### `Color.from_rgb(red: float, green: float, blue: float) -> Color`

Creates a truecolor from RGB components:

```python
purple = Color.from_rgb(128, 0, 128)
```

#### `Color.from_triplet(triplet: ColorTriplet) -> Color`

Creates a color from a ColorTriplet object:

```python
triplet = ColorTriplet(255, 0, 0)
red = Color.from_triplet(triplet)
```

### Color Conversion

#### `get_truecolor(theme: Optional[TerminalTheme] = None, foreground: bool = True) -> ColorTriplet`

Converts any color to its RGB representation:

```python
color = Color.parse("red")
rgb_triplet = color.get_truecolor()  # Returns ColorTriplet(255, 0, 0)
```

#### `downgrade(system: ColorSystem) -> Color`

Downgrades a color to a less capable color system:

```python
true_color = Color.parse("#ff6b35")
eight_bit = true_color.downgrade(ColorSystem.EIGHT_BIT)
standard = true_color.downgrade(ColorSystem.STANDARD)
```

#### `get_ansi_codes(foreground: bool = True) -> Tuple[str, ...]`

Returns ANSI escape code components for the color:

```python
color = Color.parse("red")
codes = color.get_ansi_codes(foreground=True)  # Returns ("31",)
```

## Utility Functions

### `parse_rgb_hex(hex_color: str) -> ColorTriplet`

Parses a 6-character hex string to RGB values:

```python
rgb = parse_rgb_hex("ff0000")  # Returns ColorTriplet(255, 0, 0)
```

### `blend_rgb(color1: ColorTriplet, color2: ColorTriplet, cross_fade: float = 0.5) -> ColorTriplet`

Blends two RGB colors:

```python
red = ColorTriplet(255, 0, 0)
blue = ColorTriplet(0, 0, 255)
purple = blend_rgb(red, blue, 0.5)  # 50% blend
```

## Color Name Dictionary

The module includes `ANSI_COLOR_NAMES`, a comprehensive dictionary mapping color names to ANSI numbers:

```python
ANSI_COLOR_NAMES = {
    "black": 0,
    "red": 1,
    "green": 2,
    "bright_red": 9,
    "dark_sea_green": 108,
    # ... many more colors
}
```

## Properties

### Color Properties

- `system`: Returns the native ColorSystem for the color
- `is_system_defined`: Checks if color is defined by the terminal system
- `is_default`: Checks if color is the default terminal color

## Exception Handling

### ColorParseError

Raised when color parsing fails:

```python
try:
    color = Color.parse("invali