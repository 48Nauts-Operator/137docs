<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Rich Console Module Documentation

This module provides the core `Console` class and related functionality for the Rich library, which enables rich text rendering, formatting, and terminal control in Python applications.

## Overview

The Rich Console module is the central component of the Rich library that handles:
- Terminal output with rich formatting (colors, styles, markup)
- Cross-platform terminal compatibility
- Content rendering and measurement
- Export capabilities (HTML, SVG, text)
- Logging with enhanced formatting
- Interactive features (input, paging, status displays)

## Key Classes

### `Console`

The main class that provides a high-level interface for terminal output and formatting.

#### Constructor Parameters

```python
Console(
    color_system: Optional[Literal["auto", "standard", "256", "truecolor", "windows"]] = "auto",
    force_terminal: Optional[bool] = None,
    force_jupyter: Optional[bool] = None,
    width: Optional[int] = None,
    height: Optional[int] = None,
    # ... many more options
)
```

#### Key Methods

##### Output Methods
- **`print(*objects, **kwargs)`** - Main method for printing formatted content
- **`log(*objects, **kwargs)`** - Enhanced logging with timestamps and caller info
- **`out(*objects, **kwargs)`** - Low-level output without formatting
- **`print_json(json=None, data=None, **kwargs)`** - Pretty print JSON data

##### Control Methods
- **`clear(home=True)`** - Clear the screen
- **`bell()`** - Play terminal bell sound
- **`control(*control)`** - Send control codes to terminal
- **`rule(title="", **kwargs)`** - Draw horizontal rules with optional titles

##### Context Managers
- **`capture()`** - Capture output as string instead of printing
- **`pager()`** - Display content in a pager application
- **`screen()`** - Enable alternative screen mode
- **`status()`** - Display animated status with spinner

##### Export Methods
- **`export_text(clear=True, styles=False)`** - Export recorded content as text
- **`export_html(**kwargs)`** - Export as HTML with styling
- **`export_svg(**kwargs)`** - Export as SVG image
- **`save_text()`, `save_html()`, `save_svg()`** - Save exports to files

### `ConsoleOptions`

Configuration object passed to renderable objects during rendering.

```python
@dataclass
class ConsoleOptions:
    size: ConsoleDimensions
    legacy_windows: bool
    min_width: int
    max_width: int
    is_terminal: bool
    encoding: str
    # ... other options
```

### `ConsoleDimensions`

Named tuple representing terminal size:

```python
class ConsoleDimensions(NamedTuple):
    width: int   # Width in characters
    height: int  # Height in lines
```

## Protocols and Types

### `ConsoleRenderable`

Protocol for objects that can be rendered by the console:

```python
@runtime_checkable
class ConsoleRenderable(Protocol):
    def __rich_console__(
        self, console: "Console", options: "ConsoleOptions"
    ) -> "RenderResult":
        ...
```

### Key Type Aliases

- **`RenderableType`** - Union of str, ConsoleRenderable, and RichCast objects
- **`RenderResult`** - Iterable of renderables or Segment objects
- **`HighlighterType`** - Callable that applies syntax highlighting
- **`JustifyMethod`** - Text justification options
- **`OverflowMethod`** - Text overflow handling options

## Context Managers

### `Capture`
Captures console output as a string instead of displaying it:

```python
with console.capture() as capture:
    console.print("Hello, World!")
output = capture.get()
```

### `ScreenContext`
Enables alternative screen mode for full-screen applications:

```python
with console.screen() as screen:
    screen.update("Full screen content")
```

### `PagerContext`
Displays content in a system pager:

```python
with console.pager():
    console.print("Long content...")
```

## Helper Classes

### `Group`
Combines multiple renderables into a single renderable:

```python
group = Group(renderable1, renderable2, fit=True)
console.print(group)
```

### `NewLine`
Renders one or more newline characters:

```python
console.print(NewLine(2))  # Print 2 blank lines
```

## Platform Compatibility

The module includes extensive platform-specific handling:

- **Windows**: Legacy console support with Win32 API integration
- **Jupyter**: Special rendering for notebook environments  
- **Unix/Linux**: Full ANSI escape sequence support
- **Color System Detection**: Automatic detection of terminal color capabilities

## Usage Examples

### Basic Printing
```python
console = Console()
console.print("Hello", "World", style="bold red")
console.print("[bold]Markup[/bold] is supported")
```

### Logging
```python
console.log("Debug message", log_locals=True)
```

### JSON Pretty Printing
```python
console.print_json(data={"key": "value"})
```

### Export to File
```python
console = Console(record=True)
console.print("Content to export")
console.save_html("output.html")
```

## Notes and Suggestions

- **Recording**: Set `record=True` in constructor to enable export functionality
- **Thread Safety**: The Console class uses internal locking for thread safety
- **Performance**: For high-performance scenarios, consider using `out()` instead of `print()`
- **Memory**: Large exports may consume significant memory; use `clear=True` in export methods
- **Environment Variables**: Respects `NO_COLOR`, `FORCE_COLOR`, `COLUMNS`, `LINES` environment variables

## Dependencies

The module integrates with many Rich components:
- Segment rendering system
- Style and theme management  
- Text and markup processing
- Color system handling
- Platform-specific terminal features

This comprehensive console system provides the foundation for Rich's powerful terminal formatting and display capabilities.