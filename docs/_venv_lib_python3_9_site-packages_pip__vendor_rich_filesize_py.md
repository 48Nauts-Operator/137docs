<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# File Size Reporting Module

## Overview

This module provides functions for converting file sizes (in bytes) into human-readable string representations using different unit standards. The code is borrowed from [PyFilesystem2](https://github.com/PyFilesystem/pyfilesystem2) and focuses on generating properly formatted file size strings with appropriate units.

## Purpose

The module addresses the need to display file sizes in a user-friendly format by:
- Converting raw byte values into appropriate units (KB, MB, GB, etc.)
- Supporting different unit standards and conventions
- Providing customizable formatting options (precision, separators)
- Handling edge cases for small file sizes

## Functions

### `decimal(size, *, precision=1, separator=" ")`

**Main public function** for converting file sizes using decimal (SI) prefixes.

#### Parameters:
- `size` (int): File size in bytes
- `precision` (int, optional): Number of decimal places to display (default: 1)
- `separator` (str, optional): String between value and unit (default: " ")

#### Returns:
- `str`: Formatted file size string

#### Examples:
```python
>>> decimal(30000)
'30.0 kB'
>>> decimal(30000, precision=2, separator="")
'30.00kB'
```

#### Unit Convention:
Uses powers of 1000 with SI prefixes (kB, MB, GB, TB, PB, EB, ZB, YB), where `1000 B = 1 kB`. This matches the format used by:
- USB flash drive manufacturers
- Mac OS X (since v10.6) for file size reporting

### `_to_str(size, suffixes, base, *, precision=1, separator=" ")`

**Internal helper function** that performs the actual conversion logic.

#### Parameters:
- `size` (int): File size in bytes
- `suffixes` (Iterable[str]): Available unit suffixes
- `base` (int): Base for unit calculations (1000 or 1024)
- `precision` (int, optional): Decimal places
- `separator` (str, optional): Value-unit separator

#### Special Handling:
- Returns `"1 byte"` for exactly 1 byte
- Returns `"{size:,} bytes"` for sizes smaller than the base
- Uses proper formatting with thousands separators

### `pick_unit_and_suffix(size, suffixes, base)`

**Utility function** for determining the appropriate unit and suffix for a given file size.

#### Parameters:
- `size` (int): File size in bytes
- `suffixes` (List[str]): Available unit suffixes
- `base` (int): Base for calculations

#### Returns:
- `Tuple[int, str]`: Unit value and corresponding suffix

## Module Exports

The module explicitly exports only:
```python
__all__ = ["decimal"]
```

## Notes and Suggestions

### Current Limitations:
- Only the `decimal` function is currently exported, though the module mentions supporting "several different units"
- Missing implementation for binary prefixes (1024-based: KiB, MiB, GiB)
- No traditional function for computing 1024-based units with KB, MB, GB suffixes

### Potential Improvements:
1. **Add binary prefix function**:
   ```python
   def binary(size, *, precision=1, separator=" "):
       """Convert using binary prefixes (1024-based): KiB, MiB, GiB"""
       return _to_str(size, ("KiB", "MiB", "GiB", "TiB", "PiB"), 1024, 
                      precision=precision, separator=separator)
   ```

2. **Add traditional function**:
   ```python
   def traditional(size, *, precision=1, separator=" "):
       """Convert using traditional units (1024-based): KB, MB, GB"""
       return _to_str(size, ("KB", "MB", "GB", "TB", "PB"), 1024,
                      precision=precision, separator=separator)
   ```

3. **Consider exporting utility functions** if they're meant for external use

### Usage Recommendations:
- Use `decimal()` when displaying file sizes to end users (matches modern OS conventions)
- The module is well-suited for file managers, backup tools, or any application displaying file information
- Consider the target audience when choosing between decimal and binary representations

## References

- [Wikipedia: Binary prefix](https://en.wikipedia.org/wiki/Binary_prefix)
- [PyFilesystem2 GitHub Repository](https://github.com/PyFilesystem/pyfilesystem2)