<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Rich Prompts Module Documentation

## Overview

This module provides a flexible and user-friendly way to create interactive command-line prompts using the Rich library. It implements a hierarchy of prompt classes that handle user input validation, type conversion, and error handling with rich text formatting.

## Purpose

The module is designed to:
- Create interactive CLI prompts with rich text formatting
- Handle input validation and type conversion automatically  
- Provide a consistent interface for different input types (strings, integers, floats, booleans)
- Support features like default values, choices validation, and password input

## Classes and Functions

### Exception Classes

#### `PromptError`
Base exception class for all prompt-related errors.

#### `InvalidResponse`
Exception thrown when user input is invalid during validation.

```python
class InvalidResponse(PromptError):
    def __init__(self, message: TextType) -> None:
        self.message = message
```

### Core Classes

#### `PromptBase[PromptType]`
Generic base class that implements the core prompt functionality.

**Key Parameters:**
- `prompt`: The text to display to the user
- `console`: Rich Console instance (optional)
- `password`: Enable password input mode
- `choices`: List of valid input options
- `case_sensitive`: Whether choice matching is case-sensitive
- `show_default`: Display default value in prompt
- `show_choices`: Display available choices in prompt

**Important Methods:**

##### `ask()` (Class Method)
Shortcut method to create and run a prompt in one call.

```python
filename = Prompt.ask("Enter a filename")
```

##### `process_response(value: str) -> PromptType`
Converts and validates user input. Override this method in subclasses for custom validation logic.

##### `make_prompt(default: DefaultType) -> Text`
Constructs the formatted prompt text including choices and default values.

### Concrete Prompt Classes

#### `Prompt`
Returns string input from the user.

```python
name = Prompt.ask("Enter your name")
```

#### `IntPrompt` 
Returns integer input with automatic validation.

```python
age = IntPrompt.ask("Enter your age")
```

#### `FloatPrompt`
Returns float input with automatic validation.

```python
temperature = FloatPrompt.ask("Enter temperature")
```

#### `Confirm`
Boolean yes/no confirmation prompt.

```python
if Confirm.ask("Continue?", default=True):
    # proceed with operation
```

## Usage Examples

### Basic String Prompt
```python
from rich.prompt import Prompt

name = Prompt.ask("What's your name?")
```

### Prompt with Default Value
```python
city = Prompt.ask("Enter your city", default="New York")
```

### Prompt with Choices
```python
color = Prompt.ask(
    "Pick a color", 
    choices=["red", "green", "blue"],
    case_sensitive=False
)
```

### Integer Prompt with Validation Loop
```python
while True:
    number = IntPrompt.ask("Enter a number (1-10)", default=5)
    if 1 <= number <= 10:
        break
    print("Number must be between 1 and 10")
```

### Password Input
```python
password = Prompt.ask("Enter password", password=True)
```

### Confirmation Prompt
```python
if Confirm.ask("Delete all files?", default=False):
    # perform deletion
```

## Key Features

### Input Validation
- Automatic type conversion and validation
- Custom error messages for different prompt types
- Retry loop until valid input is received

### Rich Text Support
- Markup support in prompt text: `[b]bold[/b]`, `[i]italic[/i]`
- Styled error messages and defaults
- Emoji support in prompts

### Flexible Configuration
- Optional default values
- Choice validation with case sensitivity options
- Password masking
- Customizable display of defaults and choices

## Notes and Suggestions

### Best Practices
- Always provide clear, descriptive prompt text
- Use appropriate prompt types (`IntPrompt` for numbers, `Confirm` for yes/no)
- Set reasonable defaults when possible
- Use choices validation to prevent invalid input

### Customization
- Extend `PromptBase` for custom prompt types
- Override `process_response()` for custom validation logic
- Override `render_default()` for custom default value display

### Error Handling
- The module handles validation errors gracefully with retry loops
- Custom error messages can be set via class attributes
- Users see formatted error messages and can retry input

### Performance Considerations
- Input validation happens in real-time
- Choice validation is optimized for both case-sensitive and case-insensitive matching
- Console operations are handled efficiently through the Rich library

This module provides a robust foundation for creating professional command-line interfaces with minimal code while maintaining rich formatting and user experience.