<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Rich Repr Module Documentation

## Overview

This module provides decorators and utilities for automatically generating rich string representations (`__repr__`) for Python classes. It's designed to work with the Rich library ecosystem and provides two main approaches for creating readable object representations.

## Purpose

- **Automatic `__repr__` generation**: Creates string representations without manual implementation
- **Rich integration**: Works seamlessly with the Rich library for enhanced console output
- **Flexible formatting**: Supports both standard `Class(args)` and angular `<Class args>` formats
- **Intelligent parameter handling**: Automatically inspects class constructors to generate representations

## Key Components

### Type Definitions

```python
Result = Iterable[Union[Any, Tuple[Any], Tuple[str, Any], Tuple[str, Any, Any]]]
RichReprResult = Result
```

These type aliases define the expected return format for `__rich_repr__` methods:
- Single values: `Any`
- Positional values: `Tuple[Any]`
- Named values: `Tuple[str, Any]`
- Named values with defaults: `Tuple[str, Any, Any]`

### Exception Classes

#### `ReprError`

```python
class ReprError(Exception):
    """An error occurred when attempting to build a repr."""
```

Custom exception raised when automatic repr generation fails.

### Main Decorators

#### `@auto`

The primary decorator for automatic repr generation.

**Usage:**
```python
# Simple usage
@auto
class MyClass:
    pass

# With angular formatting
@auto(angular=True)
class MyClass:
    pass
```

**Features:**
- Automatically generates `__repr__` method
- If no `__rich_repr__` exists, creates one by inspecting the `__init__` method
- Supports both functional and standard parenthetical formatting

#### `@rich_repr`

Alias for `@auto` decorator with identical functionality.

**Usage:**
```python
@rich_repr
class MyClass:
    pass
```

## How It Works

### Automatic Generation Process

1. **Inspection**: Uses `inspect.signature()` to analyze the class's `__init__` method
2. **Parameter Classification**: Handles different parameter types:
   - `POSITIONAL_ONLY`: Yields attribute value directly
   - `POSITIONAL_OR_KEYWORD`/`KEYWORD_ONLY`: Yields name-value pairs with default handling
3. **Representation Building**: Creates formatted strings based on the yielded values

### Representation Formats

#### Standard Format
```python
ClassName(arg1, key=value, key2=value2)
```

#### Angular Format
```python
<ClassName arg1 key=value key2=value2>
```

## Usage Examples

### Basic Usage

```python
@auto
class Person:
    def __init__(self, name: str, age: int, city: str = "Unknown"):
        self.name = name
        self.age = age
        self.city = city

person = Person("John", 30, "New York")
print(person)  # Person('John', 30, city='New York')
```

### Custom Rich Repr

```python
@auto
class Product:
    def __init__(self, name: str, price: float):
        self.name = name
        self.price = price
    
    def __rich_repr__(self):
        yield self.name
        yield "price", f"${self.price:.2f}"
        yield "category", "electronics"

product = Product("Laptop", 999.99)
print(product)  # Product('Laptop', price='$999.99', category='electronics')
```

### Angular Format

```python
@auto(angular=True)
class Config:
    def __init__(self, debug: bool = False, port: int = 8000):
        self.debug = debug
        self.port = port

config = Config(debug=True)
print(config)  # <Config debug=True port=8000>
```

## Important Notes

### Default Value Handling
- Parameters with default values are only included in the repr if they differ from the default
- This keeps representations clean and focuses on non-default values

### Error Handling
- If automatic generation fails, a `ReprError` is raised with details about the failure
- This typically occurs when attribute names don't match constructor parameters

### Rich Library Integration
- Works seamlessly with Rich console output
- Supports width-constrained formatting for better display in terminals

## Best Practices

1. **Attribute Naming**: Ensure class attributes match constructor parameter names for automatic generation
2. **Custom Repr**: Implement `__rich_repr__` for complex objects that need custom representation logic
3. **Default Values**: Use meaningful defaults in constructors to benefit from automatic default handling
4. **Error Handling**: Be prepared to catch `ReprError` when using automatic generation with complex classes

## Limitations

- Requires attributes to have the same names as constructor parameters
- May not work well with complex inheritance hierarchies
- Performance overhead from reflection when auto-generating representations