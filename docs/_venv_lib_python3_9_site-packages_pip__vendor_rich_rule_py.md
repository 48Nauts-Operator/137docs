<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Rule Module Documentation

## Overview

The `Rule` module provides functionality for creating horizontal rule lines in console applications. It's part of the Rich library and allows you to draw decorative separator lines with optional titles, making console output more visually organized and readable.

## Purpose

- Create horizontal lines (rules) to separate content in console output
- Support optional titles within the rule line
- Provide flexible alignment and styling options
- Handle different character sets and ASCII-only environments
- Integrate with Rich's rendering system for consistent formatting

## Classes

### `Rule`

A console renderable class that draws horizontal rule lines with optional titles.

#### Constructor Parameters

```python
Rule(
    title: Union[str, Text] = "",
    *,
    characters: str = "─",
    style: Union[str, Style] = "rule.line",
    end: str = "\n",
    align: AlignMethod = "center"
)
```

**Parameters:**
- `title`: Text to display within the rule (optional)
- `characters`: Character(s) used to draw the line (default: "─")
- `style`: Style applied to the rule line (default: "rule.line")
- `end`: Line ending character (default: "\n")
- `align`: Title alignment - "left", "center", or "right" (default: "center")

#### Key Methods

##### `__rich_console__(console, options)`
- **Purpose**: Main rendering method called by Rich's console system
- **Functionality**: 
  - Calculates appropriate width based on console options
  - Handles ASCII-only mode by falling back to "-" character
  - Renders title with proper alignment and truncation
  - Creates the final rule text with proper spacing

##### `_rule_line(chars_len, width)`
- **Purpose**: Helper method to create a simple rule line without title
- **Returns**: `Text` object containing the rule line
- **Usage**: Internal method for rendering title-less rules

##### `__rich_measure__(console, options)`
- **Purpose**: Provides measurement information for layout calculations
- **Returns**: `Measurement(1, 1)` indicating minimum and maximum height

## Features

### Title Alignment Options

- **Center**: Title appears in the middle with equal rule segments on both sides
- **Left**: Title appears at the left with rule extending to the right
- **Right**: Title appears at the right with rule extending from the left

### Smart Text Handling

- Automatic truncation with ellipsis when title is too long
- Newline replacement with spaces in titles
- Tab expansion for proper formatting
- Cell-width aware calculations for Unicode characters

### ASCII Compatibility

- Automatic fallback to "-" character in ASCII-only mode
- Preserves custom characters when they're ASCII-compatible

## Usage Examples

```python
from rich.console import Console
from rich.rule import Rule

console = Console()

# Simple rule without title
console.print(Rule())

# Rule with centered title
console.print(Rule("Section 1"))

# Rule with custom characters and left alignment
console.print(Rule("Important", characters="=", align="left"))

# Rule with custom style
console.print(Rule("Warning", style="bold red"))
```

## Error Handling

The class includes validation for:

- **Character width**: Ensures `characters` parameter has at least 1 cell width
- **Alignment values**: Validates that `align` is one of "left", "center", or "right"

## Notes and Suggestions

### Best Practices

- Use meaningful titles to clearly separate content sections
- Consider the target console width when designing rule layouts
- Test with both Unicode and ASCII-only environments
- Use consistent styling throughout your application

### Performance Considerations

- The class efficiently handles width calculations to minimize rendering overhead
- Text truncation is applied intelligently to prevent layout issues
- Cell-width calculations ensure proper alignment across different character sets

### Integration Notes

- Inherits from `JupyterMixin` for Jupyter notebook compatibility
- Fully compatible with Rich's styling and theming system
- Works seamlessly with other Rich renderables in layouts

## Command Line Usage

The module includes a simple command-line interface for testing:

```bash
python -m rule "Your Title Here"
```

This creates a console and prints a rule with the specified title, useful for quick testing and demonstration purposes.