<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Text Module Documentation

## Overview

The `text.py` module is a core component of the Rich library that provides the `Text` class for handling styled text with color, formatting, and layout capabilities. This module enables creating, manipulating, and rendering text with various visual styles, justification, overflow handling, and advanced text processing features.

## Purpose

- **Styled Text Rendering**: Create text with colors, styles, and formatting
- **Text Layout**: Handle justification, alignment, wrapping, and overflow
- **Text Processing**: Split, join, highlight, and manipulate text while preserving styles
- **Console Integration**: Render styled text to console with proper formatting

## Key Classes

### `Span`

A `NamedTuple` that represents a styled region within text.

```python
class Span(NamedTuple):
    start: int      # Start index of the span
    end: int        # End index of the span  
    style: Union[str, Style]  # Style applied to this span
```

**Key Methods:**
- `split(offset)` - Split span at given offset
- `move(offset)` - Move span by offset amount
- `right_crop(offset)` - Crop span at offset
- `extend(cells)` - Extend span by number of cells

### `Text`

The main class for creating and manipulating styled text.

```python
class Text(JupyterMixin):
    def __init__(
        self,
        text: str = "",
        style: Union[str, Style] = "",
        *,
        justify: Optional["JustifyMethod"] = None,
        overflow: Optional["OverflowMethod"] = None,
        no_wrap: Optional[bool] = None,
        end: str = "\n",
        tab_size: Optional[int] = None,
        spans: Optional[List[Span]] = None,
    )
```

## Important Methods

### Creation Methods

- **`from_markup(text, style, emoji, ...)`** - Create Text from markup string
- **`from_ansi(text, style, ...)`** - Create Text from ANSI escape codes
- **`styled(text, style, ...)`** - Create Text with pre-applied style
- **`assemble(*parts, ...)`** - Combine strings and styles into Text

### Text Manipulation

- **`append(text, style)`** - Add text with optional style
- **`stylize(style, start, end)`** - Apply style to text region
- **`highlight_regex(pattern, style)`** - Highlight text matching regex
- **`highlight_words(words, style)`** - Highlight specific words
- **`split(separator, include_separator, allow_blank)`** - Split text into lines
- **`join(lines)`** - Join Text instances with separator

### Layout and Formatting

- **`wrap(console, width, justify, overflow, ...)`** - Word wrap text
- **`truncate(max_width, overflow, pad)`** - Truncate text to width
- **`align(align, width, character)`** - Align text within width
- **`pad(count, character)`** - Add padding around text
- **`set_length(new_length)`** - Set exact text length

### Advanced Features

- **`expand_tabs(tab_size)`** - Convert tabs to spaces
- **`detect_indentation()`** - Auto-detect code indentation
- **`with_indent_guides(indent_size, character, style)`** - Add indentation guides

## Properties

- **`plain`** - Get/set plain text without styles
- **`markup`** - Get console markup representation
- **`spans`** - Get/set list of style spans
- **`cell_len`** - Get number of cells for rendering

## Usage Examples

### Basic Text Creation

```python
from rich.text import Text

# Simple text
text = Text("Hello World", style="bold red")

# From markup
text = Text.from_markup("[bold]Hello[/bold] [italic blue]World[/italic blue]")

# Assemble from parts
text = Text.assemble(
    "Hello ", 
    ("World", "bold red"),
    style="white on blue"
)
```

### Text Styling

```python
text = Text("Hello World")
text.stylize("bold", 0, 5)  # Make "Hello" bold
text.stylize("red", 6, 11)  # Make "World" red

# Highlight words
text.highlight_words(["Hello"], "yellow")
text.highlight_regex(r"\w+", "underline")
```

### Text Layout

```python
# Justify and wrap text
text = Text("Long text content...", justify="center")
wrapped = text.wrap(console, width=40)

# Align text
text.align("center", width=20)
text.pad_left(5, ".")
```

## Type Definitions

```python
TextType = Union[str, "Text"]
GetStyleCallable = Callable[[str], Optional[StyleType]]
```

## Constants

```python
DEFAULT_JUSTIFY: "JustifyMethod" = "default"
DEFAULT_OVERFLOW: "OverflowMethod" = "fold"
```

## Notes and Suggestions

### Performance Considerations

- Use `append_text()` instead of `append()` when appending Text instances for better performance
- The `plain` property consolidates internal text fragments when accessed
- Style spans are efficiently managed during text operations

### Best Practices

- Use `from_markup()` for complex styled text creation
- Prefer `assemble()` for programmatically building text with multiple styles
- Use `copy()` to create independent copies before modification
- Consider `no_wrap=True` for console output that shouldn't wrap

### Common Patterns

```python
# Creating styled console output
text = Text.assemble(
    ("ERROR: ", "bold red"),
    "Something went wrong",
    justify="left"
)

# Processing code with indentation
code_text = Text(source_code)
code_text.expand_tabs(4)
styled_code = code_text.with_indent_guides(style="dim")

# Highlighting search terms
content = Text(document_text)
matches = content.highlight_words(search_terms, "black on yellow")
```

### Integration Notes

- Inherits from `J