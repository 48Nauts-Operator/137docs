<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Six Library Documentation

## Overview

This file implements the **six** library, a Python 2 and 3 compatibility library. The primary purpose of six is to provide utilities for writing code that runs on both Python 2 and 3 without modification.

**Version:** 1.16.0  
**Author:** Benjamin Peterson  
**License:** MIT License

## Purpose

The six library solves compatibility issues between Python 2 and 3 by:
- Providing unified interfaces for moved/renamed modules and functions
- Handling string/bytes differences between versions
- Managing metaclass syntax differences
- Offering version-specific utilities and constants

## Key Features

### Version Detection Constants

```python
PY2 = sys.version_info[0] == 2    # True if running Python 2
PY3 = sys.version_info[0] == 3    # True if running Python 3
PY34 = sys.version_info[0:2] >= (3, 4)  # True if Python 3.4+
```

### Type Definitions

The library provides unified type references:

- **`string_types`** - Tuple of string types for isinstance() checks
- **`integer_types`** - Tuple of integer types
- **`class_types`** - Tuple of class types
- **`text_type`** - Unicode string type (`str` in PY3, `unicode` in PY2)
- **`binary_type`** - Bytes type (`bytes` in PY3, `str` in PY2)

## Important Classes

### `MovedModule`
Handles modules that were moved/renamed between Python versions.

```python
class MovedModule(_LazyDescr):
    def __init__(self, name, old, new=None):
        # Maps old module names to new ones
```

### `MovedAttribute` 
Handles individual functions/attributes that moved between modules.

```python
class MovedAttribute(_LazyDescr):
    def __init__(self, name, old_mod, new_mod, old_attr=None, new_attr=None):
        # Maps old module.attribute to new module.attribute
```

### `_SixMetaPathImporter`
A PEP 302 compliant meta path importer that enables `six.moves` functionality.

**Key Methods:**
- `find_module()` - Locates six.moves modules
- `load_module()` - Loads the appropriate Python 2 or 3 module
- `find_spec()` - Python 3.4+ module finder

## Important Functions

### String/Text Handling

```python
def b(s):
    """Convert string to bytes literal"""

def u(s):  
    """Convert string to text literal"""

def ensure_binary(s, encoding="utf-8", errors="strict"):
    """Coerce s to binary type (bytes)"""
    
def ensure_str(s, encoding="utf-8", errors="strict"):
    """Coerce s to native str type"""
    
def ensure_text(s, encoding="utf-8", errors="strict"):
    """Coerce s to text type (unicode)"""
```

### Execution Utilities

```python
def exec_(code, globs=None, locs=None):
    """Execute code in namespace (handles exec statement vs function)"""

def reraise(tp, value, tb=None):
    """Re-raise exception with traceback"""

def raise_from(value, from_value):
    """Raise exception from another (Python 3 'raise from' syntax)"""
```

### Metaclass Utilities

```python
def with_metaclass(meta, *bases):
    """Create base class with metaclass (works in both Python 2 & 3)"""

def add_metaclass(metaclass):
    """Class decorator for adding metaclass"""
```

### Iterator Functions

```python
def iterkeys(d, **kw):
    """Return iterator over dictionary keys"""
    
def itervalues(d, **kw):
    """Return iterator over dictionary values"""
    
def iteritems(d, **kw):
    """Return iterator over dictionary items"""
```

## Six.moves Module

The `six.moves` module provides a compatibility layer for modules that were reorganized in Python 3:

### Common Moved Modules
- `six.moves.builtins` - `__builtin__` (PY2) → `builtins` (PY3)
- `six.moves.configparser` - `ConfigParser` → `configparser`  
- `six.moves.http_client` - `httplib` → `http.client`
- `six.moves.urllib` - Unified urllib interface
- `six.moves.tkinter` - `Tkinter` → `tkinter`
- `six.moves.queue` - `Queue` → `queue`

### Usage Example

```python
import six.moves.urllib.parse as urlparse
import six.moves.http_client as http_client

# Works in both Python 2 and 3
parsed = urlparse.urlparse('http://example.com')
conn = http_client.HTTPConnection('example.com')
```

## Usage Examples

### Basic Version Checking
```python
import six

if six.PY2:
    # Python 2 specific code
    raw_input("Enter something: ")
else:
    # Python 3 specific code  
    input("Enter something: ")
```

### String Handling
```python
import six

# Create byte strings
data = six.b("hello world")

# Create text strings  
text = six.u("hello world")

# Ensure proper string type
binary_data = six.ensure_binary("hello")
text_data = six.ensure_text(b"hello")
```

### Dictionary Iteration
```python
import six

d = {'a': 1, 'b': 2}

# Works in both Python 2 & 3
for key in six.iterkeys(d):
    print(key)
    
for value in six.itervalues(d):
    print(value)
```

## Notes and Suggestions

### Performance Considerations
- The library uses lazy loading for moved modules to minimize import overhead
- Meta path importer only activates when six.moves modules are accessed

### Best Practices
1. **Import specific functions**