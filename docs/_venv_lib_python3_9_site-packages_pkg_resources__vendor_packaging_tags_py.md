<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Python Wheel Tags Module

This module provides functionality for generating and parsing platform compatibility tags for Python wheels. It's part of the Python packaging ecosystem and helps determine which wheel files are compatible with a specific Python installation.

## Purpose

The module generates standardized tags that describe:
- **Interpreter**: The Python implementation (CPython, PyPy, etc.)
- **ABI**: Application Binary Interface compatibility
- **Platform**: Operating system and architecture compatibility

These tags are used in wheel filenames to indicate compatibility (e.g., `package-1.0-cp39-cp39-win_amd64.whl`).

## Key Classes

### `Tag`

Represents a wheel compatibility tag triple (interpreter-abi-platform).

```python
class Tag(object):
    def __init__(self, interpreter, abi, platform):
        # Creates immutable tag instance with lowercase normalized values
    
    @property
    def interpreter(self):  # Returns interpreter string
    @property 
    def abi(self):         # Returns ABI string
    @property
    def platform(self):    # Returns platform string
```

**Features:**
- Immutable and hashable
- Supports equality comparison
- String representation: `"interpreter-abi-platform"`

### `_ELFFileHeader`

Parses ELF file headers on Linux systems to determine architecture details.

```python
class _ELFFileHeader(object):
    def __init__(self, file):
        # Parses ELF header from binary file
```

## Important Functions

### Tag Generation Functions

#### `cpython_tags(python_version=None, abis=None, platforms=None)`

Generates tags for CPython interpreter with priority ordering:

```python
# Example usage
for tag in cpython_tags():
    print(tag)  # cp39-cp39-linux_x86_64, cp39-abi3-linux_x86_64, etc.
```

#### `generic_tags(interpreter=None, abis=None, platforms=None)`

Generates tags for non-CPython interpreters:

```python
# For PyPy, Jython, etc.
for tag in generic_tags():
    print(tag)  # pp38-pypy38_pp73-linux_x86_64, etc.
```

#### `compatible_tags(python_version=None, interpreter=None, platforms=None)`

Generates backward-compatible tags:

```python
# py39-none-any, py38-none-any, etc.
for tag in compatible_tags():
    print(tag)
```

### Platform Detection Functions

#### `mac_platforms(version=None, arch=None)`

Generates macOS platform tags with version compatibility:

```python
# Yields: macosx_10_15_x86_64, macosx_10_14_x86_64, etc.
for platform in mac_platforms():
    print(platform)
```

#### `_linux_platforms(is_32bit=False)`

Generates Linux platform tags including manylinux compatibility:

```python
# Yields: linux_x86_64, manylinux2014_x86_64, manylinux2010_x86_64, etc.
```

### Utility Functions

#### `parse_tag(tag)`

Parses compressed tag strings into `Tag` objects:

```python
tags = parse_tag("cp39.cp38-none-linux_x86_64.win_amd64")
# Returns frozenset of Tag objects for all combinations
```

#### `sys_tags()`

**Main entry point** - returns all compatible tags for the current system:

```python
for tag in sys_tags():
    print(tag)  # All tags in priority order
```

## Architecture-Specific Features

### Linux ARM Detection
- Detects hard-float ABI (`armhf`) vs soft-float
- Uses ELF header parsing for accurate detection

### macOS Universal Binaries
- Supports multiple binary formats: `intel`, `fat32`, `fat64`, `universal`
- Handles version compatibility across macOS releases

### Manylinux Compatibility
- Supports `manylinux1`, `manylinux2010`, `manylinux2014` standards
- Checks glibc version compatibility
- Falls back through compatibility levels

## Usage Notes

### Performance Considerations
- Functions cache platform detection where possible
- ELF parsing only occurs once per process
- Use `sys_tags()` for most applications

### Compatibility
- Supports Python 2.7+ (with compatibility shims)
- Handles missing system information gracefully
- Provides warnings for configuration issues

### Error Handling
```python
# Functions generally don't raise exceptions
# Missing information results in conservative defaults
# Warnings logged for debugging purposes
```

## Example Usage

```python
# Get all compatible tags for current system
current_tags = list(sys_tags())

# Check if a wheel is compatible
wheel_tags = parse_tag("cp39-cp39-linux_x86_64")
is_compatible = bool(wheel_tags.intersection(current_tags))

# Generate tags for specific configuration  
custom_tags = list(cpython_tags(
    python_version=(3, 9),
    platforms=["linux_x86_64", "linux_aarch64"]
))
```

## Dependencies

- **Standard Library**: `platform`, `sys`, `sysconfig`, `struct`, `os`
- **Optional**: `ctypes` (for glibc detection fallback)
- **Internal**: `_manylinux` module (when available)

This module is essential for Python package managers like pip to determine wheel compatibility and installation candidates.