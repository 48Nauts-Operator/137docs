<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# macOS Platform Directories Module

## Overview

This module provides macOS-specific directory paths for applications, following Apple's official file system guidelines. It implements platform-specific directory resolution for data, configuration, cache, and user directories on macOS systems.

## Purpose

The module extends the `PlatformDirsABC` base class to provide macOS-compliant directory paths that applications can use to store:
- Application data and configuration files
- Cache files  
- Log files
- User-specific directories (Documents, Downloads, etc.)
- Temporary runtime files

## Key Features

- **Apple Guidelines Compliance**: Follows [Apple's File System Programming Guide](https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/MacOSXDirectories/MacOSXDirectories.html)
- **Homebrew Support**: Special handling for Python installations managed by Homebrew
- **Multipath Support**: Can return multiple paths separated by colons when enabled
- **App Name/Version Integration**: Automatically appends application name and version to paths

## Classes

### `MacOS`

The main class that provides macOS-specific directory paths.

**Inherits from**: `PlatformDirsABC`

#### Key Properties

##### Data Directories
- **`user_data_dir`**: User-specific data directory
  ```python
  # Returns: ~/Library/Application Support/$appname/$version
  ```

- **`site_data_dir`**: System-wide data directory with Homebrew support
  ```python
  # Standard: /Library/Application Support/$appname/$version
  # Homebrew: /opt/homebrew/share/$appname/$version
  # Multipath: Both paths joined with ':'
  ```

##### Configuration Directories
- **`user_config_dir`**: User configuration directory (same as `user_data_dir`)
- **`site_config_dir`**: System configuration directory (same as `site_data_dir`)

##### Cache Directories
- **`user_cache_dir`**: User-specific cache directory
  ```python
  # Returns: ~/Library/Caches/$appname/$version
  ```

- **`site_cache_dir`**: System-wide cache directory with Homebrew support
  ```python
  # Standard: /Library/Caches/$appname/$version
  # Homebrew: /opt/homebrew/var/cache/$appname/$version
  ```

##### User Directories
- **`user_documents_dir`**: `~/Documents`
- **`user_downloads_dir`**: `~/Downloads`
- **`user_pictures_dir`**: `~/Pictures`
- **`user_videos_dir`**: `~/Movies`
- **`user_music_dir`**: `~/Music`
- **`user_desktop_dir`**: `~/Desktop`

##### Runtime and Logging
- **`user_log_dir`**: `~/Library/Logs/$appname/$version`
- **`user_runtime_dir`**: `~/Library/Caches/TemporaryItems/$appname/$version`
- **`user_state_dir`**: Same as `user_data_dir`

## Usage Example

```python
from platformdirs import MacOS

# Create instance for your application
dirs = MacOS(appname="MyApp", version="1.0")

# Get user data directory
user_data = dirs.user_data_dir
# Result: ~/Library/Application Support/MyApp/1.0

# Get cache directory
cache_dir = dirs.user_cache_dir
# Result: ~/Library/Caches/MyApp/1.0

# Enable multipath for site directories
dirs_multipath = MacOS(appname="MyApp", multipath=True)
site_data = dirs_multipath.site_data_dir
# May return multiple paths separated by ':'
```

## Special Considerations

### Homebrew Integration

The module automatically detects if Python is running under Homebrew management by checking if `sys.prefix` starts with `/opt/homebrew`. When detected:

- **Data directories** use `/opt/homebrew/share/` instead of `/Library/Application Support/`
- **Cache directories** use `/opt/homebrew/var/cache/` instead of `/Library/Caches/`
- **Multipath mode** returns both Homebrew and standard system paths

### Path vs Directory Methods

Some properties have both `_dir` (returns string) and `_path` (returns `Path` object) variants:
- `site_data_path`: Returns only the first path as a `Path` object, even in multipath mode
- `site_cache_path`: Similar behavior for cache directories

## Notes and Recommendations

- **Thread Safety**: Properties are computed on each access, making them thread-safe
- **Path Existence**: The module doesn't create directories automatically unless `ensure_exists=True` is used
- **Permissions**: Be aware that site-wide directories may require elevated permissions
- **Version Management**: Include version numbers in your app configuration to handle upgrades cleanly

## Dependencies

- `os.path`: For path manipulation and expansion
- `sys`: For detecting Python installation details
- `typing`: For type hints and annotations
- `.api.PlatformDirsABC`: Base class providing common functionality