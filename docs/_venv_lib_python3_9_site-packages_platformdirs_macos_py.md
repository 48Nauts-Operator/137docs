<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# macOS Platform Directories Module

## Overview

This module provides macOS-specific implementations for platform directories, following Apple's official file system guidelines. It defines where applications should store different types of data on macOS systems, including support for Homebrew-managed Python installations.

## Purpose

The `MacOS` class implements platform-specific directory paths for:
- Application data storage
- Configuration files
- Cache files
- User documents and media folders
- Runtime/temporary files

The implementation follows [Apple's File System Programming Guide](https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/MacOSXDirectories/MacOSXDirectories.html) for proper macOS directory usage.

## Main Class

### `MacOS(PlatformDirsABC)`

Inherits from `PlatformDirsABC` and provides macOS-specific directory implementations.

**Key Features:**
- Follows Apple's directory conventions
- Automatic Homebrew detection and path handling
- Support for multipath configurations
- App name and version integration

## Directory Properties

### Data Directories

#### `user_data_dir` → `str`
- **Returns:** User-specific data directory
- **Path:** `~/Library/Application Support/$appname/$version`
- **Usage:** Store user-specific application data

#### `site_data_dir` → `str`
- **Returns:** System-wide data directory (with Homebrew support)
- **Standard Path:** `/Library/Application Support/$appname/$version`
- **Homebrew Path:** `/opt/homebrew/share/$appname/$version`
- **Multipath:** Returns colon-separated paths when enabled

### Configuration Directories

#### `user_config_dir` → `str`
- **Returns:** Same as `user_data_dir`
- **Note:** macOS doesn't distinguish between data and config directories

#### `site_config_dir` → `str`
- **Returns:** Same as `site_data_dir`
- **Note:** macOS doesn't distinguish between data and config directories

### Cache Directories

#### `user_cache_dir` → `str`
- **Returns:** User-specific cache directory
- **Path:** `~/Library/Caches/$appname/$version`

#### `site_cache_dir` → `str`
- **Returns:** System-wide cache directory (with Homebrew support)
- **Standard Path:** `/Library/Caches/$appname/$version`
- **Homebrew Path:** `/opt/homebrew/var/cache/$appname/$version`

### User Media Directories

#### Standard User Directories
- `user_documents_dir` → `~/Documents`
- `user_downloads_dir` → `~/Downloads`
- `user_pictures_dir` → `~/Pictures`
- `user_videos_dir` → `~/Movies`
- `user_music_dir` → `~/Music`
- `user_desktop_dir` → `~/Desktop`

### State and Runtime Directories

#### `user_state_dir` → `str`
- **Returns:** Same as `user_data_dir`
- **Note:** macOS treats state data same as application data

#### `user_log_dir` → `str`
- **Returns:** User-specific log directory
- **Path:** `~/Library/Logs/$appname/$version`

#### `user_runtime_dir` → `str`
- **Returns:** User runtime/temporary directory
- **Path:** `~/Library/Caches/TemporaryItems/$appname/$version`

## Special Features

### Homebrew Integration

The module automatically detects Homebrew-managed Python installations by checking if `sys.prefix` starts with `/opt/homebrew`. When detected:

- **Data directories** use `/opt/homebrew/share/`
- **Cache directories** use `/opt/homebrew/var/cache/`
- **Multipath support** provides both Homebrew and system paths

### Path Objects

Some properties return `Path` objects instead of strings:
- `site_data_path` → Returns first path as `Path` object
- `site_cache_path` → Returns first path as `Path` object

## Usage Example

```python
from platformdirs import MacOS

# Initialize with app info
dirs = MacOS(appname="MyApp", version="1.0")

# Get user data directory
user_data = dirs.user_data_dir
# Result: "~/Library/Application Support/MyApp/1.0"

# Get system cache directory (Homebrew-aware)
site_cache = dirs.site_cache_dir
# Result: "/opt/homebrew/var/cache/MyApp/1.0" (if Homebrew detected)
# or "/Library/Caches/MyApp/1.0" (standard macOS)

# Enable multipath for multiple locations
dirs.multipath = True
all_site_data = dirs.site_data_dir
# Result: "/opt/homebrew/share/MyApp/1.0:/Library/Application Support/MyApp/1.0"
```

## Notes and Recommendations

### Best Practices
- Use `user_data_dir` for user-specific application data
- Use `user_cache_dir` for temporary, recreatable data
- Use `user_log_dir` for application logs
- Respect the `ensure_exists` parameter to automatically create directories

### Platform-Specific Considerations
- macOS combines data and configuration in the same directories
- Homebrew paths take precedence when detected
- Runtime directories use TemporaryItems for proper cleanup
- All user directories expand the `~` symbol to the actual home path

### Inheritance
This class inherits utility methods from `PlatformDirsABC`:
- `_append_app_name_and_version()` - Adds app info to paths
- `_first_item_as_path_if_multipath()` - Handles multipath scenarios