<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Unix Platform Directories Module

This module provides Unix/Linux-specific implementations for platform directory handling, following the XDG Base Directory Specification.

## Purpose

The `Unix` class implements platform-specific directory location logic for Unix-like systems (Linux, FreeBSD, OpenBSD, NetBSD). It follows the [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) to determine standard locations for application data, configuration, cache, and other directories.

## Key Features

- **XDG Compliance**: Follows XDG Base Directory Specification
- **Environment Variable Support**: Respects XDG environment variables for directory overrides
- **Multi-platform Unix Support**: Handles different Unix variants with specific adaptations
- **User Media Directories**: Provides access to standard user directories (Documents, Downloads, etc.)
- **Multipath Support**: Can return multiple paths when appropriate

## Main Class

### `Unix(PlatformDirsABC)`

The primary class that implements Unix-specific directory resolution.

#### Key Properties

##### User Directories
- **`user_data_dir`**: User-specific data directory
  - Default: `~/.local/share/$appname/$version`
  - Override: `$XDG_DATA_HOME`

- **`user_config_dir`**: User-specific configuration directory
  - Default: `~/.config/$appname/$version` 
  - Override: `$XDG_CONFIG_HOME`

- **`user_cache_dir`**: User-specific cache directory
  - Default: `~/.cache/$appname/$version`
  - Override: `$XDG_CACHE_HOME`

- **`user_state_dir`**: User-specific state directory
  - Default: `~/.local/state/$appname/$version`
  - Override: `$XDG_STATE_HOME`

##### System-wide Directories
- **`site_data_dir`**: System-wide data directories
  - Default: `/usr/local/share` and `/usr/share`
  - Override: `$XDG_DATA_DIRS`

- **`site_config_dir`**: System-wide configuration directories
  - Default: `/etc/xdg`
  - Override: `$XDG_CONFIG_DIRS`

##### Media Directories
- **`user_documents_dir`**: Documents directory (`~/Documents`)
- **`user_downloads_dir`**: Downloads directory (`~/Downloads`) 
- **`user_pictures_dir`**: Pictures directory (`~/Pictures`)
- **`user_videos_dir`**: Videos directory (`~/Videos`)
- **`user_music_dir`**: Music directory (`~/Music`)
- **`user_desktop_dir`**: Desktop directory (`~/Desktop`)

##### Runtime Directories
- **`user_runtime_dir`**: User runtime directory
  - Default: `/run/user/$(id -u)` (Linux) or `/var/run/user/$(id -u)` (BSD)
  - Fallback: `/tmp/runtime-$(id -u)` (BSD)
  - Override: `$XDG_RUNTIME_DIR`

#### Iterator Methods

```python
def iter_config_dirs(self) -> Iterator[str]:
    """Yield all user and site configuration directories."""

def iter_data_dirs(self) -> Iterator[str]:
    """Yield all user and site data directories."""
```

## Helper Functions

### `_get_user_media_dir(env_var: str, fallback_tilde_path: str) -> str`

Resolves user media directories by checking:
1. XDG user-dirs.dirs configuration file
2. Environment variable
3. Fallback to default path

### `_get_user_dirs_folder(key: str) -> str | None`

Reads directory paths from the XDG user-dirs.dirs configuration file, which allows users to customize their media directory locations.

## Platform-Specific Behavior

### BSD Systems (FreeBSD, OpenBSD, NetBSD)
- Runtime directories use `/var/run` instead of `/run`
- Fallback runtime directory: `/tmp/runtime-$(id -u)`

### Windows Compatibility
- Includes a stub `getuid()` function that raises `RuntimeError` on Windows platforms

## Usage Example

```python
from platformdirs import Unix

dirs = Unix(appname="myapp", version="1.0")

# Get user-specific directories
config_dir = dirs.user_config_dir  # ~/.config/myapp/1.0
data_dir = dirs.user_data_dir      # ~/.local/share/myapp/1.0
cache_dir = dirs.user_cache_dir    # ~/.cache/myapp/1.0

# Get system-wide directories  
site_config = dirs.site_config_dir # /etc/xdg/myapp/1.0

# Iterate through all config directories
for config_path in dirs.iter_config_dirs():
    print(f"Config path: {config_path}")
```

## Notes and Recommendations

- **Environment Variables**: The implementation respects standard XDG environment variables, allowing users to customize directory locations
- **Multipath Support**: When `multipath=True`, some properties return multiple paths separated by `os.pathsep`
- **User Dirs Configuration**: Media directories are resolved through the user-dirs.dirs file when available, providing better integration with desktop environments
- **Error Handling**: The module includes appropriate error handling for missing directories and invalid configurations

## Dependencies

- `configparser`: For parsing user-dirs.dirs configuration
- `pathlib`: For path manipulation
- `os`: For environment variable access and path operations