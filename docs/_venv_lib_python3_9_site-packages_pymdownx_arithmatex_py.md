<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Arithmatex Extension Documentation

## Overview

**Arithmatex** is a Python-Markdown extension that preserves mathematical equations for use with MathJax or other math rendering libraries. It processes both inline and display (block) mathematical expressions and converts them into appropriate HTML structures.

## Purpose

The extension allows you to write mathematical equations in Markdown using various LaTeX-style syntaxes and automatically converts them to HTML elements that can be rendered by JavaScript math libraries like MathJax.

## Supported Math Syntaxes

### Inline Math
- `$equation$` - Dollar signs (with smart/non-smart modes)
- `\(equation\)` - Parentheses notation

### Block/Display Math
- `$$equation$$` - Double dollar signs
- `\[equation\]` - Square bracket notation  
- `\begin{env}....\end{env}` - LaTeX environment blocks (e.g., align, equation)

## Key Classes and Functions

### Main Extension Class

#### `ArithmatexExtension`
The primary extension class that extends Python-Markdown functionality.

**Configuration Options:**
- `tex_inline_wrap`: Wrapper text for inline content `['open', 'close']` - Default: `['\\(', '\\)']`
- `tex_block_wrap`: Wrapper text for block content `['open', 'close']` - Default: `['\\[', '\\]']`
- `smart_dollar`: Enable smart dollar processing - Default: `True`
- `block_syntax`: Enabled block syntaxes - Default: `['dollar', 'square', 'begin']`
- `inline_syntax`: Enabled inline syntaxes - Default: `['dollar', 'round']`
- `generic`: Output in generic format for non-MathJax libraries - Default: `False`
- `preview`: Insert preview for scripts - Default: `True`
- `block_tag`: HTML wrapper tag for blocks - Default: `'div'`
- `inline_tag`: HTML wrapper tag for inline - Default: `'span'`

### Processor Classes

#### `InlineArithmatexPattern`
Handles inline mathematical expressions.

```python
class InlineArithmatexPattern(InlineProcessor):
    def handleMatch(self, m, data):
        # Processes inline math patterns and returns formatted HTML elements
```

#### `BlockArithmatexProcessor`
Handles block/display mathematical expressions.

```python
class BlockArithmatexProcessor(BlockProcessor):
    def test(self, parent, block):
        # Tests if block contains math expressions
    
    def run(self, parent, blocks):
        # Processes and converts math blocks to HTML
```

### Formatter Functions

#### Current Formatters
- `arithmatex_inline_format(**kwargs)`: Configurable inline formatter
- `arithmatex_fenced_format(**kwargs)`: Configurable block formatter

#### Internal Formatters
- `_inline_mathjax_format()`: Creates MathJax-compatible inline elements
- `_inline_generic_format()`: Creates generic inline elements
- `_fence_mathjax_format()`: Creates MathJax-compatible block elements
- `_fence_generic_format()`: Creates generic block elements

## Usage Examples

### Basic Usage

```python
import markdown
from pymdownx import arithmatex

# Initialize with default settings
md = markdown.Markdown(extensions=['pymdownx.arithmatex'])

# Process markdown with math
text = """
Inline math: $E = mc^2$

Block math:
$$
\\int_0^\\infty e^{-x^2} dx = \\frac{\\sqrt{\\pi}}{2}
$$
"""

html = md.convert(text)
```

### Custom Configuration

```python
md = markdown.Markdown(
    extensions=['pymdownx.arithmatex'],
    extension_configs={
        'pymdownx.arithmatex': {
            'generic': True,
            'preview': False,
            'block_syntax': ['dollar', 'square'],
            'inline_syntax': ['dollar']
        }
    }
)
```

## Important Notes

### Deprecation Warnings
⚠️ Several formatter functions are deprecated:
- `inline_mathjax_preview_format()`
- `inline_mathjax_format()`
- `inline_generic_format()`
- `fence_mathjax_preview_format()`
- `fence_mathjax_format()`
- `fence_generic_format()`

**Recommendation:** Use the configurable `arithmatex_inline_format()` and `arithmatex_fenced_format()` functions instead.

### Smart Dollar Mode
When `smart_dollar` is enabled (default), the extension uses more intelligent parsing to avoid false positives with dollar signs in regular text.

### Generic vs MathJax Mode
- **MathJax Mode** (default): Outputs `<script type="math/tex">` elements optimized for MathJax
- **Generic Mode**: Outputs plain text wrapped in specified delimiters, compatible with other math libraries

## Regular Expression Patterns

The extension uses several regex patterns to detect mathematical expressions:

- `RE_SMART_DOLLAR_INLINE`: Smart dollar sign detection for inline math
- `RE_DOLLAR_INLINE`: Basic dollar sign detection
- `RE_BRACKET_INLINE`: Parentheses notation `\(...\)`
- `RE_DOLLAR_BLOCK`: Double dollar block syntax
- `RE_TEX_BLOCK`: LaTeX environment blocks
- `RE_BRACKET_BLOCK`: Square bracket notation `\[...\]`

## License

MIT License - Copyright (c) 2014 - 2017 Isaac Muse