<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Better Emphasis Extension Documentation

## Overview

The `pymdownx.betterem` module is a Python-Markdown extension that provides intelligent handling of emphasis (`em`) and strong (`strong`) text formatting using asterisks (`*`) and underscores (`_`). This extension improves upon the default Markdown emphasis processing by offering "smart" modes that better handle word boundaries and nested emphasis patterns.

## Purpose

This extension addresses limitations in standard Markdown emphasis processing by:

- Providing more intelligent parsing of asterisk and underscore patterns
- Handling complex nested emphasis combinations (e.g., `***bold and italic***`)
- Offering "smart" modes that respect word boundaries to avoid unintended emphasis
- Supporting various combinations of strong and emphasis formatting

## Key Classes

### `BetterEmExtension`

The main extension class that integrates with Python-Markdown.

**Configuration Options:**
- `smart_enable`: Controls intelligent emphasis handling
  - `"underscore"` (default): Smart processing for underscores only
  - `"asterisk"`: Smart processing for asterisks only  
  - `"all"`: Smart processing for both asterisks and underscores

**Key Methods:**
- `extendMarkdown(md)`: Registers the extension with Markdown parser
- `make_better(md)`: Configures pattern rules and replaces default emphasis processors

### Pattern Processors

#### `AsteriskProcessor`
Handles standard asterisk-based emphasis patterns (`*italic*`, `**bold**`, `***bold italic***`).

#### `SmartAsteriskProcessor` 
Provides intelligent asterisk processing that respects word boundaries and avoids unintended emphasis in cases like `my_var_name`.

#### `UnderscoreProcessor`
Handles standard underscore-based emphasis patterns (`_italic_`, `__bold__`, `___bold italic___`).

#### `SmartUnderscoreProcessor`
Provides intelligent underscore processing with word boundary awareness.

## Regular Expression Patterns

The module defines numerous regex patterns for different emphasis combinations:

### Basic Patterns
- `STAR_EM`: `*emphasis*`
- `STAR_STRONG`: `**strong**`  
- `UNDER_EM`: `_emphasis_`
- `UNDER_STRONG`: `__strong__`

### Complex Patterns
- `STAR_STRONG_EM`: `***strong and emphasis***`
- `STAR_EM_STRONG`: Mixed emphasis and strong combinations
- Smart variants with word boundary checking

## Usage Example

```python
import markdown
from pymdownx import betterem

# Basic usage with default settings (smart underscores)
md = markdown.Markdown(extensions=['pymdownx.betterem'])

# Enable smart processing for all emphasis types
md = markdown.Markdown(
    extensions=['pymdownx.betterem'],
    extension_configs={
        'pymdownx.betterem': {
            'smart_enable': 'all'
        }
    }
)

# Process markdown text
text = "This is **bold** and *italic* text with smart_variable_names"
html = md.convert(text)
```

## Installation and Setup

```python
def makeExtension(*args, **kwargs):
    """Return extension."""
    return BetterEmExtension(*args, **kwargs)
```

## Important Notes

- **Compatibility**: This extension should be used instead of the standard `smart_strong` package
- **Dependency**: Requires the `util` module from the same package for `PatternSequenceProcessor`
- **Performance**: Uses compiled regex patterns with `re.DOTALL | re.UNICODE` flags
- **Priority**: Replaces default Markdown emphasis processors with custom implementations

## Recommendations

1. **Use smart modes** when working with code or technical documentation containing underscores
2. **Test thoroughly** when migrating from standard Markdown emphasis processing
3. **Consider enabling smart processing for all patterns** (`smart_enable: "all"`) for consistent behavior
4. **Be aware of pattern precedence** - the extension handles complex nested patterns in a specific order

## License

MIT License - Copyright (c) 2014 - 2017 Isaac Muse