<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# PyMdown Extensions - Caret

This file implements the **Caret** extension for Python-Markdown, which adds support for insert (`<ins>`) and superscript (`<sup>`) HTML tags using simple caret-based syntax.

## Purpose

The Caret extension provides an easy way to add:
- **Insert tags** (`<ins>text</ins>`) using `^^text^^` syntax
- **Superscript tags** (`<sup>text</sup>`) using `^text^` syntax

This is useful for marking up text that has been added to a document or for creating mathematical expressions and footnote references.

## Syntax Examples

```markdown
This is ^^inserted text^^          <!-- <ins>inserted text</ins> -->
This is ^superscript^ text         <!-- <sup>superscript</sup> text -->
This is ^^^both^inserted^^^        <!-- <sup>both</sup><ins>inserted</ins> -->
```

## Key Components

### Pattern Processors

The extension includes several processor classes that handle different combinations of insert and superscript formatting:

#### `CaretProcessor`
- **Purpose**: Main processor for handling both insert and superscript patterns
- **Features**: Supports complex nested patterns and combinations
- **Usage**: Used when both insert and superscript are enabled (non-smart mode)

#### `CaretSmartProcessor`
- **Purpose**: Intelligent processor that handles word boundaries better
- **Features**: Treats `^^connected^^words^^` more intelligently
- **Usage**: Used when both insert and superscript are enabled with smart mode

#### Specialized Processors
- `CaretSupProcessor`: Handles only superscript patterns
- `CaretInsertProcessor`: Handles only insert patterns  
- `CaretSmartInsertProcessor`: Smart handling for insert-only patterns

### Main Extension Class

#### `InsertSupExtension`

**Configuration Options:**

| Option | Default | Description |
|--------|---------|-------------|
| `smart_insert` | `True` | Enables intelligent handling of connected words |
| `insert` | `True` | Enables insert (`^^text^^`) functionality |
| `superscript` | `True` | Enables superscript (`^text^`) functionality |

**Key Methods:**

- `__init__()`: Initializes the extension with default configuration
- `extendMarkdown()`: Integrates the extension into the Markdown parser

## Usage

### Basic Usage

```python
import markdown
from pymdownx import caret

# Create Markdown instance with Caret extension
md = markdown.Markdown(extensions=['pymdownx.caret'])

# Convert text
result = md.convert('This is ^^inserted^^ and ^superscript^ text')
```

### With Configuration

```python
md = markdown.Markdown(
    extensions=['pymdownx.caret'],
    extension_configs={
        'pymdownx.caret': {
            'smart_insert': False,  # Disable smart insert
            'superscript': False    # Disable superscript, only insert
        }
    }
)
```

## Pattern Matching

The extension uses complex regular expressions to handle various combinations:

- **Simple patterns**: `^^insert^^`, `^sup^`
- **Nested patterns**: `^^^insert^sup^^^`, `^^insert^sup,ins^^^`
- **Smart boundaries**: Avoids false matches with word boundaries
- **Escape handling**: Properly handles escaped caret characters

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

1. **Pattern Complexity**: The regex patterns are quite complex to handle edge cases. Be aware that very nested or unusual combinations might behave unexpectedly.

2. **Performance**: Multiple regex patterns are evaluated for each potential match, which could impact performance on large documents.

3. **Conflicts**: Be careful when using with other extensions that might also use caret characters.

### üí° Best Practices

1. **Test thoroughly**: Always test your specific use cases, especially with nested patterns
2. **Use smart mode**: Keep `smart_insert: True` for better handling of connected words
3. **Escape when needed**: Use backslashes to escape literal caret characters: `\^`

### üîß Customization

To extend functionality, you could:
- Add new pattern types by extending the `PATTERNS` lists
- Create custom processors for specific use cases
- Modify the regex patterns for different syntax requirements

## Dependencies

- `markdown`: Core Python-Markdown library
- `.util`: Internal utility module for pattern processing

---

*This extension is part of the PyMdown Extensions package and is licensed under the MIT License.*