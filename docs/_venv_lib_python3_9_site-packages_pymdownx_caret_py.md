<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# PyMdown Extensions - Caret Module

## Overview

The `pymdownx.caret` module is a Python-Markdown extension that provides simple syntax for creating insert (`<ins>`) and superscript (`<sup>`) HTML tags using caret (`^`) notation.

### Syntax Support

- **Insert tags**: `^^text^^` → `<ins>text</ins>`
- **Superscript tags**: `^text^` → `<sup>text</sup>`

## Key Features

- Support for both insert and superscript formatting
- Smart processing mode for better handling of connected words
- Configurable options to enable/disable specific features
- Complex pattern matching for nested and combined syntax

## Classes and Functions

### Main Extension Class

#### `InsertSupExtension`

The primary extension class that integrates with Python-Markdown.

**Configuration Options:**
- `smart_insert` (bool, default: True): Enables intelligent processing of connected words
- `insert` (bool, default: True): Enables insert tag support
- `superscript` (bool, default: True): Enables superscript tag support

**Key Methods:**
- `extendMarkdown(md)`: Registers processors and escape characters with the Markdown parser

### Processor Classes

#### `CaretProcessor`
Handles both insert and superscript matches with standard processing.

#### `CaretSmartProcessor` 
Provides smart processing for insert and superscript with improved word boundary detection.

#### `CaretSupProcessor`
Processes only superscript syntax (`^text^`).

#### `CaretInsertProcessor`
Processes only insert syntax (`^^text^^`).

#### `CaretSmartInsertProcessor`
Smart processing for insert syntax only.

## Usage

### Basic Usage

```python
import markdown
from pymdownx import caret

# Create Markdown instance with caret extension
md = markdown.Markdown(extensions=['pymdownx.caret'])

# Convert text
text = "This is ^^inserted^^ and this is ^superscript^"
html = md.convert(text)
# Output: "This is <ins>inserted</ins> and this is <sup>superscript</sup>"
```

### Configuration

```python
md = markdown.Markdown(
    extensions=['pymdownx.caret'],
    extension_configs={
        'pymdownx.caret': {
            'smart_insert': False,    # Disable smart processing
            'insert': True,           # Enable insert tags
            'superscript': False      # Disable superscript tags
        }
    }
)
```

## Pattern Matching

The module uses complex regular expressions to handle various syntax combinations:

### Supported Patterns

- `^^^text^^^` - Combined insert and superscript
- `^^text^^` - Insert only
- `^text^` - Superscript only
- Nested combinations like `^^text^super,text^^^`

### Smart Mode Features

When `smart_insert` is enabled:
- Better handling of word boundaries
- Improved processing of connected words
- More intelligent pattern matching to avoid false positives

## Technical Notes

### Regular Expression Patterns

The module defines numerous regex patterns for different syntax combinations:

```python
# Basic patterns
INS = r'(\^{{2}})(?!\s){}(?<!\s)\1'  # ^^insert^^
SUP = r'(\^)(?!\s){}(?<!\s)\1'       # ^super^
```

### Escape Characters

The extension automatically registers `^` as an escape character, and optionally ` ` (space) when superscript is enabled.

## Installation and Dependencies

- Requires `markdown` library
- Part of the `pymdownx` extension collection
- Uses internal `util` module for pattern processing

---

## License

Released under MIT License. See file header for full license text.

## Suggestions

1. **Performance**: For documents with many caret characters, consider disabling unused features (insert or superscript) to improve parsing speed.

2. **Debugging**: Use the smart mode for better text processing, but disable it if you encounter unexpected behavior with specific text patterns.

3. **Nesting**: Be careful with complex nested patterns as they may not always render as expected. Test thoroughly with your specific use cases.