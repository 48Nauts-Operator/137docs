<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# PyMdown Extensions - Details

## Overview

The `pymdownx.details` module is a Python Markdown extension that adds support for HTML5 `<details>` and `<summary>` elements using a special Markdown syntax. This extension allows users to create collapsible content sections in their Markdown documents.

## Purpose

This extension enables the creation of expandable/collapsible content blocks (often called "spoilers" or "disclosure widgets") that can be toggled by users. The content is wrapped in HTML5 `<details>` elements with optional `<summary>` titles.

## Syntax

The extension recognizes blocks starting with three question marks (`???`):

```markdown
??? "Summary Title"
    Content goes here
    
???+ "Open by Default"
    This will be expanded by default
    
??? note "Custom Class"
    This adds a CSS class
```

## Classes

### `DetailsProcessor`

The main block processor that handles the parsing and conversion of details blocks.

#### Key Attributes

- **`START`**: Regex pattern that matches the details block syntax
- **`COMPRESS_SPACES`**: Regex for normalizing multiple spaces
- **`current_sibling`**: Tracks the current sibling element during parsing
- **`content_indention`**: Manages indentation levels for nested content

#### Important Methods

##### `__init__(self, parser)`
Initializes the processor with the Markdown parser instance.

##### `detab_by_length(self, text, length)`
```python
def detab_by_length(self, text, length):
    """Remove a tab from the front of each line of the given text."""
```
- Removes specified number of spaces from the beginning of each line
- Returns processed text and remaining unprocessed content
- Handles indentation management for nested structures

##### `parse_content(self, parent, block)`
```python
def parse_content(self, parent, block):
    """Get sibling details."""
```
- Identifies and retrieves appropriate sibling elements
- Handles complex nesting scenarios with lists
- Manages indentation contexts for proper content placement

##### `test(self, parent, block)`
```python
def test(self, parent, block):
    """Test block."""
```
- Determines if a block should be processed by this extension
- Checks for the `???` syntax pattern
- Validates content relationships with existing details blocks

##### `run(self, parent, blocks)`
```python
def run(self, parent, blocks):
    """Convert to details/summary block."""
```
- Main processing method that converts Markdown to HTML elements
- Creates `<details>` and `<summary>` elements
- Handles optional attributes like `open` state and CSS classes

### `DetailsExtension`

The main extension class that integrates with Python Markdown.

#### Methods

##### `extendMarkdown(self, md)`
```python
def extendMarkdown(self, md):
    """Add Details to Markdown instance."""
```
- Registers the extension with the Markdown parser
- Adds the `DetailsProcessor` to the block processors with priority 105

## Usage Example

```python
import markdown
from pymdownx import details

md = markdown.Markdown(extensions=['pymdownx.details'])
result = md.convert("""
??? "Click to expand"
    This content is hidden by default.
    
???+ "Always visible"
    This content is expanded by default.
""")
```

## Generated HTML

The extension produces standard HTML5 details elements:

```html
<details>
    <summary>Click to expand</summary>
    <p>This content is hidden by default.</p>
</details>

<details open="open">
    <summary>Always visible</summary>
    <p>This content is expanded by default.</p>
</details>
```

## Features

- **Collapsible Content**: Creates expandable/collapsible sections
- **Default State Control**: Use `+` to make sections open by default
- **CSS Classes**: Support for custom CSS classes
- **Nested Content**: Handles complex nesting with lists and other elements
- **Proper Indentation**: Maintains correct indentation for nested structures

## Notes and Suggestions

### Usage Tips
- Use `???+` to create details that are open by default
- CSS classes can be added for custom styling
- Content must be properly indented under the details declaration
- Supports complex nesting with lists and other Markdown elements

### Limitations
- Requires proper indentation for content association
- Complex nesting scenarios may require careful formatting
- Browser support for `<details>` element should be considered for older browsers

### Integration
This extension integrates seamlessly with other PyMdown extensions and standard Python Markdown features.