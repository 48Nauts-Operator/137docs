<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# PyMdown Details Extension

## Overview

The `pymdownx.details` module is a Python Markdown extension that adds support for collapsible details blocks using HTML `<details>` and `<summary>` elements. This extension allows users to create expandable/collapsible content sections in their Markdown documents using a simple syntax.

## Purpose

This extension enables the creation of:
- Collapsible content sections
- Expandable detail blocks with custom titles
- CSS-styled details with custom classes
- Nested details within lists and other block elements

## Syntax

The extension recognizes blocks starting with `???` followed by optional modifiers:

```markdown
??? "Title"
    Content goes here

???+ "Open by default"
    This details block is open by default

??? note "Custom class"
    This has a 'note' CSS class applied
```

## Classes

### DetailsProcessor

The main block processor that handles the parsing and conversion of details syntax.

#### Key Attributes

- `START`: Regex pattern that matches the details block syntax
- `COMPRESS_SPACES`: Regex for normalizing whitespace in class names
- `current_sibling`: Tracks nested details blocks
- `content_indention`: Manages indentation for nested content

#### Important Methods

##### `__init__(self, parser)`
Initializes the processor with the Markdown parser instance.

##### `test(self, parent, block)`
- **Purpose**: Determines if a block should be processed as a details block
- **Returns**: Boolean indicating whether the block matches details syntax
- **Logic**: Checks for the `???` pattern or existing details context

##### `run(self, parent, blocks)`
- **Purpose**: Main processing method that converts matched blocks to HTML
- **Process**:
  1. Extracts the details header and content
  2. Parses optional state (`+` for open)
  3. Extracts title and CSS classes
  4. Creates `<details>` and `<summary>` HTML elements
  5. Processes nested content

##### `parse_content(self, parent, block)`
- **Purpose**: Handles complex nesting scenarios, especially with lists
- **Returns**: Tuple of (sibling_element, processed_block, remaining_content)
- **Features**: Manages indentation and context for nested structures

##### `detab_by_length(self, text, length)`
- **Purpose**: Removes specified number of spaces from the beginning of each line
- **Use case**: Normalizes indentation for nested content processing

### DetailsExtension

The main extension class that integrates the details processor with Markdown.

#### Methods

##### `extendMarkdown(self, md)`
- **Purpose**: Registers the DetailsProcessor with the Markdown parser
- **Priority**: 105 (processed before most other block elements)

## Usage Example

```python
import markdown
from pymdownx import details

# Create Markdown instance with details extension
md = markdown.Markdown(extensions=['pymdownx.details'])

# Convert Markdown with details blocks
text = '''
??? "Click to expand"
    This content is hidden by default.
    
    - List item 1
    - List item 2

???+ note "Always visible"
    This details block is open by default
    and has a 'note' CSS class.
'''

html = md.convert(text)
```

## Features

### Supported Syntax Variations

- **Basic details**: `??? "Title"`
- **Open by default**: `???+ "Title"`
- **Custom CSS classes**: `??? className "Title"`
- **Class-only (no title)**: `??? className`

### Advanced Features

- **Nested list support**: Properly handles details blocks within list items
- **Indentation management**: Automatically handles content indentation
- **Flexible parsing**: Supports various content types within details blocks

## Notes and Suggestions

### Best Practices

1. **Consistent indentation**: Use consistent spacing (4 spaces recommended) for content within details blocks
2. **CSS styling**: Apply custom CSS to style different detail classes appropriately
3. **Accessibility**: Consider adding ARIA labels for better screen reader support

### Limitations

- Requires proper indentation for nested content
- Complex nesting scenarios may need careful syntax management
- Depends on browser support for `<details>` and `<summary>` elements

### Browser Compatibility

- Modern browsers fully support `<details>`/`<summary>` elements
- Consider providing CSS fallbacks for older browsers
- JavaScript polyfills may be needed for IE/Edge legacy versions

## Installation

This extension is part of the PyMdown Extensions package:

```bash
pip install pymdown-extensions
```

Then use in Markdown configuration:

```python
extensions=['pymdownx.details']
```