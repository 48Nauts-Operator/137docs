<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# EscapeAll Extension Documentation

## Overview

The `escapeall` module is a Python-Markdown extension that provides enhanced escaping capabilities for Markdown processing. It allows users to escape any character using a backslash (`\`) and provides additional features for handling hard breaks and non-breaking spaces.

## Purpose

This extension extends the standard Markdown escaping mechanism to support:
- Escaping any character with a backslash
- Converting escaped newlines to HTML hard breaks (`<br>` tags)
- Converting escaped spaces to non-breaking spaces (`&nbsp;`)

## Classes and Functions

### `EscapeAllPattern`

An inline processor class that handles the conversion of escaped characters.

#### Constructor
```python
def __init__(self, pattern, nbsp, md)
```

**Parameters:**
- `pattern`: Regular expression pattern to match escaped characters
- `nbsp`: Boolean flag to enable non-breaking space conversion
- `md`: Markdown instance

#### Key Method
```python
def handleMatch(self, m, data)
```

Processes matched escaped characters and returns the appropriate replacement:
- HTML entities for `<`, `>`, and `&` characters
- Non-breaking spaces for escaped spaces (if enabled)
- Special handling for STX/ETX control characters
- Unicode ordinal encoding for other characters

### `EscapeAllExtension`

The main extension class that configures and registers the escape patterns.

#### Configuration Options

The extension supports the following configuration parameters:

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `hardbreak` | Boolean | `False` | Convert escaped newlines (`\n`) to HTML `<br>` tags |
| `nbsp` | Boolean | `False` | Convert escaped spaces to non-breaking spaces (`&nbsp;`) |

#### Constructor
```python
def __init__(self, *args, **kwargs)
```

Initializes the extension with default configuration options.

#### Key Method
```python
def extendMarkdown(self, md)
```

Registers the inline patterns with the Markdown processor:
- Registers the main escape pattern with priority 180
- Optionally registers hard break pattern with priority 5.1

### `makeExtension()`

```python
def makeExtension(*args, **kwargs)
```

Factory function that creates and returns an instance of `EscapeAllExtension`.

## Constants

- `STX` (`\u0002`): Start of text control character
- `ETX` (`\u0003`): End of text control character  
- `ESCAPE_RE`: Pattern for escaping any character including newlines
- `ESCAPE_NO_NL_RE`: Pattern for escaping any character except newlines
- `HARDBREAK_RE`: Pattern for matching escaped newlines

## Usage Examples

### Basic Usage
```python
import markdown
from pymdownx import escapeall

# Create markdown instance with escapeall extension
md = markdown.Markdown(extensions=['pymdownx.escapeall'])

# Escape any character
text = r"This is \*not\* bold"
result = md.convert(text)  # "This is *not* bold"
```

### With Configuration
```python
md = markdown.Markdown(
    extensions=['pymdownx.escapeall'],
    extension_configs={
        'pymdownx.escapeall': {
            'hardbreak': True,
            'nbsp': True
        }
    }
)

# Escaped newline becomes <br>
text = "Line 1\\\nLine 2"

# Escaped space becomes &nbsp;
text2 = "Word1\\ Word2"
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **Performance**: This extension processes all escaped characters, which may impact performance on large documents with many escape sequences
- **Compatibility**: When using with other extensions, be aware of pattern priority conflicts
- **Control Characters**: The extension properly handles STX and ETX control characters used internally by Markdown

### üí° Best Practices

- Enable `hardbreak` option when you need consistent line break behavior
- Use `nbsp` option sparingly as it can affect text layout unexpectedly  
- Test thoroughly when combining with other Markdown extensions
- Consider the priority order (180 for main pattern, 5.1 for hardbreak) when debugging pattern conflicts

### üîß Troubleshooting

- If escapes aren't working as expected, check for conflicts with other extensions
- Verify that the backslash character isn't being processed by another pattern first
- Remember that some characters have special meaning in HTML and will be converted to entities

## License

This extension is released under the MIT License. See the file header for full license text.