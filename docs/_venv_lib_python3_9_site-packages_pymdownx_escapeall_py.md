<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# PyMdown Extensions - EscapeAll

## Overview

The `escapeall` module is a Markdown extension that provides enhanced escaping capabilities for Markdown text processing. It allows users to escape any character using a backslash (`\`) and provides additional options for handling spaces and newlines.

## Purpose

This extension extends the standard Markdown escaping behavior to allow escaping of **any** character, not just the standard Markdown special characters. It's particularly useful when you need precise control over character rendering in Markdown documents.

## Key Features

- **Universal Escaping**: Escape any character using backslash notation
- **Non-breaking Spaces**: Option to convert escaped spaces to `&nbsp;`
- **Hard Breaks**: Option to convert escaped newlines to `<br>` tags
- **HTML-safe**: Properly handles HTML special characters (`<`, `>`, `&`)

## Classes and Functions

### `EscapeAllPattern`

A custom inline processor that handles the actual escaping logic.

**Constructor Parameters:**
- `pattern`: Regular expression pattern to match
- `nbsp`: Boolean flag for non-breaking space conversion
- `md`: Markdown instance

**Key Method:**
- `handleMatch(m, data)`: Processes matched escape sequences and returns the appropriate escaped character

**Character Handling:**
- HTML special characters (`<`, `>`, `&`) ‚Üí HTML entities
- Spaces (when `nbsp=True`) ‚Üí `&nbsp;`
- Control characters (STX, ETX) ‚Üí Preserved as-is
- All other characters ‚Üí Wrapped in STX/ETX markers

### `EscapeAllExtension`

The main extension class that integrates with the Markdown processor.

**Configuration Options:**

| Option | Default | Description |
|--------|---------|-------------|
| `hardbreak` | `False` | Convert escaped newlines (`\n`) to `<br>` tags |
| `nbsp` | `False` | Convert escaped spaces to non-breaking spaces |

**Key Method:**
- `extendMarkdown(md)`: Registers the escape patterns with the Markdown processor

### `makeExtension()`

Factory function that creates and returns an instance of `EscapeAllExtension`.

## Usage Examples

### Basic Usage

```python
import markdown
from pymdownx import escapeall

# Create Markdown instance with escapeall extension
md = markdown.Markdown(extensions=['pymdownx.escapeall'])

# Example text with escaped characters
text = r"This is \*not\* italic and this is \# not a header"
result = md.convert(text)
# Output: "This is *not* italic and this is # not a header"
```

### With Configuration

```python
md = markdown.Markdown(
    extensions=['pymdownx.escapeall'],
    extension_configs={
        'pymdownx.escapeall': {
            'hardbreak': True,
            'nbsp': True
        }
    }
)

text = r"Line one\nLine two with\ non-breaking\ spaces"
result = md.convert(text)
```

## Implementation Details

### Regular Expressions

- `ESCAPE_RE = r'\\(.)'`: Matches any escaped character
- `ESCAPE_NO_NL_RE = r'\\([^\n])'`: Matches escaped characters except newlines
- `HARDBREAK_RE = r'\\\n'`: Matches escaped newlines for hard breaks

### Priority Levels

- Escape pattern: Priority 180
- Hard break pattern: Priority 5.1

## Notes and Considerations

### ‚ö†Ô∏è Important Notes

1. **Control Characters**: The extension preserves STX (`\u0002`) and ETX (`\u0003`) characters as they are used internally by Markdown processing
2. **Pattern Selection**: When `hardbreak` is enabled, the extension uses `ESCAPE_NO_NL_RE` to avoid conflicts with the hard break pattern
3. **HTML Stash**: HTML special characters are stored in Markdown's HTML stash to prevent double-escaping

### üí° Suggestions

- **Performance**: For documents with heavy escaping, consider the performance impact of processing every escaped character
- **Compatibility**: Test with other Markdown extensions to ensure no conflicts with pattern priorities
- **Use Cases**: Particularly useful for technical documentation where literal character display is important

## License

This module is released under the MIT License. Copyright (c) 2017 Isaac Muse.