<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# PyMdown Extensions - Mark

## Overview

The `pymdownx.mark` module is a Markdown extension that adds support for highlighting text using HTML `<mark>` tags through a simple `==text==` syntax. This extension is part of the PyMdown Extensions package and provides an intuitive way to mark or highlight important text in Markdown documents.

## Purpose

This extension transforms the syntax `==highlighted text==` into HTML `<mark>highlighted text</mark>` tags, allowing users to easily highlight important content in their Markdown documents without writing raw HTML.

## Key Features

- **Simple Syntax**: Use `==text==` to create highlighted text
- **Smart Processing**: Intelligently handles connected words and punctuation
- **Configurable**: Options to enable/disable smart processing
- **Escape Support**: Proper handling of literal `=` characters

## Classes and Functions

### `MarkProcessor`

```python
class MarkProcessor(util.PatternSequenceProcessor)
```

- **Purpose**: Handles basic mark pattern matching
- **Pattern**: Uses the `MARK` regex pattern to identify `==text==` syntax
- **Processing**: Converts matched patterns to HTML `<mark>` tags

### `MarkSmartProcessor`

```python
class MarkSmartProcessor(util.PatternSequenceProcessor)
```

- **Purpose**: Handles intelligent mark pattern matching
- **Pattern**: Uses the `SMART_MARK` regex pattern for more sophisticated matching
- **Features**: 
  - Better handling of punctuation boundaries
  - Avoids false matches with standalone `=` characters
  - More context-aware pattern recognition

### `MarkExtension`

```python
class MarkExtension(Extension)
```

The main extension class that integrates mark functionality into Markdown processing.

#### Configuration Options

- **`smart_mark`** (default: `True`)
  - Enables intelligent processing of connected words
  - When `True`: Uses `MarkSmartProcessor`
  - When `False`: Uses basic `MarkProcessor`

#### Key Methods

- **`__init__(*args, **kwargs)`**: Initializes the extension with configuration options
- **`extendMarkdown(md)`**: Registers the extension with the Markdown processor

## Regular Expression Patterns

### Core Patterns

```python
CONTENT = r'((?:[^=]|(?<!={2})=)+?)'
SMART_CONTENT = r'((?:(?<=\s)=+?(?=\s)|.)+?=*?)'
NOT_MARK = r'((^|(?<=\s))(=+)(?=\s|$))'
MARK = r'(={{2}})(?!\s){}(?<!\s)\1'.format(CONTENT)
SMART_MARK = r'(?:(?<=_)|(?<![\w=]))(={{2}})(?![\s=]){}(?<!\s)\1(?:(?=_)|(?![\w=]))'.format(SMART_CONTENT)
```

- **`MARK`**: Basic pattern for `==text==` matching
- **`SMART_MARK`**: Enhanced pattern with better boundary detection
- **`NOT_MARK`**: Prevents false matches with standalone `=` characters

## Usage Example

```markdown
This is ==highlighted text== in a sentence.
You can also ==highlight multiple words== at once.
```

Output:
```html
This is <mark>highlighted text</mark> in a sentence.
You can also <mark>highlight multiple words</mark> at once.
```

## Installation and Setup

```python
import markdown
from pymdownx import mark

# Basic usage
md = markdown.Markdown(extensions=['pymdownx.mark'])

# With configuration
md = markdown.Markdown(
    extensions=['pymdownx.mark'],
    extension_configs={
        'pymdownx.mark': {
            'smart_mark': True  # Enable smart processing (default)
        }
    }
)
```

## Notes and Recommendations

### Best Practices

- **Smart Processing**: Keep `smart_mark` enabled (default) for better text processing
- **Escaping**: Use backslashes to escape literal `=` characters when needed
- **Styling**: Remember to add CSS styling for `<mark>` tags in your output

### Limitations

- Requires exactly two `=` characters on each side
- Cannot be nested with other mark syntax
- May conflict with other extensions that use `=` characters

### CSS Styling Example

```css
mark {
    background-color: #ffff00;
    padding: 0.1em 0.2em;
    border-radius: 0.2em;
}
```

## Dependencies

- **markdown**: Core Markdown library
- **pymdownx.util**: Utility functions for pattern processing
- **re**: Regular expressions (standard library)