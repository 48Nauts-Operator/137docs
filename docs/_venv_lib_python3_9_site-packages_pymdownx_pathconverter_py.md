<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# PyMdown Extensions - Path Converter

## Overview

The **pymdownx.pathconverter** module is a Python Markdown extension that automatically converts file paths in HTML tags from relative to absolute paths, or from relative paths to paths relative to a different base directory.

## Purpose

This extension is useful when:
- Converting Markdown documents for different output contexts
- Restructuring documentation where file references need path adjustments
- Publishing content where relative paths need to be converted to absolute paths

## How It Works

The extension operates as a **postprocessor** that:
1. Parses the final HTML output after Markdown conversion
2. Locates HTML tags with `href` or `src` attributes
3. Converts relative file paths according to the specified configuration
4. Returns the modified HTML with updated paths

## Configuration Options

| Option | Default | Description |
|--------|---------|-------------|
| `base_path` | `""` | Base path used to find files |
| `relative_path` | `""` | Path that files will be relative to (not needed for absolute conversion) |
| `absolute` | `False` | Convert to absolute paths when `True`, relative paths when `False` |
| `tags` | `"img script a link"` | HTML tags to process for `src` and/or `href` attributes |
| `file_scheme` | `False` | Use `file://` scheme for absolute paths |

## Main Classes and Functions

### `PathConverterExtension`
The main extension class that integrates with Python Markdown.

```python
# Usage example
import markdown
md = markdown.Markdown(extensions=['pymdownx.pathconverter'])
```

**Key methods:**
- `__init__()`: Initializes configuration options
- `extendMarkdown()`: Registers the postprocessor with Markdown

### `PathConverterPostprocessor`
The core postprocessor that performs the actual path conversion.

**Key method:**
- `run(text)`: Processes HTML text and converts paths based on configuration

### Helper Functions

#### `repl_relative(m, base_path, relative_path)`
Converts paths to be relative to a specified base path.

#### `repl_absolute(m, base_path, file_scheme)`
Converts relative paths to absolute paths, optionally with `file://` scheme.

#### `repl(m, base_path, rel_path=None, file_scheme=None)`
Main replacement function that delegates to appropriate conversion method.

## Usage Examples

### Convert to Absolute Paths
```python
import markdown

md = markdown.Markdown(
    extensions=['pymdownx.pathconverter'],
    extension_configs={
        'pymdownx.pathconverter': {
            'base_path': '/home/user/docs',
            'absolute': True
        }
    }
)
```

### Convert to Relative Paths
```python
md = markdown.Markdown(
    extensions=['pymdownx.pathconverter'],
    extension_configs={
        'pymdownx.pathconverter': {
            'base_path': '/home/user/docs',
            'relative_path': '/home/user/output',
            'absolute': False
        }
    }
)
```

## Important Notes

### Path Processing
- Only processes `href` and `src` attributes in specified HTML tags
- Skips URLs (paths with schemes like `http://`, `https://`)
- Handles both absolute and relative path inputs
- Preserves URL fragments and query parameters

### Error Handling
- Uses broad exception handling during path parsing
- Continues processing even if individual path conversion fails
- Does not modify paths that cannot be processed

### Content Avoidance
- Skips content within `<script>` and `<style>` tags
- Ignores HTML comments to prevent unintended modifications

## Suggestions for Use

1. **Test thoroughly**: Always test path conversion with your specific directory structure
2. **Backup content**: Make backups before batch processing important documents
3. **Validate paths**: Ensure `base_path` and `relative_path` are correct absolute paths
4. **Custom tags**: Adjust the `tags` configuration if you need to process additional HTML elements
5. **URL validation**: Verify that converted paths actually point to existing files

## Dependencies

- `markdown`: Python Markdown library
- Built-in Python modules: `os`, `re`, `urllib.parse`
- Local utility module: `util` (from pymdownx package)