<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# regex Module Documentation

## Overview

This module provides an enhanced regular expression engine that extends Python's standard `re` module. It supports both 8-bit and Unicode strings, includes advanced features like fuzzy matching, named character classes, and provides two behavioral versions (VERSION0 for legacy compatibility and VERSION1 for enhanced features).

## Purpose

The regex module serves as a drop-in replacement for Python's `re` module with additional functionality:
- **Fuzzy matching** with configurable error tolerances
- **Enhanced Unicode support** including grapheme matching
- **Set operations** within character classes  
- **Atomic grouping** and possessive quantifiers
- **Recursive patterns** and conditional matching
- **Backwards searching** capabilities

## Key Features

### Regular Expression Enhancements

#### Special Characters and Quantifiers
- Standard quantifiers: `*`, `+`, `?`, `{m,n}`
- **Non-greedy versions**: `*?`, `+?`, `??`, `{m,n}?`
- **Possessive versions**: `*+`, `++`, `?+`, `{m,n}+` (prevent backtracking)

#### Advanced Grouping
- `(?>...)` - Atomic non-capturing groups
- `(?P<name>...)` or `(?<name>...)` - Named capture groups
- `(?|...|...)` - Branch reset groups (reuse capture numbers)
- `(?(id)yes|no)` - Conditional matching

#### Fuzzy Matching
```python
# Allow up to 2 insertions, 1 substitution, 1 deletion
pattern = r"(?:fuzzy){i<=2,s<=1,d<=1}"
```

#### Set Operations (VERSION1 only)
```python
# Character class set operations
[a-z&&[^aeiou]]  # Consonants only (intersection)
[a-z--[aeiou]]   # Consonants only (difference)
[a-z||A-Z]       # All letters (union)
```

## Important Functions

### Core Matching Functions

#### `match(pattern, string, flags=0, **kwargs)`
Matches pattern at the beginning of string.
```python
import regex
result = regex.match(r'\d+', '123abc')
```

#### `search(pattern, string, flags=0, **kwargs)`
Searches for pattern anywhere in string.
```python
result = regex.search(r'\d+', 'abc123def')
```

#### `findall(pattern, string, flags=0, overlapped=False, **kwargs)`
Returns all matches as a list. Supports overlapped matching.
```python
# Non-overlapping (default)
regex.findall(r'\w+', 'hello world')  # ['hello', 'world']

# Overlapping matches
regex.findall(r'\w\w', 'abcd', overlapped=True)  # ['ab', 'bc', 'cd']
```

#### `sub(pattern, repl, string, count=0, **kwargs)`
Substitutes matches with replacement string.
```python
result = regex.sub(r'\d+', 'X', 'abc123def456')  # 'abcXdefX'
```

#### `subf(pattern, format, string, count=0, **kwargs)`
Substitutes using format strings (new feature).
```python
result = regex.subf(r'(\w+)', '{0.upper()}', 'hello world')
```

### Compilation and Caching

#### `compile(pattern, flags=0, **kwargs)`
Compiles pattern into a Pattern object for reuse.
```python
pattern = regex.compile(r'\d{3}-\d{3}-\d{4}')
match = pattern.search('Call 555-123-4567')
```

#### `cache_all(value=True)`
Controls whether all patterns are cached automatically.

#### `purge()`
Clears the pattern cache.

### Utility Functions

#### `escape(pattern, special_only=True, literal_spaces=False)`
Escapes special characters for literal matching.
```python
escaped = regex.escape('Hello. World?')  # 'Hello\\. World\\?'
```

## Important Classes

### Pattern
Compiled regular expression object with methods:
- `match()`, `search()`, `findall()`, `finditer()`
- `sub()`, `subn()`, `subf()`, `subfn()`
- `split()`, `splititer()`

### Match
Match result object with:
- `group()`, `groups()`, `groupdict()`
- `start()`, `end()`, `span()`
- `expand()` for replacement templates

## Flags

### Behavioral Flags
- `VERSION0` (V0) - Legacy behavior compatible with `re` module
- `VERSION1` (V1) - Enhanced behavior with new features
- `BESTMATCH` (B) - Find best fuzzy match instead of first
- `ENHANCEMATCH` (E) - Improve fuzzy match quality
- `REVERSE` (R) - Search backwards

### Character Matching Flags
- `IGNORECASE` (I) - Case-insensitive matching
- `FULLCASE` (F) - Full Unicode case folding
- `ASCII` (A) - ASCII-only character classes
- `UNICODE` (U) - Unicode character classes
- `LOCALE` (L) - Locale-dependent matching

### Pattern Behavior Flags  
- `MULTILINE` (M) - `^` and `$` match line boundaries
- `DOTALL` (S) - `.` matches newlines
- `VERBOSE` (X) - Ignore whitespace and comments
- `WORD` (W) - Unicode word boundaries

## Advanced Features

### Concurrent Matching
Most functions support a `concurrent=True` parameter to release the GIL during matching:
```python
result = regex.search(pattern, large_string, concurrent=True)
```

### Timeout Support
Set matching timeouts to prevent runaway regex execution:
```python
try:
    result = regex.search(pattern, string, timeout=5.0)
except TimeoutError:
    print("Matching timed out")
```

### Named Lists
Define reusable character sets:
```python
pattern = regex.compile