<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# requests.auth

This module provides authentication handlers for the Python Requests library. It implements various HTTP authentication schemes that can be attached to HTTP requests.

## Purpose

The `requests.auth` module contains authentication implementations that automatically handle the complexity of different HTTP authentication protocols. These handlers can be passed to requests to automatically authenticate with servers that require credentials.

## Authentication Classes

### AuthBase

```python
class AuthBase:
    """Base class that all auth implementations derive from"""
```

- **Purpose**: Abstract base class for all authentication handlers
- **Usage**: All custom authentication implementations should inherit from this class
- **Required Method**: `__call__(self, r)` - must be implemented by subclasses

### HTTPBasicAuth

```python
class HTTPBasicAuth(AuthBase):
    """Attaches HTTP Basic Authentication to the given Request object."""
```

- **Purpose**: Implements HTTP Basic Authentication (RFC 7617)
- **Constructor**: `HTTPBasicAuth(username, password)`
- **Functionality**: 
  - Encodes credentials using Base64
  - Adds `Authorization: Basic <encoded-credentials>` header to requests
- **Usage Example**:
  ```python
  auth = HTTPBasicAuth('username', 'password')
  requests.get('https://api.example.com', auth=auth)
  ```

### HTTPProxyAuth

```python
class HTTPProxyAuth(HTTPBasicAuth):
    """Attaches HTTP Proxy Authentication to a given Request object."""
```

- **Purpose**: Implements HTTP Proxy Authentication
- **Inheritance**: Extends `HTTPBasicAuth`
- **Functionality**: Similar to Basic Auth but uses `Proxy-Authorization` header
- **Usage**: For authenticating with HTTP proxies

### HTTPDigestAuth

```python
class HTTPDigestAuth(AuthBase):
    """Attaches HTTP Digest Authentication to the given Request object."""
```

- **Purpose**: Implements HTTP Digest Authentication (RFC 7616)
- **Constructor**: `HTTPDigestAuth(username, password)`
- **Features**:
  - Thread-safe implementation using `threading.local()`
  - Supports multiple hash algorithms (MD5, SHA-1, SHA-256, SHA-512)
  - Handles nonce counting and client nonce generation
  - Automatic retry on 401 responses
  - Request body rewinding for retries

#### Key Methods

- `build_digest_header(method, url)`: Constructs the digest authentication header
- `handle_401(r, **kwargs)`: Processes 401 responses and retries with authentication
- `handle_redirect(r, **kwargs)`: Resets authentication state on redirects

## Utility Functions

### _basic_auth_str

```python
def _basic_auth_str(username, password):
    """Returns a Basic Auth string."""
```

- **Purpose**: Creates Base64-encoded authentication string for Basic Auth
- **Parameters**: 
  - `username`: Username (string or convertible to string)
  - `password`: Password (string or convertible to string)
- **Returns**: Formatted "Basic <encoded-credentials>" string

## Constants

```python
CONTENT_TYPE_FORM_URLENCODED = "application/x-www-form-urlencoded"
CONTENT_TYPE_MULTI_PART = "multipart/form-data"
```

Content type constants for form data handling.

## Implementation Notes

### Thread Safety
- `HTTPDigestAuth` uses `threading.local()` to maintain separate state per thread
- Each thread maintains its own nonce count, challenge data, and request position

### Backward Compatibility
- The `_basic_auth_str` function includes deprecated support for non-string usernames/passwords
- Deprecation warnings are issued for non-string credentials (will be removed in Requests 3.0.0)

### Digest Authentication Features
- **Algorithm Support**: MD5, MD5-SESS, SHA-1, SHA-256, SHA-512
- **QOP Support**: Currently supports "auth" quality of protection
- **Nonce Handling**: Automatic nonce counting and client nonce generation
- **Request Retry**: Automatic retry mechanism for 401 responses

## Usage Recommendations

1. **Use HTTPBasicAuth** for simple username/password authentication over HTTPS
2. **Use HTTPDigestAuth** when servers require digest authentication (more secure than Basic over HTTP)
3. **Use HTTPProxyAuth** specifically for proxy server authentication
4. **Always use HTTPS** with Basic Authentication to protect credentials
5. **Pass string objects** for usernames and passwords to avoid deprecation warnings

## Security Considerations

⚠️ **Important Security Notes:**
- Basic Authentication sends credentials in Base64 encoding (not encryption)
- Always use HTTPS when using Basic Authentication
- Digest Authentication provides better security over HTTP but HTTPS is still recommended
- Store credentials securely and avoid hardcoding them in source code