<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# requests.models Documentation

This module contains the core objects that power the Python Requests library. It defines the fundamental classes for creating HTTP requests and handling responses.

## Overview

The `requests.models` module provides three main classes:
- `Request` - User-created request object
- `PreparedRequest` - Fully prepared request ready for transmission
- `Response` - Server response object containing HTTP response data

## Key Classes

### Request

A user-created request object used to prepare HTTP requests.

```python
class Request(RequestHooksMixin):
    """A user-created Request object.
    
    Used to prepare a PreparedRequest, which is sent to the server.
    """
```

**Constructor Parameters:**
- `method` - HTTP method (GET, POST, etc.)
- `url` - Target URL
- `headers` - Dictionary of HTTP headers
- `files` - Files for multipart upload
- `data` - Request body data
- `json` - JSON data for request body
- `params` - URL parameters
- `auth` - Authentication handler
- `cookies` - Cookie data
- `hooks` - Callback hooks

**Key Methods:**
- `prepare()` - Returns a `PreparedRequest` object ready for transmission

### PreparedRequest

A fully mutable request object containing the exact bytes to be sent to the server.

```python
class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):
    """The fully prepared request object containing exact bytes for transmission."""
```

**Key Attributes:**
- `method` - HTTP verb
- `url` - Complete HTTP URL  
- `headers` - HTTP headers dictionary
- `body` - Request body content
- `hooks` - Callback hooks

**Key Methods:**
- `prepare()` - Prepares the entire request with given parameters
- `copy()` - Creates a copy of the prepared request
- `prepare_method()` - Prepares HTTP method
- `prepare_url()` - Prepares and validates URL
- `prepare_headers()` - Prepares HTTP headers
- `prepare_body()` - Prepares request body
- `prepare_auth()` - Prepares authentication
- `prepare_cookies()` - Prepares cookie data

### Response

Contains the server's response to an HTTP request.

```python
class Response:
    """The Response object containing server's response to HTTP request."""
```

**Key Attributes:**
- `status_code` - HTTP status code (200, 404, etc.)
- `headers` - Response headers (case-insensitive dictionary)
- `url` - Final URL after redirects
- `text` - Response content as Unicode string
- `content` - Response content as bytes
- `encoding` - Text encoding
- `cookies` - Response cookies
- `elapsed` - Time elapsed for request
- `history` - List of redirect responses

**Key Properties:**
- `ok` - True if status code < 400
- `is_redirect` - True if response is a redirect
- `apparent_encoding` - Auto-detected encoding

**Key Methods:**
- `json()` - Returns JSON-decoded content
- `iter_content()` - Iterates over response data in chunks
- `iter_lines()` - Iterates over response data line by line
- `raise_for_status()` - Raises HTTPError for bad status codes
- `close()` - Releases connection back to pool

## Mixin Classes

### RequestEncodingMixin

Provides encoding functionality for requests.

**Key Methods:**
- `_encode_params()` - Encodes URL parameters
- `_encode_files()` - Builds multipart/form-data for file uploads
- `path_url` property - Returns the path portion of URL

### RequestHooksMixin  

Provides hook registration and management.

**Key Methods:**
- `register_hook()` - Registers a callback hook
- `deregister_hook()` - Removes a previously registered hook

## Constants

```python
# HTTP status codes that trigger automatic redirects
REDIRECT_STATI = (301, 302, 303, 307, 308)

# Default limits and chunk sizes
DEFAULT_REDIRECT_LIMIT = 30
CONTENT_CHUNK_SIZE = 10 * 1024  
ITER_CHUNK_SIZE = 512
```

## Usage Examples

### Basic Request Creation

```python
import requests

# Create a request
req = requests.Request('GET', 'https://httpbin.org/get')

# Prepare it for transmission  
prepared = req.prepare()

# Send with a session
session = requests.Session()
response = session.send(prepared)
```

### Response Handling

```python
response = requests.get('https://httpbin.org/json')

# Check status
if response.ok:
    print(f"Success: {response.status_code}")
    
# Get content
text_content = response.text
json_data = response.json()
raw_bytes = response.content

# Iterate over large responses
for chunk in response.iter_content(chunk_size=1024):
    process_chunk(chunk)
```

## Notes and Suggestions

### Important Considerations

- **Thread Safety**: The module imports encoding libraries early to avoid threading issues in embedded Python environments
- **Memory Management**: Use `iter_content()` for large responses to avoid loading everything into memory
- **Connection Management**: Always call `response.close()` when manually managing connections
- **Error Handling**: Use `raise_for_status()` to automatically raise exceptions for HTTP error codes

### Best Practices

- Always check `response.ok` or use `raise_for_status()` for error handling
- Use streaming (`iter_content()`, `iter_lines()`) for large responses
- Set appropriate encoding on responses when charset detection fails
- Use context managers when possible for automatic resource cleanup

### Performance Tips

- Reuse `Session` objects for connection pooling
- Use appropriate chunk sizes for streaming based on your use case
- Consider setting `stream=True` for large downloads to avoid memory issues