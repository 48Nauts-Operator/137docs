<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Six Library Documentation

## Overview

The `six` library is a Python 2 and 3 compatibility utility that provides a unified interface for writing code that works across both Python versions. It handles the differences between Python 2 and 3 by providing compatibility wrappers, moved modules, and utility functions.

**Version:** 1.17.0  
**Author:** Benjamin Peterson <benjamin@python.org>  
**License:** MIT

## Purpose

The primary purpose of this library is to:
- Provide a single codebase that works on both Python 2 and 3
- Handle module relocations between Python versions
- Abstract away syntax and API differences
- Offer utility functions for common compatibility tasks

## Key Components

### Version Detection Constants

```python
PY2 = sys.version_info[0] == 2
PY3 = sys.version_info[0] == 3
PY34 = sys.version_info[0:2] >= (3, 4)
```

These constants allow for easy version-specific code branching.

### Type Compatibility

The library provides unified type references that work across Python versions:

- `string_types`: `str` in Python 3, `basestring` in Python 2
- `integer_types`: `int` in Python 3, `(int, long)` in Python 2
- `text_type`: `str` in Python 3, `unicode` in Python 2
- `binary_type`: `bytes` in Python 3, `str` in Python 2

## Important Classes

### MovedModule

Handles modules that were moved or renamed between Python versions.

```python
class MovedModule(_LazyDescr):
    def __init__(self, name, old, new=None):
        # Maps old module names to new ones
```

### MovedAttribute

Handles individual functions/classes that moved between modules.

```python
class MovedAttribute(_LazyDescr):
    def __init__(self, name, old_mod, new_mod, old_attr=None, new_attr=None):
        # Maps old module.attribute to new module.attribute
```

### _SixMetaPathImporter

A PEP 302 compliant meta path importer that handles the `six.moves` import mechanism.

**Key Methods:**
- `find_module()`: Locates modules in the moves namespace
- `load_module()`: Loads and returns the appropriate module
- `is_package()`: Determines if a module is a package

## Key Functions

### String/Binary Handling

```python
def b(s):
    """Byte literal - encodes strings to bytes in Python 3"""

def u(s):
    """Text literal - handles unicode strings consistently"""

def ensure_binary(s, encoding='utf-8', errors='strict'):
    """Coerce s to binary type (bytes in Python 3, str in Python 2)"""

def ensure_str(s, encoding='utf-8', errors='strict'):
    """Coerce s to native str type"""

def ensure_text(s, encoding='utf-8', errors='strict'):
    """Coerce s to text type (unicode)"""
```

### Exception Handling

```python
def reraise(tp, value, tb=None):
    """Reraise an exception with proper syntax for both Python versions"""

def raise_from(value, from_value):
    """Raise exception with 'from' clause (Python 3 style)"""
```

### Metaclass Utilities

```python
def with_metaclass(meta, *bases):
    """Create a base class with a metaclass"""

def add_metaclass(metaclass):
    """Class decorator for creating a class with a metaclass"""
```

### Iterator Functions

```python
def iterkeys(d, **kw):
    """Return an iterator over dictionary keys"""

def itervalues(d, **kw):
    """Return an iterator over dictionary values"""

def iteritems(d, **kw):
    """Return an iterator over dictionary (key, value) pairs"""
```

## Moves Module

The `six.moves` module provides access to renamed/moved standard library modules:

### Common Moves Examples

- `six.moves.urllib` → Unified urllib interface
- `six.moves.configparser` → `ConfigParser` (Python 2) / `configparser` (Python 3)
- `six.moves.cPickle` → `cPickle` (Python 2) / `pickle` (Python 3)
- `six.moves.tkinter` → `Tkinter` (Python 2) / `tkinter` (Python 3)

### Managing Moves

```python
def add_move(move):
    """Add an item to six.moves"""

def remove_move(name):
    """Remove item from six.moves"""
```

## Usage Examples

### Basic String Handling
```python
import six

# Create byte strings
data = six.b("hello world")

# Create text strings  
text = six.u("hello unicode")

# Ensure proper string types
binary_data = six.ensure_binary(some_string)
text_data = six.ensure_text(some_bytes)
```

### Using Moved Modules
```python
import six.moves.urllib.request as urllib_request
import six.moves.configparser as configparser

# Works on both Python 2 and 3
response = urllib_request.urlopen('http://example.com')
config = configparser.ConfigParser()
```

### Metaclass Compatibility
```python
import six

@six.add_metaclass(MyMetaClass)
class MyClass(object):
    pass

# Or using with_metaclass
class MyClass(six.with_metaclass(MyMetaClass, BaseClass)):
    pass
```

## Notes and Recommendations

### Performance Considerations
- The library uses lazy loading for moved modules to minimize import overhead
- Version checks are done at import time, not runtime

### Best Practices
- Use `six.text_type` and `six.binary_type` instead of hardcoded string types
- Prefer `six.moves` imports over conditional imports
- Use the string handling functions (`ensure_str`, `ensure_text`, etc.) for robust string processing

### Compatibility Notes
- Some moves are version-specific (e.g., certain urllib components)
- The library handles edge cases like Jython and different Python