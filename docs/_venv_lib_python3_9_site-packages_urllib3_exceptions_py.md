<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# urllib3 Exceptions Module Documentation

## Overview

This module defines the exception hierarchy and warning classes used throughout the urllib3 library. It provides a comprehensive set of custom exceptions for handling various HTTP-related errors, connection issues, SSL problems, and protocol violations that can occur during HTTP requests and responses.

## Purpose

The exceptions module serves several key purposes:

- **Structured Error Handling**: Provides a clear hierarchy of exceptions that allow developers to catch and handle specific types of errors appropriately
- **Enhanced Debugging**: Each exception includes relevant context information (URLs, connection pools, error reasons) to aid in troubleshooting
- **Backwards Compatibility**: Maintains compatibility with older versions while providing improved error reporting
- **Serialization Support**: Many exceptions implement `__reduce__` methods for proper pickling support

## Exception Hierarchy

### Base Exceptions

#### `HTTPError`
```python
class HTTPError(Exception):
    """Base exception used by this module."""
```
- Root exception class for all urllib3-specific errors
- Inherits from Python's built-in `Exception`

#### `HTTPWarning`
```python
class HTTPWarning(Warning):
    """Base warning used by this module."""
```
- Base class for all urllib3 warnings
- Used for non-fatal issues that should be brought to user attention

### Pool-Related Exceptions

#### `PoolError`
- **Purpose**: Base exception for connection pool-related errors
- **Key Features**:
  - Stores reference to the connection pool where error occurred
  - Implements pickling support via `__reduce__`
  - Formats error messages to include pool information

#### `RequestError`
- **Purpose**: Extends `PoolError` for errors associated with specific URLs
- **Additional Context**: Includes the URL that caused the error

### Connection and Network Exceptions

#### `MaxRetryError`
```python
class MaxRetryError(RequestError):
    """Raised when the maximum number of retries is exceeded."""
```
- **When Raised**: After exhausting all retry attempts
- **Key Attributes**:
  - `reason`: The underlying exception that caused the failure
  - `url`: The URL being requested
  - `pool`: The connection pool

#### `NewConnectionError`
- **Purpose**: Raised when establishing a new connection fails
- **Common Causes**: Network unreachable, connection refused (ECONNREFUSED)
- **Note**: Contains a deprecated `pool` property that warns users to use `conn` instead

#### `NameResolutionError`
- **Purpose**: Specific case of `NewConnectionError` for DNS resolution failures
- **Context**: Includes the hostname that failed to resolve and the underlying `socket.gaierror`

### Timeout Exceptions

#### `TimeoutError`
```python
class TimeoutError(HTTPError):
    """Raised when a socket timeout error occurs."""
```
- **Purpose**: Base class for all timeout-related errors
- **Coverage**: Catching this will catch both read and connect timeout errors

#### `ReadTimeoutError`
- **When Raised**: Socket timeout while receiving data from server
- **Inherits From**: Both `TimeoutError` and `RequestError`

#### `ConnectTimeoutError`
- **When Raised**: Socket timeout while establishing connection
- **Note**: Does not include URL information, inherits directly from `HTTPError`

### SSL and Security Exceptions

#### `SSLError`
- **Purpose**: SSL certificate validation failures in HTTPS connections
- **Usage**: Indicates problems with certificate verification or SSL handshake

#### `ProxyError`
- **Purpose**: Connection failures to proxy servers
- **Key Feature**: Stores the original error in `original_error` attribute

### Protocol and Data Exceptions

#### `ProtocolError`
- **Purpose**: Unexpected behavior during request/response processing
- **Alias**: `ConnectionError` is aliased to this for backwards compatibility

#### `DecodeError`
- **Purpose**: Automatic content decoding failures based on Content-Type header

#### `IncompleteRead`
```python
class IncompleteRead(HTTPError, httplib_IncompleteRead):
    """Response length doesn't match expected Content-Type"""
```
- **Purpose**: Content-Length mismatch with actual received data
- **Optimization**: Uses integer for `partial` to avoid large object creation on streamed reads

### URL and Location Exceptions

#### `LocationParseError`
```python
def __init__(self, location: str) -> None:
    message = f"Failed to parse: {location}"
    self.location = location
```
- **Purpose**: URL parsing failures
- **Context**: Stores the problematic URL string

#### `URLSchemeUnknown`
- **Purpose**: Unsupported URL schemes
- **Usage**: When urllib3 encounters a scheme it doesn't know how to handle

### Warning Classes

The module includes several warning classes for security and compatibility issues:

- **`SecurityWarning`**: Base for security-related warnings
- **`InsecureRequestWarning`**: Unverified HTTPS requests
- **`NotOpenSSLWarning`**: Unsupported SSL library usage
- **`SystemTimeWarning`**: Suspected incorrect system time
- **`DependencyWarning`**: Missing optional dependencies

## Usage Examples

```python
from urllib3.exceptions import MaxRetryError, SSLError, TimeoutError

try:
    response = http.request('GET', 'https://example.com')
except MaxRetryError as e:
    print(f"Failed after retries: {e.reason}")
except SSLError:
    print("SSL certificate verification failed")
except TimeoutError:
    print("Request timed out")
```

## Important Notes

- **Pickling Support**: Many exceptions implement `__reduce__` methods for serialization
- **Backwards Compatibility**: Some classes maintain deprecated properties with warnings
- **Type Hints**: The module uses modern Python type hints with `TYPE_CHECKING` guards
- **Multiple Inheritance**: Some exceptions inherit from both urllib3 and standard library exceptions for compatibility

## Suggestions for Developers

1. **Specific Exception Handling**: Catch specific exceptions rather than the broad `HTTPError` when possible
2. **Error Context**: Utilize the additional context (URLs, pools, reasons) provided by exceptions for better error reporting
3. **Security Warnings**: Pay attention to security-related warnings and address them appropriately
4. **Deprecation Notices**: Update code to use non-deprecated attributes and methods as indicated by warnings