<!-- Auto-generated by Claude on 2025-06-08 06:13 -->

# Watchdog Events Module Documentation

## Overview

The `watchdog.events` module provides file system event classes and event handlers for monitoring file and directory changes. This module is part of the Watchdog library and serves as the core component for handling different types of file system events such as creation, deletion, modification, and movement of files and directories.

## Purpose

This module enables developers to:
- Define and handle various file system events
- Create custom event handlers with pattern matching capabilities
- Log file system changes
- Generate synthetic events for complex operations

## Event Constants

The module defines several event type constants:

```python
EVENT_TYPE_MOVED = "moved"
EVENT_TYPE_DELETED = "deleted"
EVENT_TYPE_CREATED = "created"
EVENT_TYPE_MODIFIED = "modified"
EVENT_TYPE_CLOSED = "closed"
EVENT_TYPE_CLOSED_NO_WRITE = "closed_no_write"
EVENT_TYPE_OPENED = "opened"
```

## Core Event Classes

### FileSystemEvent (Base Class)

The base class for all file system events, implemented as an immutable dataclass.

**Key Features:**
- Immutable and hashable (can be used as dictionary keys or in sets)
- Contains source path, destination path, event type, and directory flag
- Supports synthetic event marking

**Attributes:**
- `src_path`: Source path of the event
- `dest_path`: Destination path (for move events)
- `event_type`: Type of the event
- `is_directory`: Boolean indicating if the event is for a directory
- `is_synthetic`: Boolean indicating if the event was artificially generated

### Specialized Event Classes

#### File Events
- **`FileCreatedEvent`**: File creation
- **`FileDeletedEvent`**: File deletion
- **`FileModifiedEvent`**: File modification
- **`FileMovedEvent`**: File movement/renaming
- **`FileOpenedEvent`**: File opening
- **`FileClosedEvent`**: File closing (after writing)
- **`FileClosedNoWriteEvent`**: File closing (read-only)

#### Directory Events
- **`DirCreatedEvent`**: Directory creation
- **`DirDeletedEvent`**: Directory deletion
- **`DirModifiedEvent`**: Directory modification
- **`DirMovedEvent`**: Directory movement/renaming

## Event Handler Classes

### FileSystemEventHandler (Base Handler)

The base event handler class that provides a framework for handling file system events.

**Key Methods:**
- `dispatch(event)`: Routes events to appropriate handler methods
- `on_any_event(event)`: Catch-all event handler
- `on_created(event)`: Handles creation events
- `on_deleted(event)`: Handles deletion events
- `on_modified(event)`: Handles modification events
- `on_moved(event)`: Handles move/rename events
- `on_opened(event)`: Handles file open events
- `on_closed(event)`: Handles file close events
- `on_closed_no_write(event)`: Handles read-only file close events

### PatternMatchingEventHandler

Filters events based on file path patterns using pathlib's `PurePath.match()` method.

**Constructor Parameters:**
- `patterns`: List of patterns to match (whitelist)
- `ignore_patterns`: List of patterns to ignore (blacklist)
- `ignore_directories`: Whether to ignore directory events
- `case_sensitive`: Whether pattern matching is case-sensitive

**Example Usage:**

```python
handler = PatternMatchingEventHandler(
    patterns=["*.py", "*.txt"],
    ignore_patterns=["*/__pycache__/*"],
    ignore_directories=True,
    case_sensitive=False
)
```

### RegexMatchingEventHandler

Filters events using regular expressions for more complex pattern matching.

**Constructor Parameters:**
- `regexes`: List of regex patterns to match (defaults to `[".*"]`)
- `ignore_regexes`: List of regex patterns to ignore
- `ignore_directories`: Whether to ignore directory events
- `case_sensitive`: Whether regex matching is case-sensitive

**Example Usage:**

```python
handler = RegexMatchingEventHandler(
    regexes=[r".*\.py$", r".*\.js$"],
    ignore_regexes=[r".*\.pyc$", r".*/\.git/.*"],
    case_sensitive=True
)
```

### LoggingEventHandler

A handler that logs all file system events using Python's logging module.

**Constructor Parameters:**
- `logger`: Optional logger instance (defaults to root logger)

**Features:**
- Logs detailed information about each event type
- Distinguishes between file and directory events
- Uses appropriate log levels

## Utility Functions

### generate_sub_moved_events()

Generates synthetic move events for all files and directories within a moved directory.

**Parameters:**
- `src_dir_path`: Original directory path
- `dest_dir_path`: New directory path

**Returns:** Generator yielding `DirMovedEvent` and `FileMovedEvent` objects

### generate_sub_created_events()

Generates synthetic creation events for all files and directories within a newly created directory.

**Parameters:**
- `src_dir_path`: Path of the created directory

**Returns:** Generator yielding `DirCreatedEvent` and `FileCreatedEvent` objects

## Usage Notes and Suggestions

### Best Practices

1. **Custom Event Handlers**: Inherit from `FileSystemEventHandler` and override only the methods you need:

```python
class MyHandler(FileSystemEventHandler):
    def on_modified(self, event):
        if not event.is_directory:
            print(f"File {event.src_path} was modified")
```

2. **Pattern Matching**: Use `PatternMatchingEventHandler` for simple glob patterns and `RegexMatchingEventHandler` for complex matching logic.

3. **Performance**: Consider using `ignore_directories=True` if you only care about file events to reduce processing overhead.

4. **Logging**: Use `LoggingEventHandler` for debugging or auditing purposes.

### Important Considerations

- All event objects are immutable and hashable
- Synthetic events are marked with `is_synthetic=True`
- Path handling supports both string and bytes types
- Event dispatching is automatic through the `dispatch()` method

### Common Patterns

```python
# Simple logging handler
logging