<!-- Auto-generated by Claude on 2025-06-02 06:15 -->

# Watchdog Events Module Documentation

## Overview

The `watchdog.events` module provides file system event classes and event handlers for monitoring file system changes. It's part of the Watchdog library, which enables applications to respond to file system events like file creation, modification, deletion, and movement.

## Purpose

This module serves two main purposes:
1. **Event Representation**: Defines immutable event classes that represent different types of file system changes
2. **Event Handling**: Provides handler classes with different filtering and processing capabilities

## Event Constants

The module defines the following event type constants:

```python
EVENT_TYPE_MOVED = "moved"
EVENT_TYPE_DELETED = "deleted"
EVENT_TYPE_CREATED = "created"
EVENT_TYPE_MODIFIED = "modified"
EVENT_TYPE_CLOSED = "closed"
EVENT_TYPE_CLOSED_NO_WRITE = "closed_no_write"
EVENT_TYPE_OPENED = "opened"
```

## Event Classes

### Base Event Class

#### `FileSystemEvent`
- **Purpose**: Base class for all file system events
- **Type**: Immutable dataclass (can be used as dictionary keys or in sets)
- **Key Attributes**:
  - `src_path`: Source path of the event
  - `dest_path`: Destination path (for move events)
  - `event_type`: Type of event
  - `is_directory`: Whether the event involves a directory
  - `is_synthetic`: Whether the event was synthesized (not directly from OS)

### File Events

| Class | Purpose |
|-------|---------|
| `FileDeletedEvent` | File deletion |
| `FileModifiedEvent` | File modification |
| `FileCreatedEvent` | File creation |
| `FileMovedEvent` | File movement/rename |
| `FileClosedEvent` | File closed after writing |
| `FileClosedNoWriteEvent` | File closed after reading only |
| `FileOpenedEvent` | File opened |

### Directory Events

| Class | Purpose |
|-------|---------|
| `DirDeletedEvent` | Directory deletion |
| `DirModifiedEvent` | Directory modification |
| `DirCreatedEvent` | Directory creation |
| `DirMovedEvent` | Directory movement/rename |

## Event Handler Classes

### `FileSystemEventHandler`
- **Purpose**: Base event handler with methods for each event type
- **Key Methods**:
  - `dispatch(event)`: Routes events to appropriate handler methods
  - `on_any_event(event)`: Catch-all handler
  - `on_moved(event)`, `on_created(event)`, etc.: Specific event handlers

**Usage Example**:
```python
class MyHandler(FileSystemEventHandler):
    def on_modified(self, event):
        print(f"File modified: {event.src_path}")
```

### `PatternMatchingEventHandler`
- **Purpose**: Filters events based on file path patterns
- **Features**:
  - Include/exclude patterns using pathlib's `PurePath.match()`
  - Case sensitivity control
  - Directory filtering option
- **Constructor Parameters**:
  - `patterns`: List of patterns to match
  - `ignore_patterns`: List of patterns to ignore
  - `ignore_directories`: Skip directory events
  - `case_sensitive`: Case-sensitive matching

**Usage Example**:
```python
handler = PatternMatchingEventHandler(
    patterns=["*.txt", "*.py"],
    ignore_patterns=["*.tmp"],
    case_sensitive=False
)
```

### `RegexMatchingEventHandler`
- **Purpose**: Filters events using regular expressions
- **Features**:
  - Uses `re` module for pattern matching
  - Supports multiple regex patterns
  - Case sensitivity control
- **Constructor Parameters**:
  - `regexes`: List of regex patterns to match
  - `ignore_regexes`: List of regex patterns to ignore
  - `ignore_directories`: Skip directory events  
  - `case_sensitive`: Case-sensitive matching

**Usage Example**:
```python
handler = RegexMatchingEventHandler(
    regexes=[r'.*\.py$', r'.*\.txt$'],
    ignore_regexes=[r'.*\.tmp$']
)
```

### `LoggingEventHandler`
- **Purpose**: Logs all file system events
- **Features**:
  - Uses Python's logging module
  - Provides detailed event information
  - Configurable logger instance

**Usage Example**:
```python
import logging
handler = LoggingEventHandler(logger=logging.getLogger('watchdog'))
```

## Utility Functions

### `generate_sub_moved_events(src_dir_path, dest_dir_path)`
- **Purpose**: Generates synthetic move events for all contents of a moved directory
- **Returns**: Generator yielding `DirMovedEvent` and `FileMovedEvent` objects
- **Use Case**: When a directory is moved, this creates events for all nested files/directories

### `generate_sub_created_events(src_dir_path)`
- **Purpose**: Generates synthetic creation events for all contents of a created directory
- **Returns**: Generator yielding `DirCreatedEvent` and `FileCreatedEvent` objects
- **Use Case**: When a directory is created with contents, this creates events for nested items

## Usage Notes

### Best Practices
- Use `PatternMatchingEventHandler` for simple glob-style patterns
- Use `RegexMatchingEventHandler` for complex pattern matching
- Set `ignore_directories=True` if you only care about file events
- Events are immutable - don't try to modify them

### Performance Considerations
- Pattern matching handlers filter events efficiently
- Synthetic events help maintain consistency but may increase event volume
- Consider using appropriate ignore patterns to reduce unnecessary processing

### Type Safety
- All classes use modern Python type hints
- Event objects can be safely used as dictionary keys due to immutability
- Handler methods have proper type annotations for IDEs and type checkers

## Example Integration

```python
from watchdog.observers import Observer
from watchdog.events import PatternMatchingEventHandler

class MyEventHandler(PatternMatchingEventHandler):
    def __init__(self):
        super().__init__(patterns=["*.py"], ignore_directories=True)
    
    def on_modified(self, event):
        print(f"Python file changed: {