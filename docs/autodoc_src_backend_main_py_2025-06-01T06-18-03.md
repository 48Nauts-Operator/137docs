<!--
This documentation was auto-generated by Claude on 2025-06-01T06-18-03.
Source file: ./src/backend/main.py
-->

# API Documentation

## Overview

This is a FastAPI-based document management and processing system that provides RESTful endpoints for handling documents, users, tenants, and processing rules. The application includes AI-powered document analysis, multi-tenant support, and automated document processing capabilities.

## Dependencies

### Core Framework
- **FastAPI**: Modern, fast web framework for building APIs
- **Uvicorn**: ASGI web server implementation

### Database & ORM
- **SQLAlchemy**: SQL toolkit and Object-Relational Mapping (ORM) library
- **Pydantic**: Data validation using Python type annotations

### Authentication & Security
- **HTTPBearer**: HTTP Bearer token authentication scheme
- **JWT**: JSON Web Token implementation for secure authentication

### File Handling & Storage
- **pathlib**: Object-oriented filesystem paths
- **shutil**: High-level file operations
- **os**: Operating system interface

### AI & Processing
- **Vision AI**: Custom vision analysis module for document processing
- **LLM Integration**: Large Language Model integration for intelligent document analysis

### Utilities
- **logging**: Python logging facility
- **contextlib**: Utilities for common tasks involving the `with` statement
- **typing**: Support for type hints

## Application Structure

### Core Components

#### Database Layer
- `database.py`: Database connection and session management
- `models.py`: SQLAlchemy ORM models for data entities
- `schemas.py`: Pydantic models for request/response validation

#### Authentication System
- `auth.py`: JWT token management, password hashing, and user authentication
- Implements secure user authentication with Bearer token support

#### Document Management
- `document_service.py`: Core document processing business logic
- `utils.py`: File handling utilities and temporary file cleanup
- `vision_ai.py`: AI-powered document analysis and vision processing

#### Multi-Tenant Architecture
- `tenant_extractor.py`: Extract tenant information from documents
- `tenant_auto_assigner.py`: Automatically assign documents to appropriate tenants

#### Rule Processing Engine
- `document_rule_processor.py`: Apply processing rules to documents
- `rule_repository.py`: Manage and retrieve processing rules
- `processing_rules.py`: Define and validate document processing rules

#### Version Management
- `version.py`: Application version information and release history

### API Features

#### CORS Support
Cross-Origin Resource Sharing (CORS) middleware enabled for web application integration.

#### Static File Serving
Built-in static file serving capabilities for document delivery and web assets.

#### Background Task Processing
Asynchronous background task processing for long-running operations like document analysis.

#### Streaming Responses
Support for streaming large files and real-time data delivery.

## Data Models

### Core Entities
- **Document**: Represents uploaded documents with metadata and processing status
- **User**: System users with authentication credentials and permissions
- **Tenant**: Multi-tenant organization management
- **ProcessingRule**: Configurable rules for automated document processing

### Schema Validation
- **Create Schemas**: Validation for entity creation requests
- **Update Schemas**: Validation for entity modification requests
- **Response Schemas**: Standardized API response formats

## Error Handling

### Custom Exceptions
- **HTTPException**: Standard HTTP error responses
- **LLMNotConfiguredError**: Specific error for AI service configuration issues

### File Operations
- Automatic cleanup of temporary files
- Graceful handling of file upload errors
- Validation of file types and sizes

## Security Features

### Authentication
- JWT-based authentication system
- Secure password hashing using industry-standard algorithms
- Token verification and refresh capabilities

### Authorization
- Role-based access control
- Tenant-based data isolation
- Secure file access controls

## Deployment

The application uses Uvicorn as the ASGI server for production deployment, providing:
- High performance asynchronous request handling
- WebSocket support
- Production-ready server capabilities

## Usage Notes

This system is designed for enterprise document management with the following key capabilities:

1. **Automated Document Processing**: AI-powered analysis and categorization
2. **Multi-Tenant Support**: Isolated data and processing per organization
3. **Rule-Based Processing**: Configurable business logic for document handling
4. **Secure Authentication**: Enterprise-grade security features
5. **Scalable Architecture**: Asynchronous processing and background tasks

For specific API endpoint documentation, refer to the FastAPI automatic documentation available at `/docs` when the application is running.